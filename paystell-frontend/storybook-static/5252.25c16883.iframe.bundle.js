"use strict";(self.webpackChunkpaystell_frontend=self.webpackChunkpaystell_frontend||[]).push([[5252],{"./src/components/ui/button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>Button,r:()=>buttonVariants});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),class_variance_authority__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/utils.ts");const buttonVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_3__.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 my-1",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border  border-border bg-transparent text-foreground shadow-sm hover:bg-secondary hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",xl:"h-12 rounded-md px-10",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Button=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,variant,size,asChild=!1,...props},ref)=>{const Comp=asChild?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_2__.DX:"button";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Comp,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(buttonVariants({variant,size,className})),ref,...props})});Button.displayName="Button",Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{asChild:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}},composes:["VariantProps"]}},"./src/lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$g:()=>formatPrice,M0:()=>formatAddress,Yq:()=>formatDate,cn:()=>cn,ej:()=>formatAmount});var clsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),tailwind_merge__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tailwind-merge/dist/bundle-mjs.mjs");function cn(...inputs){return(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.QP)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.$)(inputs))}const formatPrice=(amount,currency="USD",locale="US")=>Intl.NumberFormat(locale,{style:"currency",currency}).format(amount),formatAddress=address=>address?`${address.substring(0,6)}...${address.substring(address.length-4)}`:"",formatDate=dateString=>{const date=new Date(dateString);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(date)},formatAmount=(amount,decimals=7)=>{const parsed=Number.parseFloat(amount);return isNaN(parsed)?"0".padEnd(decimals+2,"0"):parsed.toFixed(decimals)}},"./src/services/webhook.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{OB:()=>createWebhook,ju:()=>deleteWebhook,IK:()=>retryWebhookEvent,oj:()=>sendTestWebhook,Xz:()=>updateWebhook});var lib_axios=__webpack_require__("./node_modules/axios/lib/axios.js"),webhook_types=__webpack_require__("./src/types/webhook-types.ts");const webhook_mock_data_mockWebhooks=[{id:"wh_123456",merchantId:"mer_123456",url:"https://example.com/webhook-endpoint",isActive:!0,secretKey:"whsec_12345•••••••••••••••••••••••••••",eventTypes:[webhook_types._.PAYMENT_SUCCEEDED,webhook_types._.PAYMENT_FAILED,webhook_types._.PAYMENT_REFUNDED],maxRetries:3,initialRetryDelay:5e3,maxRetryDelay:3e5,createdAt:new Date("2023-05-15T10:00:00Z"),updatedAt:new Date("2023-05-20T14:30:00Z")},{id:"wh_789012",merchantId:"mer_123456",url:"https://api.yourcompany.com/paymentwebhooks",isActive:!0,secretKey:"whsec_78901•••••••••••••••••••••••••••",eventTypes:[webhook_types._.PAYMENT_SUCCEEDED,webhook_types._.ACCOUNT_CREATED,webhook_types._.ACCOUNT_UPDATED],maxRetries:5,initialRetryDelay:1e4,maxRetryDelay:6e5,createdAt:new Date("2023-06-10T08:15:00Z"),updatedAt:new Date("2023-06-12T11:45:00Z")},{id:"wh_345678",merchantId:"mer_123456",url:"https://webhook-relay.yourdomain.com/paystell",isActive:!1,secretKey:"whsec_34567•••••••••••••••••••••••••••",eventTypes:[webhook_types._.TEST_WEBHOOK],maxRetries:2,initialRetryDelay:3e3,maxRetryDelay:12e4,createdAt:new Date("2023-07-05T16:20:00Z"),updatedAt:new Date("2023-07-20T09:10:00Z")}],mockSecretStore={wh_123456:"whsec_123456abcdefghijklmnopqrstuvwxyz",wh_789012:"whsec_789012abcdefghijklmnopqrstuvwxyz",wh_345678:"whsec_345678abcdefghijklmnopqrstuvwxyz"},maskSecretKey=secretKey=>secretKey?`${secretKey.substring(0,6)}${"•".repeat(30)}`:"",storeMockSecret=(webhookId,secretKey)=>{mockSecretStore[webhookId]=secretKey},webhook_mock_data_mockDeliveryEvents={wh_123456:[{id:"evt_123456_1",jobId:"job_123456_1",webhookId:"wh_123456",webhookUrl:"https://example.com/webhook-endpoint",status:"completed",attemptsMade:1,maxAttempts:3,payload:{transactionId:"pmt_123456",transactionType:"payment",status:"succeeded",amount:"5000",asset:"USDC",merchantId:"mer_123456",timestamp:new Date("2023-08-15T10:30:00Z").toISOString(),paymentMethod:"card",eventType:"payment.succeeded",reqMethod:"POST"},responseStatusCode:200,responseBody:'{"received": true, "success": true}',createdAt:new Date("2023-08-15T10:30:00Z"),completedAt:new Date("2023-08-15T10:30:02Z"),updatedAt:new Date("2023-08-15T10:30:02Z"),signature:"t=1691211300,v1=5257a869e7ecebeda32affa62cdca3fa51cad7e77a0e56ff536d0ce8e108d8bd",headers:{"Content-Type":"application/json","X-PayStell-Signature":"t=1691211300,v1=5257a869e7ecebeda32affa62cdca3fa51cad7e77a0e56ff536d0ce8e108d8bd","User-Agent":"PayStell-Webhook/1.0","X-Request-Id":"req_123456789"}},{id:"evt_123456_2",jobId:"job_123456_2",webhookId:"wh_123456",webhookUrl:"https://example.com/webhook-endpoint",status:"failed",attemptsMade:3,maxAttempts:3,payload:{transactionId:"pmt_234567",transactionType:"payment",status:"failed",amount:"7500",asset:"USDC",merchantId:"mer_123456",timestamp:new Date("2023-08-16T14:20:00Z").toISOString(),paymentMethod:"card",metadata:{error:{code:"card_declined",message:"Card was declined"}},eventType:"payment.failed",reqMethod:"POST"},error:"Connection timed out after 30 seconds",responseStatusCode:504,createdAt:new Date("2023-08-16T14:20:00Z"),updatedAt:new Date("2023-08-16T14:50:00Z"),signature:"t=1691316000,v1=7a9c84d9f7ecebeda32affa62cdca3fa51cad7e77a0e56ff536d0ce8e108a94f",headers:{"Content-Type":"application/json","X-PayStell-Signature":"t=1691316000,v1=7a9c84d9f7ecebeda32affa62cdca3fa51cad7e77a0e56ff536d0ce8e108a94f","User-Agent":"PayStell-Webhook/1.0","X-Request-Id":"req_234567890"}},{id:"evt_123456_3",jobId:"job_123456_3",webhookId:"wh_123456",webhookUrl:"https://example.com/webhook-endpoint",status:"completed",attemptsMade:2,maxAttempts:3,payload:{id:"pmt_345678",amount:3e3,currency:"USD",status:"refunded",refund_amount:3e3,customer_id:"cus_345678",payment_method:"card"},responseStatusCode:200,responseBody:'{"received": true, "processed": true}',createdAt:new Date("2023-08-17T09:15:00Z"),completedAt:new Date("2023-08-17T09:15:30Z"),updatedAt:new Date("2023-08-17T09:15:30Z")}],wh_789012:[{id:"evt_789012_1",jobId:"job_789012_1",webhookId:"wh_789012",webhookUrl:"https://api.yourcompany.com/paymentwebhooks",status:"completed",attemptsMade:1,maxAttempts:5,payload:{id:"acc_123456",name:"Jane Doe",email:"jane@example.com",created:new Date("2023-08-20T11:00:00Z").toISOString(),status:"active"},responseStatusCode:200,responseBody:'{"success": true}',createdAt:new Date("2023-08-20T11:00:05Z"),completedAt:new Date("2023-08-20T11:00:06Z"),updatedAt:new Date("2023-08-20T11:00:06Z")},{id:"evt_789012_2",jobId:"job_789012_2",webhookId:"wh_789012",webhookUrl:"https://api.yourcompany.com/paymentwebhooks",status:"pending",attemptsMade:1,maxAttempts:5,payload:{id:"pmt_456789",amount:12500,currency:"USD",status:"succeeded",customer_id:"cus_456789",payment_method:"bank_transfer"},nextRetry:new Date(Date.now()+3e5),createdAt:new Date(Date.now()-6e4),updatedAt:new Date(Date.now()-6e4)}],wh_345678:[{id:"evt_345678_1",jobId:"job_345678_1",webhookId:"wh_345678",webhookUrl:"https://webhook-relay.yourdomain.com/paystell",status:"pending",attemptsMade:0,maxAttempts:2,payload:{id:"evt_test_12345",test:!0,created:(new Date).toISOString(),message:"This is a test webhook event"},nextRetry:new Date(Date.now()+3e3),createdAt:new Date(Date.now()),updatedAt:new Date(Date.now())}]};var process=__webpack_require__("./node_modules/process/browser.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");const MOCK_ENABLED="enabled"===process.env.NEXT_PUBLIC_API_MOCKING||!1,createWebhook=async webhookData=>{const subscriptionRequest={url:webhookData.url,secretKey:webhookData.secretKey,eventTypes:webhookData.eventTypes,maxRetries:webhookData.maxRetries,initialRetryDelay:webhookData.initialRetryDelay,maxRetryDelay:webhookData.maxRetryDelay};if(MOCK_ENABLED)return new Promise(resolve=>{const newWebhook={id:`wh_${Math.random().toString(36).substring(2,8)}`,merchantId:"mer_123456",url:webhookData.url,isActive:webhookData.isActive,secretKey:webhookData.secretKey?maskSecretKey(webhookData.secretKey):void 0,eventTypes:webhookData.eventTypes,maxRetries:webhookData.maxRetries,initialRetryDelay:webhookData.initialRetryDelay,maxRetryDelay:webhookData.maxRetryDelay,createdAt:new Date,updatedAt:new Date};webhookData.secretKey&&storeMockSecret(newWebhook.id,webhookData.secretKey),webhook_mock_data_mockWebhooks.push(newWebhook),setTimeout(()=>resolve(newWebhook),500)});try{return(await lib_axios.A.post("/webhooks/register",subscriptionRequest)).data}catch(error){throw console.error("Error creating webhook:",error),error}},updateWebhook=async(id,webhookData)=>{const subscriptionRequest={};if("url"in webhookData&&(subscriptionRequest.url=webhookData.url),"secretKey"in webhookData&&(subscriptionRequest.secretKey=webhookData.secretKey),"eventTypes"in webhookData&&(subscriptionRequest.eventTypes=webhookData.eventTypes),"maxRetries"in webhookData&&(subscriptionRequest.maxRetries=webhookData.maxRetries),"initialRetryDelay"in webhookData&&(subscriptionRequest.initialRetryDelay=webhookData.initialRetryDelay),"maxRetryDelay"in webhookData&&(subscriptionRequest.maxRetryDelay=webhookData.maxRetryDelay),"isActive"in webhookData&&(subscriptionRequest.isActive=webhookData.isActive),MOCK_ENABLED)return new Promise(resolve=>{const webhookIndex=webhook_mock_data_mockWebhooks.findIndex(webhook=>webhook.id===id);if(-1===webhookIndex)throw new Error(`Webhook with ID ${id} not found`);{webhookData.secretKey&&(storeMockSecret(id,webhookData.secretKey),webhookData.secretKey=maskSecretKey(webhookData.secretKey));const updatedWebhook={...webhook_mock_data_mockWebhooks[webhookIndex],...webhookData,updatedAt:new Date};webhook_mock_data_mockWebhooks[webhookIndex]=updatedWebhook,setTimeout(()=>resolve(updatedWebhook),500)}});try{return(await lib_axios.A.put("/webhooks/register",{id,...subscriptionRequest})).data}catch(error){throw console.error(`Error updating webhook with ID ${id}:`,error),error}},deleteWebhook=async id=>{if(MOCK_ENABLED)return new Promise(resolve=>{const webhookIndex=webhook_mock_data_mockWebhooks.findIndex(webhook=>webhook.id===id);if(-1===webhookIndex)throw new Error(`Webhook with ID ${id} not found`);webhook_mock_data_mockWebhooks.splice(webhookIndex,1),setTimeout(()=>resolve(),500)});try{await lib_axios.A.delete(`/webhooks/register?id=${id}`)}catch(error){throw console.error(`Error deleting webhook with ID ${id}:`,error),error}},sendTestWebhook=async id=>{if(MOCK_ENABLED)return new Promise(resolve=>{var _mockWebhooks_find;const testEvent={id:`evt_test_${Math.random().toString(36).substring(2,8)}`,jobId:`job_test_${Math.random().toString(36).substring(2,8)}`,webhookId:id,webhookUrl:(null===(_mockWebhooks_find=webhook_mock_data_mockWebhooks.find(webhook=>webhook.id===id))||void 0===_mockWebhooks_find?void 0:_mockWebhooks_find.url)||"https://example.com/webhook",status:"completed",attemptsMade:1,maxAttempts:3,payload:{id:"evt_test_12345",transactionId:"tx_test_12345",status:"success",merchantId:"mer_123456",timestamp:(new Date).toISOString(),eventType:webhook_types._.TEST_WEBHOOK,reqMethod:"POST",test:!0,created:(new Date).toISOString(),message:"This is a test webhook event"},responseStatusCode:200,responseBody:'{"success": true, "received": true}',createdAt:new Date,completedAt:new Date,updatedAt:new Date};webhook_mock_data_mockDeliveryEvents[id]||(webhook_mock_data_mockDeliveryEvents[id]=[]),webhook_mock_data_mockDeliveryEvents[id].unshift(testEvent),setTimeout(()=>resolve({success:!0,event:testEvent}),1e3)});try{return(await lib_axios.A.post(`/api/webhooks/${id}/test`)).data}catch(error){throw console.error(`Error sending test webhook for ID ${id}:`,error),error}},retryWebhookEvent=async eventId=>{if(MOCK_ENABLED)return new Promise(resolve=>{let foundEvent=null,webhookId=null;for(const[wId,events]of Object.entries(webhook_mock_data_mockDeliveryEvents)){const event=events.find(e=>e.id===eventId);if(event){foundEvent=event,webhookId=wId;break}}if(!foundEvent||!webhookId)throw new Error(`Event with ID ${eventId} not found`);{const success=Math.random()>.3,updatedEvent={...foundEvent,status:success?"completed":"failed",attemptsMade:foundEvent.attemptsMade+1,updatedAt:new Date,completedAt:success?new Date:void 0},eventIndex=webhook_mock_data_mockDeliveryEvents[webhookId].findIndex(e=>e.id===eventId);-1!==eventIndex&&(webhook_mock_data_mockDeliveryEvents[webhookId][eventIndex]=updatedEvent),setTimeout(()=>resolve(updatedEvent),1e3)}});try{return(await lib_axios.A.post(`/api/webhooks/events/${eventId}/retry`)).data}catch(error){throw console.error(`Error retrying webhook event with ID ${eventId}:`,error),error}}},"./src/types/webhook-types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var WebhookEventType;__webpack_require__.d(__webpack_exports__,{_:()=>WebhookEventType}),function(WebhookEventType){WebhookEventType.PAYMENT_SUCCEEDED="payment.succeeded",WebhookEventType.PAYMENT_FAILED="payment.failed",WebhookEventType.PAYMENT_REFUNDED="payment.refunded",WebhookEventType.PAYMENT_PENDING="payment.pending",WebhookEventType.ACCOUNT_CREATED="account.created",WebhookEventType.ACCOUNT_UPDATED="account.updated",WebhookEventType.TEST_WEBHOOK="test.webhook"}(WebhookEventType||(WebhookEventType={}))}}]);