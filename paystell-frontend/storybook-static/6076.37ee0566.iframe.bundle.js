"use strict";(self.webpackChunkpaystell_frontend=self.webpackChunkpaystell_frontend||[]).push([[6076],{"./src/components/stepper/Stepper.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>Stepper});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_barrel_optimize_names_CheckCircle2_lucide_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/circle-check.js"),framer_motion__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),_hooks_useStepper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/useStepper.tsx"),_lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/utils.ts");const getProgressPercentage=(currentStepIndex,totalSteps)=>totalSteps<=1?0:currentStepIndex/Math.max(1,totalSteps-1)*100;function Stepper({className,variant="default",size="md",showStepNumbers=!0,showProgress=!0,allowBackNavigation=!0}){var _steps_currentStepIndex,_steps_currentStepIndex1;const{steps,currentStepIndex,stepStates,goToStep,isStepAccessible,isStepCompleted,getProgress}=(0,_hooks_useStepper__WEBPACK_IMPORTED_MODULE_3__.lE)(),currentSize={sm:{circle:"w-8 h-8",icon:"h-4 w-4",text:"text-xs",spacing:"space-y-1"},md:{circle:"w-10 h-10",icon:"h-5 w-5",text:"text-sm",spacing:"space-y-2"},lg:{circle:"w-12 h-12",icon:"h-6 w-6",text:"text-base",spacing:"space-y-3"}}[size],progressVariants={initial:{width:0},animate:{width:`${getProgressPercentage(currentStepIndex,steps.length)}%`,transition:{duration:.5,ease:"easeOut"}}},stepVariants={inactive:{scale:1},active:{scale:[1,1.1,1],transition:{duration:.5}},completed:{scale:[1,1.2,1],transition:{duration:.5}}},getStepClasses=status=>{const baseClasses=`${currentSize.circle} rounded-full flex items-center justify-center border-2 transition-all duration-200`;return status.hasError?`${baseClasses} bg-destructive border-destructive text-destructive-foreground`:status.isCompleted||status.isActive?`${baseClasses} bg-primary border-primary text-primary-foreground`:status.isAccessible?`${baseClasses} bg-background border-muted-foreground text-muted-foreground hover:border-primary hover:text-primary cursor-pointer`:`${baseClasses} bg-muted border-muted text-muted-foreground`},getStepTextClasses=status=>{const baseClasses=`${currentSize.text} font-medium transition-colors duration-200`;return status.hasError?`${baseClasses} text-destructive`:status.isCompleted||status.isActive?`${baseClasses} text-primary`:`${baseClasses} text-muted-foreground`};return"minimal"===variant?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("mb-6",className),children:[showProgress&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:["Step ",currentStepIndex+1," of ",steps.length]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:[Math.round(getProgress()),"%"]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-full bg-muted h-2 rounded-full overflow-hidden",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_2__.P.div,{className:"bg-primary h-full rounded-full",initial:{width:0},animate:{width:`${getProgress()}%`},transition:{duration:.5,ease:"easeOut"}})})]}),steps[currentStepIndex]&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(showProgress?"mt-3":""),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"font-semibold text-foreground",children:steps[currentStepIndex].title}),steps[currentStepIndex].description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:steps[currentStepIndex].description})]})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("mb-8",className),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"hidden md:flex items-center justify-between relative w-full",children:[showProgress&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute left-0 w-full h-[2px] bg-muted",style:{top:{sm:32,md:40,lg:48}[size]/2+"px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_2__.P.div,{className:"h-full bg-primary",variants:progressVariants,initial:"initial",animate:"animate"})}),steps.map((step,index)=>{const status=((stepIndex,stepId)=>{const stepState=stepStates[stepId];return{isCompleted:isStepCompleted(stepId),isActive:stepIndex===currentStepIndex,isAccessible:isStepAccessible(stepId),hasError:"error"===(null==stepState?void 0:stepState.status)}})(index,step.id);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("flex flex-col items-center relative z-10",currentSize.spacing),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_2__.P.div,{className:getStepClasses(status),variants:stepVariants,initial:"inactive",animate:status.isActive?"active":status.isCompleted?"completed":"inactive",onClick:()=>status.isAccessible&&goToStep(step.id),role:"button",tabIndex:status.isAccessible?0:-1,"aria-label":`Step ${index+1}: ${step.title}`,"aria-current":status.isActive?"step":void 0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||!status.isAccessible||(e.preventDefault(),goToStep(step.id))},children:status.isCompleted?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_CheckCircle2_lucide_react__WEBPACK_IMPORTED_MODULE_1__.A,{className:currentSize.icon}):showStepNumbers?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-semibold",children:index+1}):null}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-center max-w-[120px]",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:getStepTextClasses(status),children:step.title}),step.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:step.description})]})]},step.id)})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"md:hidden space-y-3",children:[showProgress&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(currentSize.text,"font-medium"),children:["Step ",currentStepIndex+1," of ",steps.length]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(currentSize.text,"font-medium text-muted-foreground"),children:null===(_steps_currentStepIndex=steps[currentStepIndex])||void 0===_steps_currentStepIndex?void 0:_steps_currentStepIndex.title})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-full bg-muted h-2 rounded-full overflow-hidden",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_2__.P.div,{className:"bg-primary h-full rounded-full",initial:{width:0},animate:{width:`${getProgress()}%`},transition:{duration:.5,ease:"easeOut"}})})]}),(null===(_steps_currentStepIndex1=steps[currentStepIndex])||void 0===_steps_currentStepIndex1?void 0:_steps_currentStepIndex1.description)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-muted-foreground",children:steps[currentStepIndex].description})]})]})}Stepper.__docgenInfo={description:"",methods:[],displayName:"Stepper",props:{variant:{defaultValue:{value:"'default'",computed:!1},required:!1},size:{defaultValue:{value:"'md'",computed:!1},required:!1},showStepNumbers:{defaultValue:{value:"true",computed:!1},required:!1},showProgress:{defaultValue:{value:"true",computed:!1},required:!1},allowBackNavigation:{defaultValue:{value:"true",computed:!1},required:!1}}}},"./src/hooks/useStepper.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Pm:()=>StepperProvider,lE:()=>useStepper});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const StepperContext=(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(void 0);function StepperProvider({children,steps,initialStepId,onStepChange,onComplete,formData,allowBackNavigation=!0}){const[currentStepIndex,setCurrentStepIndex]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>{if(initialStepId){const index=steps.findIndex(step=>step.id===initialStepId);return index>=0?index:0}return 0}),[stepStates,setStepStates]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>{const initialStates={};return steps.forEach((step,index)=>{initialStates[step.id]={id:step.id,status:index===currentStepIndex?"in_progress":"pending"}}),initialStates}),[formMethods,setFormMethods]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(),visibleSteps=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{if(!formData)return steps;const completedStepIds=Object.keys(stepStates).filter(stepId=>"completed"===stepStates[stepId].status);return steps.filter(step=>!step.shouldShow||step.shouldShow(formData,completedStepIds))},[steps,formData,stepStates]),currentStep=visibleSteps[currentStepIndex]||null,totalSteps=visibleSteps.length,currentStepId=null==currentStep?void 0:currentStep.id;(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(!visibleSteps.length)return;const idxById=currentStepId?visibleSteps.findIndex(s=>s.id===currentStepId):0,nextIdx=idxById>=0?idxById:Math.min(currentStepIndex,visibleSteps.length-1);nextIdx!==currentStepIndex&&setCurrentStepIndex(nextIdx)},[visibleSteps,currentStepId,currentStepIndex]);const updateStepStatus=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((stepId,status,error)=>{setStepStates(prev=>{var _prev_stepId;return{...prev,[stepId]:{...prev[stepId],status,error,completedAt:"completed"===status?new Date:null===(_prev_stepId=prev[stepId])||void 0===_prev_stepId?void 0:_prev_stepId.completedAt}}})},[]),updateStepData=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((stepId,data)=>{setStepStates(prev=>({...prev,[stepId]:{...prev[stepId],data}}))},[]),validateCurrentStep=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async()=>{if(!currentStep||!formData)return!0;try{if(updateStepStatus(currentStep.id,"in_progress"),currentStep.validate){if(!await currentStep.validate(formData,formMethods))return updateStepStatus(currentStep.id,"error","Validation failed"),!1}if(formMethods){if(!await formMethods.trigger())return updateStepStatus(currentStep.id,"error","Form validation failed"),!1}return updateStepStatus(currentStep.id,"completed"),!0}catch(error){const errorMessage=error instanceof Error?error.message:"Unknown error";return updateStepStatus(currentStep.id,"error",errorMessage),!1}},[currentStep,formData,formMethods,updateStepStatus]),nextStep=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async()=>{if(!currentStep)return!1;if(!await validateCurrentStep()&&!currentStep.canSkip)return!1;const nextIndex=currentStepIndex+1;if(nextIndex<totalSteps){const previousStep=currentStep;setCurrentStepIndex(nextIndex);const nextStepId=visibleSteps[nextIndex].id;return updateStepStatus(nextStepId,"in_progress"),onStepChange&&onStepChange(visibleSteps[nextIndex],previousStep),window.scrollTo(0,0),!0}return!(nextIndex!==totalSteps||!onComplete||!formData)&&(onComplete(formData),!0)},[currentStep,currentStepIndex,totalSteps,visibleSteps,validateCurrentStep,updateStepStatus,onStepChange,onComplete,formData]),skipStep=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async()=>{if(!currentStep)return!1;try{updateStepStatus(currentStep.id,"completed");const nextIndex=currentStepIndex+1;if(nextIndex<totalSteps){const previousStep=currentStep;setCurrentStepIndex(nextIndex);const nextStepId=visibleSteps[nextIndex].id;return updateStepStatus(nextStepId,"in_progress"),onStepChange&&onStepChange(visibleSteps[nextIndex],previousStep),window.scrollTo(0,0),!0}return!(nextIndex!==totalSteps||!onComplete||!formData)&&(onComplete(formData),!0)}catch(error){const errorMessage=error instanceof Error?error.message:"Unknown error";return updateStepStatus(currentStep.id,"error",errorMessage),!1}},[currentStep,currentStepIndex,totalSteps,visibleSteps,updateStepStatus,onStepChange,onComplete,formData]),previousStep=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{if(allowBackNavigation&&currentStepIndex>0){const previousStep=currentStep,newIndex=currentStepIndex-1;setCurrentStepIndex(newIndex),updateStepStatus(visibleSteps[newIndex].id,"in_progress"),onStepChange&&onStepChange(visibleSteps[newIndex],previousStep),window.scrollTo(0,0)}},[allowBackNavigation,currentStepIndex,currentStep,visibleSteps,updateStepStatus,onStepChange]),isStepAccessible=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(stepId=>{const stepIndex=visibleSteps.findIndex(step=>step.id===stepId);if(-1===stepIndex)return!1;if(stepIndex===currentStepIndex)return!0;if(!allowBackNavigation&&stepIndex<currentStepIndex)return!1;if(stepIndex<currentStepIndex)return!0;for(let i=0;i<stepIndex;i++){const step=visibleSteps[i];if("completed"!==stepStates[step.id].status&&!step.canSkip)return!1}return!0},[allowBackNavigation,visibleSteps,currentStepIndex,stepStates]),goToStep=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(stepId=>{const stepIndex=visibleSteps.findIndex(step=>step.id===stepId);if(-1===stepIndex)return!1;if(!isStepAccessible(stepId))return!1;const previousStep=currentStep;return setCurrentStepIndex(stepIndex),updateStepStatus(stepId,"in_progress"),onStepChange&&previousStep&&onStepChange(visibleSteps[stepIndex],previousStep),window.scrollTo(0,0),!0},[visibleSteps,currentStep,updateStepStatus,onStepChange,isStepAccessible]),completedSteps=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{const visibleStepIds=visibleSteps.map(step=>step.id);return Object.keys(stepStates).filter(stepId=>"completed"===stepStates[stepId].status&&visibleStepIds.includes(stepId))},[stepStates,visibleSteps]),isStepCompleted=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(stepId=>{var _stepStates_stepId;return"completed"===(null===(_stepStates_stepId=stepStates[stepId])||void 0===_stepStates_stepId?void 0:_stepStates_stepId.status)},[stepStates]),canGoNext=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>currentStepIndex<totalSteps-1,[currentStepIndex,totalSteps]),canGoPrevious=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>allowBackNavigation&&currentStepIndex>0,[allowBackNavigation,currentStepIndex]),getProgress=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>0===totalSteps?0:completedSteps.length/totalSteps*100,[completedSteps.length,totalSteps]),contextValue={steps:visibleSteps,currentStepIndex,currentStep,stepStates,canGoNext,canGoPrevious,nextStep,previousStep,goToStep,skipStep,updateStepStatus,updateStepData,validateCurrentStep,totalSteps,completedSteps,getProgress,isStepCompleted,isStepAccessible,formMethods,setFormMethods};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StepperContext.Provider,{value:contextValue,children})}function useStepper(){const context=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(StepperContext);if(void 0===context)throw new Error("useStepper must be used within a StepperProvider");return context}StepperProvider.__docgenInfo={description:"",methods:[],displayName:"StepperProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},steps:{required:!0,tsType:{name:"Array",elements:[{name:"StepConfig",elements:[{name:"TFormData"}],raw:"StepConfig<TFormData>"}],raw:"StepConfig<TFormData>[]"},description:""},initialStepId:{required:!1,tsType:{name:"string"},description:""},onStepChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(\n  currentStep: StepConfig<TFormData>,\n  previousStep: StepConfig<TFormData> | null,\n) => void",signature:{arguments:[{type:{name:"StepConfig",elements:[{name:"TFormData"}],raw:"StepConfig<TFormData>"},name:"currentStep"},{type:{name:"union",raw:"StepConfig<TFormData> | null",elements:[{name:"StepConfig",elements:[{name:"TFormData"}],raw:"StepConfig<TFormData>"},{name:"null"}]},name:"previousStep"}],return:{name:"void"}}},description:""},onComplete:{required:!1,tsType:{name:"signature",type:"function",raw:"(formData: TFormData) => void",signature:{arguments:[{type:{name:"TFormData"},name:"formData"}],return:{name:"void"}}},description:""},formData:{required:!1,tsType:{name:"TFormData"},description:""},allowBackNavigation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}}}}]);