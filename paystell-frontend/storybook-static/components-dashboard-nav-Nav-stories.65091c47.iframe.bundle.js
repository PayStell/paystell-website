"use strict";(self.webpackChunkpaystell_frontend=self.webpackChunkpaystell_frontend||[]).push([[48],{"./node_modules/react-icons/lib/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k5:()=>GenIcon});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=react.createContext&&react.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var target={};for(var key in source)if(Object.prototype.hasOwnProperty.call(source,key)){if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Tree2Element(tree){return tree&&tree.map((node,i)=>react.createElement(node.tag,_objectSpread({key:i},node.attr),Tree2Element(node.child)))}function GenIcon(data){return props=>react.createElement(IconBase,_extends({attr:_objectSpread({},data.attr)},props),Tree2Element(data.child))}function IconBase(props){var elem=conf=>{var className,{attr,size,title}=props,svgProps=_objectWithoutProperties(props,_excluded),computedSize=size||conf.size||"1em";return conf.className&&(className=conf.className),props.className&&(className=(className?className+" ":"")+props.className),react.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},conf.attr,attr,svgProps,{className,style:_objectSpread(_objectSpread({color:props.color||conf.color},conf.style),props.style),height:computedSize,width:computedSize,xmlns:"http://www.w3.org/2000/svg"}),title&&react.createElement("title",null,title),props.children)};return void 0!==IconContext?react.createElement(IconContext.Consumer,null,conf=>elem(conf)):elem(DefaultContext)}},"./src/components/dashboard/nav/Nav.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,DesktopView:()=>DesktopView,MobileView:()=>MobileView,MobileWithOpenNav:()=>MobileWithOpenNav,TabletView:()=>TabletView,TouchTargetTest:()=>TouchTargetTest,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Nav_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),utils=__webpack_require__("./src/lib/utils.ts"),md=__webpack_require__("__barrel_optimize__?names=MdCheckCircle!=!./node_modules/react-icons/md/index.mjs");const navItemVariants=(0,__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs").F)("flex items-center gap-3 rounded-lg px-3 py-3 text-sm transition-colors min-h-[48px] md:min-h-[44px] md:py-2 touch-manipulation active:scale-[0.98] duration-150",{variants:{variant:{default:"text-card-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",active:"bg-primary text-primary-foreground focus:bg-primary focus:text-primary-foreground"}},defaultVariants:{variant:"default"}}),navStyles_base="fixed inset-y-0 left-0 z-40 flex w-64 flex-col bg-card p-4 transition-transform duration-300 ease-out md:translate-x-0 shadow-lg md:shadow-none",navStyles_open="translate-x-0",navStyles_closed="-translate-x-full",navStyles_overlay="fixed inset-0 bg-background/80 backdrop-blur-sm md:hidden z-30",navStyles_trigger="fixed top-4 left-4 z-50 p-2 rounded-lg hover:bg-accent md:hidden shadow-lg bg-card/80 backdrop-blur-sm";function MobileTrigger({open,setOpen}){const handleToggle=()=>{setOpen(!open)};return(0,jsx_runtime.jsx)("button",{type:"button",className:`${navStyles_trigger} min-h-[48px] min-w-[48px] flex items-center justify-center touch-manipulation active:scale-95 transition-transform duration-150`,onClick:handleToggle,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),handleToggle())},"aria-label":open?"Close navigation menu":"Open navigation menu","aria-expanded":open,"aria-controls":"main-navigation",children:open?(0,jsx_runtime.jsx)(md.m6K,{className:"h-6 w-6","aria-hidden":"true"}):(0,jsx_runtime.jsx)(md.vIB,{className:"h-6 w-6","aria-hidden":"true"})})}MobileTrigger.__docgenInfo={description:"",methods:[],displayName:"MobileTrigger",props:{open:{required:!0,tsType:{name:"boolean"},description:""},setOpen:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};var next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs");function NavItem({item,onSelect}){const isActive=(0,navigation.usePathname)()===item.href;return(0,jsx_runtime.jsxs)(link_default(),{href:item.href,onClick:()=>{onSelect&&setTimeout(onSelect,100)},className:navItemVariants({variant:isActive?"active":"default"}),"aria-current":isActive?"page":void 0,"aria-label":`Navigate to ${item.title}`,children:[(0,jsx_runtime.jsx)(item.icon,{className:"h-4 w-4 flex-shrink-0","aria-hidden":"true"}),(0,jsx_runtime.jsx)("span",{className:"truncate",children:item.title})]})}NavItem.__docgenInfo={description:"",methods:[],displayName:"NavItem",props:{item:{required:!0,tsType:{name:"NavItem"},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),next_image=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.mjs");function Logo(){return(0,jsx_runtime.jsx)(next_image.A,{src:"/imagotype-paystell-main.svg",alt:"PayStell Logo",width:32,height:32,priority:!0,className:"h-8 w-auto"})}Logo.__docgenInfo={description:"",methods:[],displayName:"Logo"};var AuthProvider=__webpack_require__("./src/providers/AuthProvider.tsx"),lib=__webpack_require__("./node_modules/react-icons/lib/index.mjs");function IoLogOutOutline(props){return(0,lib.k5)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M304 336v40a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V136a40 40 0 0 1 40-40h152c22.09 0 48 17.91 48 40v40m64 160 80-80-80-80m-192 80h256"},child:[]}]})(props)}var console=__webpack_require__("./node_modules/console-browserify/index.js");function Nav({items,className,isOpen,onOpenChange,brand={title:"PayStell"},...props}){const{logout}=(0,AuthProvider.A)(),router=(0,navigation.useRouter)(),handleMobileNavClose=(0,react.useCallback)(()=>onOpenChange(!1),[onOpenChange]);return(0,react.useEffect)(()=>{const handleEscape=e=>{"Escape"===e.key&&isOpen&&handleMobileNavClose()};return isOpen?(document.body.style.overflow="hidden",document.addEventListener("keydown",handleEscape)):document.body.style.overflow="",()=>{document.body.style.overflow="",document.removeEventListener("keydown",handleEscape)}},[isOpen,handleMobileNavClose]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(MobileTrigger,{open:isOpen,setOpen:onOpenChange}),isOpen&&(0,jsx_runtime.jsx)("div",{className:(0,utils.cn)(navStyles_overlay,"animate-in fade-in duration-200"),onClick:handleMobileNavClose,onKeyUp:e=>"Escape"===e.key&&handleMobileNavClose(),role:"button",tabIndex:0,"aria-label":"Close navigation menu"}),(0,jsx_runtime.jsxs)("nav",{className:(0,utils.cn)(navStyles_base,isOpen?navStyles_open:navStyles_closed,"animate-in slide-in-from-left duration-300 ease-out",className),role:"navigation","aria-label":"Main navigation",...props,children:[(0,jsx_runtime.jsx)("div",{className:"mb-8 flex justify-center p-2",children:brand.logo||(0,jsx_runtime.jsx)(Logo,{})}),(0,jsx_runtime.jsx)("div",{className:"space-y-2 flex-1",children:items.map(item=>(0,jsx_runtime.jsx)(NavItem,{item,onSelect:handleMobileNavClose},item.href))}),(0,jsx_runtime.jsx)("div",{className:"mt-auto pt-4 border-t border-border/50",children:(0,jsx_runtime.jsxs)("button",{onClick:async()=>{try{await logout(),router.push("/login")}catch(error){console.error("Logout failed:",error)}},className:"flex items-center gap-3 rounded-lg px-3 py-3 text-sm text-red-500 hover:bg-red-50 hover:text-red-600 transition-colors w-full min-h-[44px] touch-manipulation","aria-label":"Logout from account",children:[(0,jsx_runtime.jsx)(IoLogOutOutline,{className:"h-4 w-4 flex-shrink-0"}),(0,jsx_runtime.jsx)("span",{children:"Logout"})]})})]})]})}Nav.__docgenInfo={description:"",methods:[],displayName:"Nav",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"NavItem"}],raw:"NavItem[]"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},brand:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  title: string;\n  logo?: React.ReactNode;\n}",signature:{properties:[{key:"title",value:{name:"string",required:!0}},{key:"logo",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}}]}},description:"",defaultValue:{value:"{ title: 'PayStell' }",computed:!1}}}};const Nav_stories={title:"Dashboard/Navigation",component:Nav,parameters:{layout:"fullscreen",docs:{description:{component:"Enhanced responsive navigation component with improved mobile drawer functionality and proper touch targets."}}},tags:["autodocs"]},sampleNavItems=[{title:"Dashboard",href:"/dashboard",icon:()=>(0,jsx_runtime.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,jsx_runtime.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,jsx_runtime.jsx)("polyline",{points:"9,22 9,12 15,12 15,22"})]})},{title:"Transactions",href:"/dashboard/transactions",icon:()=>(0,jsx_runtime.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,jsx_runtime.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,jsx_runtime.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,jsx_runtime.jsx)("path",{d:"M2 12l10 5 10-5"})]})},{title:"Analytics",href:"/dashboard/analytics",icon:()=>(0,jsx_runtime.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,jsx_runtime.jsx)("path",{d:"M18 20V10"}),(0,jsx_runtime.jsx)("path",{d:"M12 20V4"}),(0,jsx_runtime.jsx)("path",{d:"M6 20v-6"})]})},{title:"Settings",href:"/dashboard/settings",icon:()=>(0,jsx_runtime.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,jsx_runtime.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,jsx_runtime.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06-.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}],NavigationWrapper=({isOpen,onOpenChange})=>(0,jsx_runtime.jsxs)("div",{className:"flex min-h-screen",children:[(0,jsx_runtime.jsx)(Nav,{items:sampleNavItems,isOpen,onOpenChange,brand:{title:"PayStell",logo:(0,jsx_runtime.jsx)("div",{className:"text-xl font-bold text-primary",children:"PayStell"})}}),(0,jsx_runtime.jsx)("main",{className:"flex-1 p-4 md:p-8 w-full mt-14 md:mt-0 md:ml-64",children:(0,jsx_runtime.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,jsx_runtime.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Dashboard Content"}),(0,jsx_runtime.jsx)("p",{className:"text-muted-foreground mb-6",children:"This is the main content area. The navigation should be responsive and work well on mobile devices."}),(0,jsx_runtime.jsxs)("div",{className:"mb-8 p-4 border rounded-lg bg-muted/50",children:[(0,jsx_runtime.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Touch Target Testing"}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"All interactive elements should have a minimum touch target of 44px (48px on mobile)."}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("button",{className:"min-h-[48px] px-4 py-2 bg-primary text-primary-foreground rounded-lg",children:"Test Button (48px height)"}),(0,jsx_runtime.jsx)("button",{className:"min-h-[44px] px-4 py-2 bg-secondary text-secondary-foreground rounded-lg",children:"Test Button (44px height)"})]})]}),(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((_,i)=>(0,jsx_runtime.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,jsx_runtime.jsxs)("h3",{className:"font-semibold",children:["Card ",i+1]}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:"This is a sample card to demonstrate the layout."})]},i))})]})})]}),DefaultStory=()=>{const[isOpen,setIsOpen]=(0,react.useState)(!1);return(0,jsx_runtime.jsx)(NavigationWrapper,{isOpen,onOpenChange:setIsOpen})},MobileViewStory=()=>{const[isOpen,setIsOpen]=(0,react.useState)(!1);return(0,jsx_runtime.jsx)(NavigationWrapper,{isOpen,onOpenChange:setIsOpen})},TabletViewStory=()=>{const[isOpen,setIsOpen]=(0,react.useState)(!1);return(0,jsx_runtime.jsx)(NavigationWrapper,{isOpen,onOpenChange:setIsOpen})},DesktopViewStory=()=>{const[isOpen,setIsOpen]=(0,react.useState)(!1);return(0,jsx_runtime.jsx)(NavigationWrapper,{isOpen,onOpenChange:setIsOpen})},MobileWithOpenNavStory=()=>{const[isOpen,setIsOpen]=(0,react.useState)(!0);return(0,jsx_runtime.jsx)(NavigationWrapper,{isOpen,onOpenChange:setIsOpen})},TouchTargetTestStory=()=>{const[isOpen,setIsOpen]=(0,react.useState)(!1);return(0,jsx_runtime.jsx)(NavigationWrapper,{isOpen,onOpenChange:setIsOpen})},Default={render:()=>(0,jsx_runtime.jsx)(DefaultStory,{})},MobileView={render:()=>(0,jsx_runtime.jsx)(MobileViewStory,{}),parameters:{viewport:{defaultViewport:"mobile1"}}},TabletView={render:()=>(0,jsx_runtime.jsx)(TabletViewStory,{}),parameters:{viewport:{defaultViewport:"tablet"}}},DesktopView={render:()=>(0,jsx_runtime.jsx)(DesktopViewStory,{}),parameters:{viewport:{defaultViewport:"desktop"}}},MobileWithOpenNav={render:()=>(0,jsx_runtime.jsx)(MobileWithOpenNavStory,{}),parameters:{viewport:{defaultViewport:"mobile1"}}},TouchTargetTest={render:()=>(0,jsx_runtime.jsx)(TouchTargetTestStory,{}),parameters:{viewport:{defaultViewport:"mobile1"},docs:{description:{story:"Test the touch targets on mobile devices. All interactive elements should be at least 44px in height."}}}},__namedExportsOrder=["Default","MobileView","TabletView","DesktopView","MobileWithOpenNav","TouchTargetTest"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  render: () => <DefaultStory />\n}",...Default.parameters?.docs?.source}}},MobileView.parameters={...MobileView.parameters,docs:{...MobileView.parameters?.docs,source:{originalSource:"{\n  render: () => <MobileViewStory />,\n  parameters: {\n    viewport: {\n      defaultViewport: 'mobile1'\n    }\n  }\n}",...MobileView.parameters?.docs?.source}}},TabletView.parameters={...TabletView.parameters,docs:{...TabletView.parameters?.docs,source:{originalSource:"{\n  render: () => <TabletViewStory />,\n  parameters: {\n    viewport: {\n      defaultViewport: 'tablet'\n    }\n  }\n}",...TabletView.parameters?.docs?.source}}},DesktopView.parameters={...DesktopView.parameters,docs:{...DesktopView.parameters?.docs,source:{originalSource:"{\n  render: () => <DesktopViewStory />,\n  parameters: {\n    viewport: {\n      defaultViewport: 'desktop'\n    }\n  }\n}",...DesktopView.parameters?.docs?.source}}},MobileWithOpenNav.parameters={...MobileWithOpenNav.parameters,docs:{...MobileWithOpenNav.parameters?.docs,source:{originalSource:"{\n  render: () => <MobileWithOpenNavStory />,\n  parameters: {\n    viewport: {\n      defaultViewport: 'mobile1'\n    }\n  }\n}",...MobileWithOpenNav.parameters?.docs?.source}}},TouchTargetTest.parameters={...TouchTargetTest.parameters,docs:{...TouchTargetTest.parameters?.docs,source:{originalSource:"{\n  render: () => <TouchTargetTestStory />,\n  parameters: {\n    viewport: {\n      defaultViewport: 'mobile1'\n    },\n    docs: {\n      description: {\n        story: 'Test the touch targets on mobile devices. All interactive elements should be at least 44px in height.'\n      }\n    }\n  }\n}",...TouchTargetTest.parameters?.docs?.source}}}},"./src/lib/types/user.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var UserRole,Permission;__webpack_require__.d(__webpack_exports__,{aX:()=>Permission,gG:()=>UserRole,mV:()=>ROLE_PERMISSIONS}),function(UserRole){UserRole.USER="USER",UserRole.MERCHANT="MERCHANT",UserRole.ADMIN="ADMIN"}(UserRole||(UserRole={})),function(Permission){Permission.CREATE_PAYMENT="create_payment",Permission.VIEW_PAYMENTS="view_payments",Permission.MANAGE_MERCHANT="manage_merchant",Permission.MANAGE_USERS="manage_users",Permission.VIEW_REPORTS="view_reports",Permission.MANAGE_SETTINGS="manage_settings",Permission.MANAGE_ROLES="manage_roles"}(Permission||(Permission={}));const ROLE_PERMISSIONS={USER:["create_payment","view_payments"],MERCHANT:["create_payment","view_payments","manage_merchant","view_reports"],ADMIN:["create_payment","view_payments","manage_merchant","manage_users","view_reports","manage_settings","manage_roles"]}},"./src/lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$g:()=>formatPrice,M0:()=>formatAddress,Yq:()=>formatDate,cn:()=>cn,ej:()=>formatAmount});var clsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),tailwind_merge__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tailwind-merge/dist/bundle-mjs.mjs");function cn(...inputs){return(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.QP)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.$)(inputs))}const formatPrice=(amount,currency="USD",locale="US")=>Intl.NumberFormat(locale,{style:"currency",currency}).format(amount),formatAddress=address=>address?`${address.substring(0,6)}...${address.substring(address.length-4)}`:"",formatDate=dateString=>{const date=new Date(dateString);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(date)},formatAmount=(amount,decimals=7)=>{const parsed=Number.parseFloat(amount);return isNaN(parsed)?"0".padEnd(decimals+2,"0"):parsed.toFixed(decimals)}},"./src/providers/AuthProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>useAuth});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),axios=__webpack_require__("./node_modules/axios/lib/axios.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");const API_URL="http://localhost:4000";const authService=new class AuthService{async login(credentials){try{return(await axios.A.post(`${API_URL}/auth/login`,credentials)).data}catch(error){throw console.error("Login error:",error),error}}async register(data){try{const formattedData={name:data.name,email:data.email,password:data.password,role:data.role};return(await axios.A.post(`${API_URL}/auth/register`,formattedData)).data}catch(error){throw console.error("Registration error:",error),error}}async refreshToken(refreshToken){try{return(await axios.A.post(`${API_URL}/auth/refresh-token`,{refreshToken})).data}catch(error){throw console.error("Token refresh error:",error),error}}async logout(){try{await axios.A.post(`${API_URL}/auth/logout`)}catch(error){throw console.error("Logout error:",error),error}}};var types_user=__webpack_require__("./src/lib/types/user.ts"),AuthProvider_console=__webpack_require__("./node_modules/console-browserify/index.js");const AuthContext=(0,react.createContext)(void 0),useAuth=()=>{const context=(0,react.useContext)(AuthContext);if(void 0===context)throw new Error("useAuth must be used within an AuthProvider");return context};(({children})=>{const[user,setUser]=(0,react.useState)(null),[token,setToken]=(0,react.useState)(null),[loading,setLoading]=(0,react.useState)(!0);(0,react.useEffect)(()=>{(()=>{try{const storedToken=localStorage.getItem("token"),storedUser=localStorage.getItem("user");if(storedToken&&storedUser)try{const parsedUser=JSON.parse(storedUser);parsedUser&&"object"==typeof parsedUser&&"id"in parsedUser&&"email"in parsedUser&&"name"in parsedUser?(setToken(storedToken),setUser(parsedUser)):(localStorage.removeItem("user"),localStorage.removeItem("token"))}catch(error){AuthProvider_console.error("Error parsing stored user data:",error),localStorage.removeItem("user"),localStorage.removeItem("token")}}catch(error){AuthProvider_console.error("Error accessing localStorage:",error)}finally{setLoading(!1)}})()},[]);return(0,jsx_runtime.jsx)(AuthContext.Provider,{value:{user,token,isAuthenticated:!!token,login:async(email,password)=>{try{const response=await authService.login({email,password});setToken(response.tokens.accessToken),setUser(response.user),localStorage.setItem("token",response.tokens.accessToken),localStorage.setItem("user",JSON.stringify(response.user))}catch(error){throw AuthProvider_console.error("Login failed:",error),error}},register:async(name,email,password,role)=>{try{const response=await authService.register({name,email,password,role});setToken(response.tokens.accessToken),setUser(response.user),localStorage.setItem("token",response.tokens.accessToken),localStorage.setItem("user",JSON.stringify(response.user))}catch(error){throw AuthProvider_console.error("Registration failed:",error),error}},logout:async()=>{try{await authService.logout(),setToken(null),setUser(null),localStorage.removeItem("token"),localStorage.removeItem("user")}catch(error){throw AuthProvider_console.error("Logout failed:",error),error}},loading,isLoading:loading,hasPermission:permission=>{if(!user)return!1;const userPermissions=types_user.mV[user.role];return(null==userPermissions?void 0:userPermissions.includes(permission))||!1}},children})}).__docgenInfo={description:"",methods:[],displayName:"AuthProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}}}]);