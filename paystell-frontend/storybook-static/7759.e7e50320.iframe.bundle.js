/*! For license information please see 7759.e7e50320.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkpaystell_frontend=self.webpackChunkpaystell_frontend||[]).push([[7759],{"./node_modules/@creit.tech/stellar-wallets-kit/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{le:()=>FREIGHTER_ID,Yh:()=>StellarWalletsKit,My:()=>WalletNetwork,Q0:()=>allowAllModules});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");function isFunction_isFunction(value){return"function"==typeof value}function createErrorClass(createImpl){var ctorFunc=createImpl(function(instance){Error.call(instance),instance.stack=(new Error).stack});return ctorFunc.prototype=Object.create(Error.prototype),ctorFunc.prototype.constructor=ctorFunc,ctorFunc}var UnsubscriptionError=createErrorClass(function(_super){return function UnsubscriptionErrorImpl(errors){_super(this),this.message=errors?errors.length+" errors occurred during unsubscription:\n"+errors.map(function(err,i){return i+1+") "+err.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=errors}});function arrRemove(arr,item){if(arr){var index=arr.indexOf(item);0<=index&&arr.splice(index,1)}}var Subscription=function(){function Subscription(initialTeardown){this.initialTeardown=initialTeardown,this.closed=!1,this._parentage=null,this._finalizers=null}return Subscription.prototype.unsubscribe=function(){var e_1,_a,e_2,_b,errors;if(!this.closed){this.closed=!0;var _parentage=this._parentage;if(_parentage)if(this._parentage=null,Array.isArray(_parentage))try{for(var _parentage_1=(0,tslib_es6.Ju)(_parentage),_parentage_1_1=_parentage_1.next();!_parentage_1_1.done;_parentage_1_1=_parentage_1.next()){_parentage_1_1.value.remove(this)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_parentage_1_1&&!_parentage_1_1.done&&(_a=_parentage_1.return)&&_a.call(_parentage_1)}finally{if(e_1)throw e_1.error}}else _parentage.remove(this);var initialFinalizer=this.initialTeardown;if(isFunction_isFunction(initialFinalizer))try{initialFinalizer()}catch(e){errors=e instanceof UnsubscriptionError?e.errors:[e]}var _finalizers=this._finalizers;if(_finalizers){this._finalizers=null;try{for(var _finalizers_1=(0,tslib_es6.Ju)(_finalizers),_finalizers_1_1=_finalizers_1.next();!_finalizers_1_1.done;_finalizers_1_1=_finalizers_1.next()){var finalizer=_finalizers_1_1.value;try{execFinalizer(finalizer)}catch(err){errors=null!=errors?errors:[],err instanceof UnsubscriptionError?errors=(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(errors)),(0,tslib_es6.zs)(err.errors)):errors.push(err)}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_finalizers_1_1&&!_finalizers_1_1.done&&(_b=_finalizers_1.return)&&_b.call(_finalizers_1)}finally{if(e_2)throw e_2.error}}}if(errors)throw new UnsubscriptionError(errors)}},Subscription.prototype.add=function(teardown){var _a;if(teardown&&teardown!==this)if(this.closed)execFinalizer(teardown);else{if(teardown instanceof Subscription){if(teardown.closed||teardown._hasParent(this))return;teardown._addParent(this)}(this._finalizers=null!==(_a=this._finalizers)&&void 0!==_a?_a:[]).push(teardown)}},Subscription.prototype._hasParent=function(parent){var _parentage=this._parentage;return _parentage===parent||Array.isArray(_parentage)&&_parentage.includes(parent)},Subscription.prototype._addParent=function(parent){var _parentage=this._parentage;this._parentage=Array.isArray(_parentage)?(_parentage.push(parent),_parentage):_parentage?[_parentage,parent]:parent},Subscription.prototype._removeParent=function(parent){var _parentage=this._parentage;_parentage===parent?this._parentage=null:Array.isArray(_parentage)&&arrRemove(_parentage,parent)},Subscription.prototype.remove=function(teardown){var _finalizers=this._finalizers;_finalizers&&arrRemove(_finalizers,teardown),teardown instanceof Subscription&&teardown._removeParent(this)},Subscription.EMPTY=function(){var empty=new Subscription;return empty.closed=!0,empty}(),Subscription}(),EMPTY_SUBSCRIPTION=Subscription.EMPTY;function isSubscription(value){return value instanceof Subscription||value&&"closed"in value&&isFunction_isFunction(value.remove)&&isFunction_isFunction(value.add)&&isFunction_isFunction(value.unsubscribe)}function execFinalizer(finalizer){isFunction_isFunction(finalizer)?finalizer():finalizer.unsubscribe()}var config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},timeoutProvider={setTimeout:function(handler,timeout){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];var delegate=timeoutProvider.delegate;return(null==delegate?void 0:delegate.setTimeout)?delegate.setTimeout.apply(delegate,(0,tslib_es6.fX)([handler,timeout],(0,tslib_es6.zs)(args))):setTimeout.apply(void 0,(0,tslib_es6.fX)([handler,timeout],(0,tslib_es6.zs)(args)))},clearTimeout:function(handle){var delegate=timeoutProvider.delegate;return((null==delegate?void 0:delegate.clearTimeout)||clearTimeout)(handle)},delegate:void 0};function reportUnhandledError(err){timeoutProvider.setTimeout(function(){var onUnhandledError=config.onUnhandledError;if(!onUnhandledError)throw err;onUnhandledError(err)})}function noop(){}var COMPLETE_NOTIFICATION=createNotification("C",void 0,void 0);function createNotification(kind,value,error){return{kind,value,error}}var context=null;function errorContext(cb){if(config.useDeprecatedSynchronousErrorHandling){var isRoot=!context;if(isRoot&&(context={errorThrown:!1,error:null}),cb(),isRoot){var _a=context,errorThrown=_a.errorThrown,error=_a.error;if(context=null,errorThrown)throw error}}else cb()}var Subscriber=function(_super){function Subscriber(destination){var _this=_super.call(this)||this;return _this.isStopped=!1,destination?(_this.destination=destination,isSubscription(destination)&&destination.add(_this)):_this.destination=EMPTY_OBSERVER,_this}return(0,tslib_es6.C6)(Subscriber,_super),Subscriber.create=function(next,error,complete){return new SafeSubscriber(next,error,complete)},Subscriber.prototype.next=function(value){this.isStopped?handleStoppedNotification(function nextNotification(value){return createNotification("N",value,void 0)}(value),this):this._next(value)},Subscriber.prototype.error=function(err){this.isStopped?handleStoppedNotification(function errorNotification(error){return createNotification("E",void 0,error)}(err),this):(this.isStopped=!0,this._error(err))},Subscriber.prototype.complete=function(){this.isStopped?handleStoppedNotification(COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_super.prototype.unsubscribe.call(this),this.destination=null)},Subscriber.prototype._next=function(value){this.destination.next(value)},Subscriber.prototype._error=function(err){try{this.destination.error(err)}finally{this.unsubscribe()}},Subscriber.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},Subscriber}(Subscription),_bind=Function.prototype.bind;function bind(fn,thisArg){return _bind.call(fn,thisArg)}var ConsumerObserver=function(){function ConsumerObserver(partialObserver){this.partialObserver=partialObserver}return ConsumerObserver.prototype.next=function(value){var partialObserver=this.partialObserver;if(partialObserver.next)try{partialObserver.next(value)}catch(error){handleUnhandledError(error)}},ConsumerObserver.prototype.error=function(err){var partialObserver=this.partialObserver;if(partialObserver.error)try{partialObserver.error(err)}catch(error){handleUnhandledError(error)}else handleUnhandledError(err)},ConsumerObserver.prototype.complete=function(){var partialObserver=this.partialObserver;if(partialObserver.complete)try{partialObserver.complete()}catch(error){handleUnhandledError(error)}},ConsumerObserver}(),SafeSubscriber=function(_super){function SafeSubscriber(observerOrNext,error,complete){var partialObserver,context_1,_this=_super.call(this)||this;isFunction_isFunction(observerOrNext)||!observerOrNext?partialObserver={next:null!=observerOrNext?observerOrNext:void 0,error:null!=error?error:void 0,complete:null!=complete?complete:void 0}:_this&&config.useDeprecatedNextContext?((context_1=Object.create(observerOrNext)).unsubscribe=function(){return _this.unsubscribe()},partialObserver={next:observerOrNext.next&&bind(observerOrNext.next,context_1),error:observerOrNext.error&&bind(observerOrNext.error,context_1),complete:observerOrNext.complete&&bind(observerOrNext.complete,context_1)}):partialObserver=observerOrNext;return _this.destination=new ConsumerObserver(partialObserver),_this}return(0,tslib_es6.C6)(SafeSubscriber,_super),SafeSubscriber}(Subscriber);function handleUnhandledError(error){config.useDeprecatedSynchronousErrorHandling?function captureError(err){config.useDeprecatedSynchronousErrorHandling&&context&&(context.errorThrown=!0,context.error=err)}(error):reportUnhandledError(error)}function handleStoppedNotification(notification,subscriber){var onStoppedNotification=config.onStoppedNotification;onStoppedNotification&&timeoutProvider.setTimeout(function(){return onStoppedNotification(notification,subscriber)})}var EMPTY_OBSERVER={closed:!0,next:noop,error:function defaultErrorHandler(err){throw err},complete:noop},observable="function"==typeof Symbol&&Symbol.observable||"@@observable";function identity(x){return x}function pipeFromArray(fns){return 0===fns.length?identity:1===fns.length?fns[0]:function piped(input){return fns.reduce(function(prev,fn){return fn(prev)},input)}}var Observable_Observable=function(){function Observable(subscribe){subscribe&&(this._subscribe=subscribe)}return Observable.prototype.lift=function(operator){var observable=new Observable;return observable.source=this,observable.operator=operator,observable},Observable.prototype.subscribe=function(observerOrNext,error,complete){var _this=this,subscriber=function isSubscriber(value){return value&&value instanceof Subscriber||function isObserver(value){return value&&isFunction_isFunction(value.next)&&isFunction_isFunction(value.error)&&isFunction_isFunction(value.complete)}(value)&&isSubscription(value)}(observerOrNext)?observerOrNext:new SafeSubscriber(observerOrNext,error,complete);return errorContext(function(){var _a=_this,operator=_a.operator,source=_a.source;subscriber.add(operator?operator.call(subscriber,source):source?_this._subscribe(subscriber):_this._trySubscribe(subscriber))}),subscriber},Observable.prototype._trySubscribe=function(sink){try{return this._subscribe(sink)}catch(err){sink.error(err)}},Observable.prototype.forEach=function(next,promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))(function(resolve,reject){var subscriber=new SafeSubscriber({next:function(value){try{next(value)}catch(err){reject(err),subscriber.unsubscribe()}},error:reject,complete:resolve});_this.subscribe(subscriber)})},Observable.prototype._subscribe=function(subscriber){var _a;return null===(_a=this.source)||void 0===_a?void 0:_a.subscribe(subscriber)},Observable.prototype[observable]=function(){return this},Observable.prototype.pipe=function(){for(var operations=[],_i=0;_i<arguments.length;_i++)operations[_i]=arguments[_i];return pipeFromArray(operations)(this)},Observable.prototype.toPromise=function(promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))(function(resolve,reject){var value;_this.subscribe(function(x){return value=x},function(err){return reject(err)},function(){return resolve(value)})})},Observable.create=function(subscribe){return new Observable(subscribe)},Observable}();function getPromiseCtor(promiseCtor){var _a;return null!==(_a=null!=promiseCtor?promiseCtor:config.Promise)&&void 0!==_a?_a:Promise}var ObjectUnsubscribedError=createErrorClass(function(_super){return function ObjectUnsubscribedErrorImpl(){_super(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject=function(_super){function Subject(){var _this=_super.call(this)||this;return _this.closed=!1,_this.currentObservers=null,_this.observers=[],_this.isStopped=!1,_this.hasError=!1,_this.thrownError=null,_this}return(0,tslib_es6.C6)(Subject,_super),Subject.prototype.lift=function(operator){var subject=new AnonymousSubject(this,this);return subject.operator=operator,subject},Subject.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError},Subject.prototype.next=function(value){var _this=this;errorContext(function(){var e_1,_a;if(_this._throwIfClosed(),!_this.isStopped){_this.currentObservers||(_this.currentObservers=Array.from(_this.observers));try{for(var _b=(0,tslib_es6.Ju)(_this.currentObservers),_c=_b.next();!_c.done;_c=_b.next()){_c.value.next(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}})},Subject.prototype.error=function(err){var _this=this;errorContext(function(){if(_this._throwIfClosed(),!_this.isStopped){_this.hasError=_this.isStopped=!0,_this.thrownError=err;for(var observers=_this.observers;observers.length;)observers.shift().error(err)}})},Subject.prototype.complete=function(){var _this=this;errorContext(function(){if(_this._throwIfClosed(),!_this.isStopped){_this.isStopped=!0;for(var observers=_this.observers;observers.length;)observers.shift().complete()}})},Subject.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(Subject.prototype,"observed",{get:function(){var _a;return(null===(_a=this.observers)||void 0===_a?void 0:_a.length)>0},enumerable:!1,configurable:!0}),Subject.prototype._trySubscribe=function(subscriber){return this._throwIfClosed(),_super.prototype._trySubscribe.call(this,subscriber)},Subject.prototype._subscribe=function(subscriber){return this._throwIfClosed(),this._checkFinalizedStatuses(subscriber),this._innerSubscribe(subscriber)},Subject.prototype._innerSubscribe=function(subscriber){var _this=this,hasError=this.hasError,isStopped=this.isStopped,observers=this.observers;return hasError||isStopped?EMPTY_SUBSCRIPTION:(this.currentObservers=null,observers.push(subscriber),new Subscription(function(){_this.currentObservers=null,arrRemove(observers,subscriber)}))},Subject.prototype._checkFinalizedStatuses=function(subscriber){var hasError=this.hasError,thrownError=this.thrownError,isStopped=this.isStopped;hasError?subscriber.error(thrownError):isStopped&&subscriber.complete()},Subject.prototype.asObservable=function(){var observable=new Observable_Observable;return observable.source=this,observable},Subject.create=function(destination,source){return new AnonymousSubject(destination,source)},Subject}(Observable_Observable),AnonymousSubject=function(_super){function AnonymousSubject(destination,source){var _this=_super.call(this)||this;return _this.destination=destination,_this.source=source,_this}return(0,tslib_es6.C6)(AnonymousSubject,_super),AnonymousSubject.prototype.next=function(value){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.next)||void 0===_b||_b.call(_a,value)},AnonymousSubject.prototype.error=function(err){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.error)||void 0===_b||_b.call(_a,err)},AnonymousSubject.prototype.complete=function(){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.complete)||void 0===_b||_b.call(_a)},AnonymousSubject.prototype._subscribe=function(subscriber){var _a,_b;return null!==(_b=null===(_a=this.source)||void 0===_a?void 0:_a.subscribe(subscriber))&&void 0!==_b?_b:EMPTY_SUBSCRIPTION},AnonymousSubject}(Subject),BehaviorSubject=function(_super){function BehaviorSubject(_value){var _this=_super.call(this)||this;return _this._value=_value,_this}return(0,tslib_es6.C6)(BehaviorSubject,_super),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);return!subscription.closed&&subscriber.next(this._value),subscription},BehaviorSubject.prototype.getValue=function(){var hasError=this.hasError,thrownError=this.thrownError,_value=this._value;if(hasError)throw thrownError;return this._throwIfClosed(),_value},BehaviorSubject.prototype.next=function(value){_super.prototype.next.call(this,this._value=value)},BehaviorSubject}(Subject);function operate(init){return function(source){if(function hasLift(source){return isFunction_isFunction(null==source?void 0:source.lift)}(source))return source.lift(function(liftedSource){try{return init(liftedSource,this)}catch(err){this.error(err)}});throw new TypeError("Unable to lift unknown Observable type")}}function createOperatorSubscriber(destination,onNext,onComplete,onError,onFinalize){return new OperatorSubscriber(destination,onNext,onComplete,onError,onFinalize)}var OperatorSubscriber=function(_super){function OperatorSubscriber(destination,onNext,onComplete,onError,onFinalize,shouldUnsubscribe){var _this=_super.call(this,destination)||this;return _this.onFinalize=onFinalize,_this.shouldUnsubscribe=shouldUnsubscribe,_this._next=onNext?function(value){try{onNext(value)}catch(err){destination.error(err)}}:_super.prototype._next,_this._error=onError?function(err){try{onError(err)}catch(err){destination.error(err)}finally{this.unsubscribe()}}:_super.prototype._error,_this._complete=onComplete?function(){try{onComplete()}catch(err){destination.error(err)}finally{this.unsubscribe()}}:_super.prototype._complete,_this}return(0,tslib_es6.C6)(OperatorSubscriber,_super),OperatorSubscriber.prototype.unsubscribe=function(){var _a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var closed_1=this.closed;_super.prototype.unsubscribe.call(this),!closed_1&&(null===(_a=this.onFinalize)||void 0===_a||_a.call(this))}},OperatorSubscriber}(Subscriber);var EMPTY=new Observable_Observable(function(subscriber){return subscriber.complete()});function take(count){return count<=0?function(){return EMPTY}:operate(function(source,subscriber){var seen=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){++seen<=count&&(subscriber.next(value),count<=seen&&subscriber.complete())}))})}function defaultCompare(a,b){return a===b}const batchInProgress=new BehaviorSubject(!1),batchDone$=batchInProgress.asObservable().pipe(function filter_filter(predicate,thisArg){return operate(function(source,subscriber){var index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){return predicate.call(thisArg,value,index++)&&subscriber.next(value)}))})}(inProgress=>!inProgress),take(1));const elfHooksRegistry={};new class ElfHooks{registerPreStoreUpdate(fn){elfHooksRegistry.preStoreUpdate=fn}registerPreStateInit(fn){elfHooksRegistry.preStateInit=fn}};const registry=new Map,registryActions=new Subject;registryActions.asObservable();let events=[];function emitEvents(source){events.length&&events.forEach(e=>source.next(e)),events=[]}class Store extends BehaviorSubject{constructor(storeDef){super(storeDef.state),this.storeDef=storeDef,this.initialState=void 0,this.state=void 0,this.batchInProgress=!1,this.events=new Subject,this.context={config:this.getConfig(),setEvent:action=>{!function _setEvent(e){events.push(e)}(action)}},this.events$=this.events.asObservable(),this.state=this.getInitialState(storeDef.state),this.initialState=this.getValue(),function addStore(store){registry.set(store.name,store),registryActions.next({type:"add",store})}(this)}get name(){return this.storeDef.name}getInitialState(state){return elfHooksRegistry.preStateInit?elfHooksRegistry.preStateInit(state,this.name):state}getConfig(){return this.storeDef.config}query(selector){return selector(this.getValue())}update(...reducers){const currentState=this.getValue();let nextState=reducers.reduce((value,reducer)=>value=reducer(value,this.context),currentState);elfHooksRegistry.preStoreUpdate&&(nextState=elfHooksRegistry.preStoreUpdate(currentState,nextState,this.name)),nextState!==currentState&&(this.state=nextState,batchInProgress.getValue()?this.batchInProgress||(this.batchInProgress=!0,batchDone$.subscribe(()=>{super.next(this.state),emitEvents(this.events),this.batchInProgress=!1})):(super.next(this.state),emitEvents(this.events)))}getValue(){return this.state}reset(){this.update(()=>this.initialState)}combine(observables){let hasChange=!0;const buffer={};return new Observable_Observable(observer=>{for(const[key,query]of Object.entries(observables))observer.add(query.subscribe(value=>{buffer[key]=value,hasChange=!0}));return this.subscribe({next(){hasChange&&(observer.next({...buffer}),hasChange=!1)},error(e){observer.error(e)},complete(){observer.complete()}})})}destroy(){!function removeStore(store){registry.delete(store.name),registryActions.next({type:"remove",store})}(this),this.reset()}next(value){this.update(()=>value)}error(){}complete(){}}function index_esm_isFunction(value){return"function"==typeof value}function index_esm_setProp(key,value){return function(state){return{...state,[key]:index_esm_isFunction(value)?value(state[key]):value}}}function index_esm_select(mapFn){return function pipe(){for(var fns=[],_i=0;_i<arguments.length;_i++)fns[_i]=arguments[_i];return pipeFromArray(fns)}(function map_map(project,thisArg){return operate(function(source,subscriber){var index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){subscriber.next(project.call(thisArg,value,index++))}))})}(mapFn),function distinctUntilChanged_distinctUntilChanged(comparator,keySelector){return void 0===keySelector&&(keySelector=identity),comparator=null!=comparator?comparator:defaultCompare,operate(function(source,subscriber){var previousKey,first=!0;source.subscribe(createOperatorSubscriber(subscriber,function(value){var currentKey=keySelector(value);!first&&comparator(previousKey,currentKey)||(first=!1,previousKey=currentKey,subscriber.next(value))}))})}())}var WalletNetwork=(WalletNetwork2=>(WalletNetwork2.PUBLIC="Public Global Stellar Network ; September 2015",WalletNetwork2.TESTNET="Test SDF Network ; September 2015",WalletNetwork2.FUTURENET="Test SDF Future Network ; October 2022",WalletNetwork2.SANDBOX="Local Sandbox Stellar Network ; September 2022",WalletNetwork2.STANDALONE="Standalone Network ; February 2017",WalletNetwork2))(WalletNetwork||{}),ModuleType=(ModuleType2=>(ModuleType2.HW_WALLET="HW_WALLET",ModuleType2.HOT_WALLET="HOT_WALLET",ModuleType2.BRIDGE_WALLET="BRIDGE_WALLET",ModuleType2.AIR_GAPED_WALLET="AIR_GAPED_WALLET",ModuleType2))(ModuleType||{});const store=function createStore(storeConfig,...propsFactories){const{state,config}=function createState(...propsFactories){const result={config:{},state:{}};for(const{config,props}of propsFactories)Object.assign(result.config,config),Object.assign(result.state,props);return result}(...propsFactories),{name}=storeConfig;return new Store({name,state,config})}({name:"state"},function withProps(props){return{props,config:void 0}}({allowedWallets:[],hardwareWalletPaths:[]})),allowedWallets$=store.pipe(index_esm_select(state=>state.allowedWallets)),modalTheme$=(store.pipe(index_esm_select(state=>state.selectedNetwork)),store.pipe(index_esm_select(state=>state.modalTheme))),buttonTheme$=store.pipe(index_esm_select(state=>state.buttonTheme)),activeAddress$=store.pipe(index_esm_select(state=>state.activeAddress)),horizonUrl$=store.pipe(index_esm_select(state=>state.horizonUrl));store.pipe(index_esm_select(state=>state.mnemonicPath)),store.pipe(index_esm_select(state=>state.hardwareWalletPaths));function setSelectedModuleId(moduleId){store.update(index_esm_setProp("selectedModuleId",moduleId))}function setAllowedWallets(data){store.update(index_esm_setProp("allowedWallets",data))}function removeAddress(){store.update(index_esm_setProp("activeAddress",void 0))}class StellarWalletsKit{get selectedModule(){const{selectedModuleId}=store.getValue();if(!selectedModuleId)throw{code:-3,message:"Please set the wallet first"};const target=this.modules.find(mod=>mod.productId===selectedModuleId);if(!target)throw{code:-3,message:"Please set the wallet first"};return target}constructor(params){this.modules=params.modules,params.selectedWalletId&&this.setWallet(params.selectedWalletId),function setNetwork(network){if(!Object.values(WalletNetwork).includes(network))throw new Error(`Wallet network "${network}" is not supported`);store.update(index_esm_setProp("selectedNetwork",network))}(params.network);const modalTheme=params.theme||params.modalTheme;modalTheme&&function setModalTheme(theme){store.update(index_esm_setProp("modalTheme",theme))}(modalTheme),params.buttonTheme&&function seButtonTheme(theme){store.update(index_esm_setProp("buttonTheme",theme))}(params.buttonTheme),this.getSupportedWallets().then(value=>{setAllowedWallets(value)})}async getSupportedWallets(){return Promise.all(this.modules.map(async mod=>{const timer=new Promise(r=>setTimeout(()=>r(!1),500));return{id:mod.productId,name:mod.productName,type:mod.moduleType,icon:mod.productIcon,isAvailable:await Promise.race([timer,mod.isAvailable()]),isPlatformWrapper:await Promise.race([timer,mod.isPlatformWrapper?mod.isPlatformWrapper():Promise.resolve(!1)]),url:mod.productUrl}}))}setWallet(id){const target=this.modules.find(mod=>mod.productId===id);if(!target)throw new Error(`Wallet id "${id}" is not supported`);setSelectedModuleId(target.productId)}async getAddress(params){const{address}=await this.selectedModule.getAddress(params);return function setAddress(address){store.update(index_esm_setProp("activeAddress",address))}(address),{address}}async signTransaction(xdr,opts){return this.selectedModule.signTransaction(xdr,{...opts,networkPassphrase:opts?.networkPassphrase||store.getValue().selectedNetwork})}async signAuthEntry(authEntry,opts){return this.selectedModule.signAuthEntry(authEntry,{...opts,networkPassphrase:opts?.networkPassphrase||store.getValue().selectedNetwork})}async signMessage(message,opts){return this.selectedModule.signMessage(message,{...opts,networkPassphrase:opts?.networkPassphrase||store.getValue().selectedNetwork})}async getNetwork(){return this.selectedModule.getNetwork()}async disconnect(){removeAddress()}isButtonCreated(){return!!this.buttonElement}assignButtons(params){const connectEl="string"==typeof params.connectEl?document.querySelector(params.connectEl):params.connectEl;if(!connectEl)throw new Error("connectEl is not available");if(connectEl.addEventListener("click",()=>{this.openModal({onWalletSelected:option=>{setSelectedModuleId(option.id),this.getAddress().then(r=>params.onConnect(r))}}).then()},!1),!params.disconnectEl)return;const disconnectEl="string"==typeof params.disconnectEl?document.querySelector(params.disconnectEl):params.disconnectEl;if(!disconnectEl)throw new Error("disconnectEl is not available");disconnectEl.addEventListener("click",()=>{params.onDisconnect(),removeAddress(),this.selectedModule.disconnect&&this.selectedModule.disconnect().then()},!1)}async createButton(params){if(this.buttonElement)throw new Error("Stellar Wallets Kit button is already created");this.buttonElement=document.createElement("stellar-wallets-button"),params.buttonText&&this.buttonElement.setAttribute("buttonText",params.buttonText),params.horizonUrl&&function setHorizonUrl(url){store.update(index_esm_setProp("horizonUrl",url))}(params.horizonUrl),params.container.appendChild(this.buttonElement),this.buttonElement.addEventListener("button-clicked",()=>{this.openModal({onWalletSelected:option=>{setSelectedModuleId(option.id),this.getAddress().then(r=>params.onConnect(r)).catch(err=>{params.onError&&params.onError(err)})},onClosed:err=>{params.onClosed&&params.onClosed(err)}})},!1),this.buttonElement.addEventListener("disconnect-wallet",()=>{params.onDisconnect(),this.selectedModule.disconnect&&this.selectedModule.disconnect()},!1)}async removeButton(params){if(!this.buttonElement)throw new Error("Stellar Wallets Kit button hasn't been created yet");!0!==params?.skipDisconnect&&this.buttonElement.disconnect(),this.buttonElement.remove(),delete this.buttonElement}async openModal(params){if(this.modalElement&&!this.buttonElement)throw new Error("Stellar Wallets Kit modal is already open");this.modalElement=document.createElement("stellar-wallets-modal");setAllowedWallets(await this.getSupportedWallets()),this.modalElement.setAttribute("showModal",""),params.modalTitle&&this.modalElement.setAttribute("modalTitle",params.modalTitle),params.notAvailableText&&this.modalElement.setAttribute("notAvailableText",params.notAvailableText),document.body.appendChild(this.modalElement);const listener=event=>{params.onWalletSelected(event.detail),this.modalElement.removeEventListener("wallet-selected",listener,!1),document.body.removeChild(this.modalElement),this.modalElement=void 0};this.modalElement.addEventListener("wallet-selected",listener,!1);const errorListener=event=>{params.onClosed&&params.onClosed(event.detail),this.modalElement.removeEventListener("wallet-selected",listener,!1),this.modalElement.removeEventListener("modal-closed",errorListener,!1),document.body.removeChild(this.modalElement),this.modalElement=void 0};this.modalElement.addEventListener("modal-closed",errorListener,!1)}}const t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[o+1],t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const e of o){const o=document.createElement("style"),n=t.litNonce;void 0!==n&&o.setAttribute("nonce",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const s of t.cssRules)e+=s.cssText;return(t=>new n("string"==typeof t?t:t+"",void 0,s))(e)})(t):t,{is:reactive_element_i,defineProperty:reactive_element_e,getOwnPropertyDescriptor:h,getOwnPropertyNames:reactive_element_r,getOwnPropertySymbols:reactive_element_o,getPrototypeOf:reactive_element_n}=Object,a=globalThis,reactive_element_c=a.trustedTypes,l=reactive_element_c?reactive_element_c.emptyScript:"",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!reactive_element_i(t,s),b={attribute:!0,type:String,converter:u,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol("metadata"),a.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=b){if(s.state&&(s.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((s=Object.create(s)).wrapped=!0),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),h=this.getPropertyDescriptor(t,i,s);void 0!==h&&reactive_element_e(this.prototype,t,h)}}static getPropertyDescriptor(t,s,i){const{get:e,set:r}=h(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get:e,set(s){const h=e?.call(this);r?.call(this,s),this.requestUpdate(t,h,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b}static _$Ei(){if(this.hasOwnProperty(d("elementProperties")))return;const t=reactive_element_n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d("properties"))){const t=this.properties,s=[...reactive_element_r(t),...reactive_element_o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(c(s))}else void 0!==s&&i.push(c(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return S(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$ET(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const h=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==h?this.removeAttribute(e):this.setAttribute(e,h),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),h="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e;const r=h.fromAttribute(s,t.type);this[e]=r??this._$Ej?.get(e)??r,this._$Em=null}}requestUpdate(t,s,i){if(void 0!==t){const e=this.constructor,h=this[t];if(i??=e.getPropertyOptions(t),!((i.hasChanged??f)(h,s)||i.useDefault&&i.reflect&&h===this._$Ej?.get(t)&&!this.hasAttribute(e._$Eu(t,i))))return;this.C(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,s,{useDefault:i,reflect:e,wrapped:h},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??s??this[t]),!0!==h||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(s=void 0),this._$AL.set(t,s)),!0===e&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t){const{wrapped:t}=i,e=this[s];!0!==t||this._$AL.has(s)||void 0===e||this.C(s,void 0,i,e)}}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(s)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}y.elementStyles=[],y.shadowRootOptions={mode:"open"},y[d("elementProperties")]=new Map,y[d("finalized")]=new Map,p?.({ReactiveElement:y}),(a.reactiveElementVersions??=[]).push("2.1.1");const lit_html_t=globalThis,lit_html_i=lit_html_t.trustedTypes,lit_html_s=lit_html_i?lit_html_i.createPolicy("lit-html",{createHTML:t=>t}):void 0,lit_html_h=`lit$${Math.random().toFixed(9).slice(2)}$`,lit_html_o="?"+lit_html_h,lit_html_n=`<${lit_html_o}>`,lit_html_r=document,lit_html_l=()=>lit_html_r.createComment(""),lit_html_c=t=>null===t||"object"!=typeof t&&"function"!=typeof t,lit_html_a=Array.isArray,lit_html_u=t=>lit_html_a(t)||"function"==typeof t?.[Symbol.iterator],lit_html_f=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v=/-->/g,_=/>/g,m=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),lit_html_p=/'/g,g=/"/g,$=/^(?:script|style|textarea|title)$/i,lit_html_y=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=lit_html_y(1),T=(lit_html_y(2),lit_html_y(3),Symbol.for("lit-noChange")),E=Symbol.for("lit-nothing"),A=new WeakMap,C=lit_html_r.createTreeWalker(lit_html_r,129);function P(t,i){if(!lit_html_a(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==lit_html_s?lit_html_s.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,o=[];let r,l=2===i?"<svg>":3===i?"<math>":"",c=lit_html_f;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,y=0;for(;y<s.length&&(c.lastIndex=y,u=c.exec(s),null!==u);)y=c.lastIndex,c===lit_html_f?"!--"===u[1]?c=v:void 0!==u[1]?c=_:void 0!==u[2]?($.test(u[2])&&(r=RegExp("</"+u[2],"g")),c=m):void 0!==u[3]&&(c=m):c===m?">"===u[0]?(c=r??lit_html_f,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?m:'"'===u[3]?g:lit_html_p):c===g||c===lit_html_p?c=m:c===v||c===_?c=lit_html_f:(c=m,r=void 0);const x=c===m&&t[i+1].startsWith("/>")?" ":"";l+=c===lit_html_f?s+lit_html_n:d>=0?(o.push(a),s.slice(0,d)+"$lit$"+s.slice(d)+lit_html_h+x):s+lit_html_h+(-2===d?i:x)}return[P(t,l+(t[s]||"<?>")+(2===i?"</svg>":3===i?"</math>":"")),o]};class N{constructor({strings:t,_$litType$:s},n){let r;this.parts=[];let c=0,a=0;const u=t.length-1,d=this.parts,[f,v]=V(t,s);if(this.el=N.createElement(f,n),C.currentNode=this.el.content,2===s||3===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=C.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith("$lit$")){const i=v[a++],s=r.getAttribute(t).split(lit_html_h),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:c,name:e[2],strings:s,ctor:"."===e[1]?H:"?"===e[1]?I:"@"===e[1]?L:k}),r.removeAttribute(t)}else t.startsWith(lit_html_h)&&(d.push({type:6,index:c}),r.removeAttribute(t));if($.test(r.tagName)){const t=r.textContent.split(lit_html_h),s=t.length-1;if(s>0){r.textContent=lit_html_i?lit_html_i.emptyScript:"";for(let i=0;i<s;i++)r.append(t[i],lit_html_l()),C.nextNode(),d.push({type:2,index:++c});r.append(t[s],lit_html_l())}}}else if(8===r.nodeType)if(r.data===lit_html_o)d.push({type:2,index:c});else{let t=-1;for(;-1!==(t=r.data.indexOf(lit_html_h,t+1));)d.push({type:7,index:c}),t+=lit_html_h.length-1}c++}}static createElement(t,i){const s=lit_html_r.createElement("template");return s.innerHTML=t,s}}function lit_html_S(t,i,s=t,e){if(i===T)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=lit_html_c(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=lit_html_S(t,h._$AS(t,i.values),h,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??lit_html_r).importNode(i,!0);C.currentNode=e;let h=C.nextNode(),o=0,n=0,l=s[0];for(;void 0!==l;){if(o===l.index){let i;2===l.type?i=new R(h,h.nextSibling,this,t):1===l.type?i=new l.ctor(h,l.name,l.strings,this,t):6===l.type&&(i=new z(h,this,t)),this._$AV.push(i),l=s[++n]}o!==l?.index&&(h=C.nextNode(),o++)}return C.currentNode=lit_html_r,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=lit_html_S(this,t,i),lit_html_c(t)?t===E||null==t||""===t?(this._$AH!==E&&this._$AR(),this._$AH=E):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):lit_html_u(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==E&&lit_html_c(this._$AH)?this._$AA.nextSibling.data=t:this.T(lit_html_r.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=N.createElement(P(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new M(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=A.get(t.strings);return void 0===i&&A.set(t.strings,i=new N(t)),i}k(t){lit_html_a(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new R(this.O(lit_html_l()),this.O(lit_html_l()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=E,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=E}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=lit_html_S(this,t,i,0),o=!lit_html_c(t)||t!==this._$AH&&t!==T,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=lit_html_S(this,e[s+n],i,n),r===T&&(r=this._$AH[n]),o||=!lit_html_c(r)||r!==this._$AH[n],r===E?t=E:t!==E&&(t+=(r??"")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===E?void 0:t}}class I extends k{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==E)}}class L extends k{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=lit_html_S(this,t,i,0)??E)===T)return;const s=this._$AH,e=t===E&&s!==E||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==E&&(s===E||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){lit_html_S(this,t)}}const j=lit_html_t.litHtmlPolyfillSupport;j?.(N,R),(lit_html_t.litHtmlVersions??=[]).push("3.3.1");const lit_element_s=globalThis;class lit_element_i extends y{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new R(i.insertBefore(lit_html_l(),t),t,void 0,s??{})}return h._$AI(t),h})(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return T}}lit_element_i._$litElement$=!0,lit_element_i.finalized=!0,lit_element_s.litElementHydrateSupport?.({LitElement:lit_element_i});const lit_element_o=lit_element_s.litElementPolyfillSupport;lit_element_o?.({LitElement:lit_element_i});(lit_element_s.litElementVersions??=[]).push("4.2.1");const directive_t_ATTRIBUTE=1;class directive_i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}const style_map_o=(t=>(...e)=>({_$litDirective$:t,values:e}))(class extends directive_i{constructor(t){if(super(t),t.type!==directive_t_ATTRIBUTE||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,r)=>{const s=t[r];return null==s?e:e+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`},"")}update(e,[r]){const{style:s}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(r)),this.render(r);for(const t of this.ft)null==r[t]&&(this.ft.delete(t),t.includes("-")?s.removeProperty(t):s[t]=null);for(const t in r){const e=r[t];if(null!=e){this.ft.add(t);const r="string"==typeof e&&e.endsWith(" !important");t.includes("-")||r?s.setProperty(t,r?e.slice(0,-11):e,r?"important":""):s[t]=e}}return T}}),custom_element_t=t=>(e,o)=>{void 0!==o?o.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)},property_o={attribute:!0,type:String,converter:u,reflect:!1,hasChanged:f},property_r=(t=property_o,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(void 0===s&&globalThis.litPropertyMetadata.set(i,s=new Map),"setter"===n&&((t=Object.create(t)).wrapped=!0),s.set(r.name,t),"accessor"===n){const{name:o}=r;return{set(r){const n=e.get.call(this);e.set.call(this,r),this.requestUpdate(o,n,t)},init(e){return void 0!==e&&this.C(o,void 0,t,e),e}}}if("setter"===n){const{name:o}=r;return function(r){const n=this[o];e.call(this,r),this.requestUpdate(o,n,t)}}throw Error("Unsupported decorator location: "+n)};function property_n(t){return(e,o)=>"object"==typeof o?property_r(t,e,o):((t,e,o)=>{const r=e.hasOwnProperty(o);return e.constructor.createProperty(o,t),r?Object.getOwnPropertyDescriptor(e,o):void 0})(t,e,o)}function state_r(r){return property_n({...r,state:!0,attribute:!1})}class ReactiveState{constructor(host,source,value){this.host=host,this.source=source,this.value=value,this.sub=null,this.value$=new BehaviorSubject(void 0),this.host.addController(this)}hostConnected(){this.sub=this.source.subscribe(value=>{this.value=value,this.value$.next(value),this.host.requestUpdate()})}hostDisconnected(){this.sub?.unsubscribe()}}const modalDialogStyles=i`
  .dialog-modal {
    max-height: 90vh;
    position: fixed;
    z-index: 990;
    font-family: 'Open Sans', arial, sans-serif;
    margin: 0 auto;
    padding: 0;
    width: 100%;
    border-radius: 1rem 1rem 0 0;
    border-width: 0;
    box-shadow: 0 0.125rem 0.75rem rgba(0, 0, 0, 0.25);
    bottom: 0;
    overflow-x: hidden;
    overflow-y: scroll;
  }

  @media screen and (min-width: 768px) {
    .dialog-modal {
      z-index: 990;
      bottom: auto;
      top: 5rem;
      max-width: 45rem;
      border-radius: 1rem;
    }
  }
`,modalDialogBodyStyles=i`
  .dialog-modal-body {
    display: flex;
    flex-direction: column-reverse;
  }

  .dialog-modal-body__help,
  .dialog-modal-body__wallets {
    width: 100%;
    flex-basis: 100%;
  }

  .dialog-modal-body__help {
    padding: 1.5rem;
  }

  .dialog-modal-body__wallets {
    padding: 1.5rem;
  }

  .dialog-text-solid {
    font-size: 1rem;
    line-height: 1.25rem;
  }

  .dialog-text {
    font-size: 0.875rem;
    line-height: 1.125rem;
  }

  @media (prefers-color-scheme: light) {
    .dialog-modal-body__help {
      background-color: var(--modal-help-bg-color, #f8f8f8);
      border-top: 1px solid var(--modal-divider-color, rgba(0, 0, 0, 0.15));
    }

    @media screen and (min-width: 768px) {
      .dialog-modal-body__help {
        border-top: none;
        border-right: 1px solid var(--modal-divider-color, rgba(0, 0, 0, 0.15));
      }
    }

    .dialog-modal-body__wallets,
    .dialog-modal-body {
      background-color: var(--modal-bg-color, #fcfcfc);
    }

    .dialog-text-solid {
      color: var(--modal-solid-text-color, #000000);
    }

    .dialog-text {
      color: var(--modal-text-color, #181818);
    }
  }

  @media (prefers-color-scheme: dark) {
    .dialog-modal-body__help {
      background-color: var(--modal-help-bg-color, #1c1c1c);
      border-top: 1px solid var(--modal-divider-color, rgba(255, 255, 255, 0.15));
    }

    @media screen and (min-width: 768px) {
      .dialog-modal-body__help {
        border-top: none;
        border-right: 1px solid var(--modal-divider-color, rgba(255, 255, 255, 0.15));
      }
    }

    .dialog-modal-body__wallets,
    .dialog-modal-body {
      background-color: var(--modal-bg-color, #161616);
    }

    .dialog-text-solid {
      color: var(--modal-solid-text-color, #ededed);
    }

    .dialog-text {
      color: var(--modal-text-color, #a0a0a0);
    }
  }

  @media screen and (min-width: 768px) {
    .dialog-modal-body {
      flex-direction: row;
    }

    .dialog-modal-body__help,
    .dialog-modal-body__wallets {
      padding: 2rem;
    }
  }
`,modalHelpSection=i`
  .help-container {
    width: 100%;
  }

  .help-header {
    display: none;
    margin: 0 0 2rem 0;
  }

  .help-header__modal-title {
    font-size: 1.25rem;
    padding: 0;
    margin: 0;
  }

  .help__title,
  .help__text {
    text-align: center;
  }

  .help__title {
    font-weight: 400;
    margin-top: 0;
    margin-bottom: 0.5rem;
  }

  .help__text {
    max-width: 21rem;
    margin-left: auto;
    margin-right: auto;
    font-weight: 300;
    margin-top: 0;
  }

  .help__whats_stellar {
    display: none;
  }

  @media screen and (min-width: 768px) {
    .help-header {
      display: block;
    }

    .help__title,
    .help__text {
      text-align: left;
      margin-left: 0;
    }

    .help__whats_a_wallet {
      margin-bottom: 2rem;
    }

    .help__whats_stellar {
      display: block;
    }
  }
`,modalWalletsSection=i`
  .wallets-container {
    width: 100%;
    height: 100%;
    min-height: fit-content;
    display: flex;
    flex-direction: column;
  }

  .wallets-header {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
  }

  .wallets-header__modal-title {
    font-size: 1.25rem;
    padding: 0;
    margin: 0;
  }

  .wallets-header__button {
    background: none;
    border: none;
    cursor: pointer;
  }

  @media (prefers-color-scheme: light) {
    .wallets-header__button svg {
      fill: var(--modal-header-button-color, #8f8f8f);
    }
  }

  @media (prefers-color-scheme: dark) {
    .wallets-header__button svg {
      fill: var(--modal-header-button-color, #707070);
    }
  }

  .wallets-body {
    margin: 0;
    width: 100%;
    list-style: none;
    padding: 0 !important;
  }

  .wallets-body__item {
    display: flex;
    align-items: center;
    font-weight: 600;
    margin-bottom: 2rem;
    cursor: pointer;
  }

  .wallets-body__item img {
    margin-right: 1rem;
    width: 2rem;
    border-radius: 100%;
    overflow: hidden;
  }

  .wallets-body__item.not-available {
    cursor: alias;
  }

  .wallets-body__item .not-available {
    margin-left: auto;
    font-size: 10px;
    padding: 0.25rem 0.5rem;
    border-radius: 1rem;
  }

  @media (prefers-color-scheme: light) {
    .wallets-body__item .not-available {
      border: solid var(--modal-not-available-border-color, #e2e2e2) 1px;
      background-color: var(--modal-not-available-bg-color, #f3f3f3);
      color: var(--modal-not-available-text-color, #6f6f6f);
    }
  }

  @media (prefers-color-scheme: dark) {
    .wallets-body__item .not-available {
      border: solid var(--modal-not-available-border-color, #343434) 1px;
      background-color: var(--modal-not-available-bg-color, #232323);
      color: var(--modal-not-available-text-color, #a0a0a0);
    }
  }

  @media screen and (min-width: 768px) {
  }
`,backdropStyles=i`
  .dialog-modal[open] + .backdrop {
    background: rgba(0, 0, 0, 0.5);
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
`,modalAnimations=i`
  .dialog-modal[open] {
    -webkit-animation: showModal 0.3s ease normal;
  }
  @-webkit-keyframes showModal {
    from {
      transform: translateY(25%);
      opacity: 0;
    }
    to {
      transform: translateY(0%);
      opacity: 1;
    }
  }

  .dialog-modal.closing {
    -webkit-animation: hideModal 0.3s ease normal !important;
  }
  @-webkit-keyframes hideModal {
    from {
      transform: translateY(0%);
      opacity: 1;
    }
    to {
      transform: translateY(25%);
      opacity: 0;
    }
  }

  .backdrop.closing {
    -webkit-animation: hideBackdrop 0.3s ease normal !important;
  }
  @-webkit-keyframes hideBackdrop {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
`;var console=__webpack_require__("./node_modules/console-browserify/index.js"),__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__decorateClass=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp(target,key,result),result};let StellarWalletsModal=class extends lit_element_i{constructor(){super(...arguments),this.ignoreShowStatus=!1,this.showModal=!1,this.closingModal=!1,this.modalTitle="Connect a Wallet",this.notAvailableText="Not available",this.allowedWallets=new ReactiveState(this,allowedWallets$),this.theme=new ReactiveState(this,modalTheme$)}connectedCallback(){super.connectedCallback();const platformWrapper=this.getPlatformWrapper();platformWrapper&&setTimeout(()=>{this.pickWalletOption(platformWrapper)},10)}async closeModal(){this.closingModal=!0,await new Promise(r=>setTimeout(r,280)),this.ignoreShowStatus||(this.showModal=!1),this.dispatchEvent(new CustomEvent("modal-closed",{detail:new Error("Modal closed"),bubbles:!0,composed:!0})),this.closingModal=!1}async pickWalletOption(option){if(option.isAvailable){this.closingModal=!0,await new Promise(r=>setTimeout(r,280));try{const record=window.localStorage.getItem("@StellarWalletsKit/usedWalletsIds");let usedWalletsIds=record?JSON.parse(record):[];usedWalletsIds=[option.id,...usedWalletsIds.filter(id=>id!==option.id)],window.localStorage.setItem("@StellarWalletsKit/usedWalletsIds",JSON.stringify(usedWalletsIds))}catch(e){console.error(e)}this.dispatchEvent(new CustomEvent("wallet-selected",{detail:option,bubbles:!0,composed:!0})),this.closingModal=!1}else window.open(option.url,"_blank")}getSortedList(){const sortedWallets=this.allowedWallets.value.reduce((all,current)=>({available:current.isAvailable?[...all.available,current]:all.available,unavailable:current.isAvailable?all.unavailable:[...all.unavailable,current]}),{available:[],unavailable:[]});let usedWalletsIds;try{const record=window.localStorage.getItem("@StellarWalletsKit/usedWalletsIds");usedWalletsIds=record?JSON.parse(record):[]}catch(e){console.error(e),usedWalletsIds=[]}if(0===usedWalletsIds.length)return[...sortedWallets.available,...sortedWallets.unavailable];const usedWallets=[],nonUsedWallets=[];for(const availableWallet of sortedWallets.available)usedWalletsIds.find(id=>id===availableWallet.id)?usedWallets.push(availableWallet):nonUsedWallets.push(availableWallet);return[...usedWallets.sort((a,b)=>usedWalletsIds.indexOf(a.id)-usedWalletsIds.indexOf(b.id)),...nonUsedWallets,...sortedWallets.unavailable]}getPlatformWrapper(){return this.getSortedList().find(w=>w.isPlatformWrapper)}getThemeStyles(){return this.theme.value?{"--modal-bg-color":this.theme.value.bgColor,"--modal-text-color":this.theme.value.textColor,"--modal-solid-text-color":this.theme.value.solidTextColor,"--modal-header-button-color":this.theme.value.headerButtonColor,"--modal-divider-color":this.theme.value.dividerColor,"--modal-help-bg-color":this.theme.value.helpBgColor,"--modal-not-available-text-color":this.theme.value.notAvailableTextColor,"--modal-not-available-bg-color":this.theme.value.notAvailableBgColor,"--modal-not-available-border-color":this.theme.value.notAvailableBorderColor}:{}}render(){if(this.getPlatformWrapper())return x``;const helpSection=x`
      <section class="help-container">
        <header class="help-header">
          <h2 class="help-header__modal-title dialog-text-solid">Learn more</h2>
        </header>

        <div class="help__whats_a_wallet">
          <h2 class="dialog-text-solid help__title">What is a Wallet?</h2>
          <p class="dialog-text help__text">
            Wallets are used to send, receive, and store the keys you use to sign blockchain transactions.
          </p>
        </div>

        <div class="help__whats_stellar">
          <h2 class="dialog-text-solid help__title">What is Stellar?</h2>
          <p class="dialog-text help__text">
            Stellar is a decentralized, public blockchain that gives developers the tools to create experiences that are
            more like cash than crypto.
          </p>
        </div>
      </section>
    `,walletsSection=x`
      <section class="wallets-container">
        <header class="wallets-header">
          <h2 class="wallets-header__modal-title dialog-text-solid">${this.modalTitle}</h2>

          <button @click=${()=>this.closeModal()} class="wallets-header__button">
            <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="20px" width="20px" viewBox="0 0 490 490">
              <polygon
                points="456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490   489.292,457.678 277.331,245.004 489.292,32.337 " />
            </svg>
          </button>
        </header>

        <ul class="wallets-body">
          ${this.getSortedList().map((item,i)=>x`
                <li
                  @click=${()=>this.pickWalletOption(item)}
                  class=" wallets-body__item ${item.isAvailable?"":"not-available"} ${i===this.allowedWallets.value.length-1?"mb-0":""}">
                  <img src=${item.icon} alt=${item.name} />
                  <span class="dialog-text-solid">${item.name}</span>
                  ${item.isAvailable?"":x`<small class="not-available">${this.notAvailableText}</small>`}
                </li>
              `)}
        </ul>
      </section>
    `;return x`
      <dialog
        style=${style_map_o(this.getThemeStyles())}
        class="dialog-modal ${this.closingModal?"closing":""}"
        .open=${this.showModal}>
        <section class="dialog-modal-body">
          <div class="dialog-modal-body__help">${helpSection}</div>
          <div class="dialog-modal-body__wallets">${walletsSection}</div>
        </section>
      </dialog>

      <div
        style="position: fixed; z-index: 950"
        class="backdrop ${this.closingModal?"closing":""}"
        @click=${()=>this.closeModal()}></div>
    `}};StellarWalletsModal.styles=[i`
      :host * {
        box-sizing: border-box;
      }

      .mb-0 {
        margin-bottom: 0 !important;
      }
    `,modalDialogStyles,modalDialogBodyStyles,modalHelpSection,backdropStyles,modalAnimations,modalWalletsSection],__decorateClass([property_n({type:Boolean,reflect:!0})],StellarWalletsModal.prototype,"ignoreShowStatus",2),__decorateClass([property_n({type:Boolean,reflect:!0})],StellarWalletsModal.prototype,"showModal",2),__decorateClass([state_r()],StellarWalletsModal.prototype,"closingModal",2),__decorateClass([property_n({type:String,reflect:!0})],StellarWalletsModal.prototype,"modalTitle",2),__decorateClass([property_n({type:String,reflect:!0})],StellarWalletsModal.prototype,"notAvailableText",2),StellarWalletsModal=__decorateClass([custom_element_t("stellar-wallets-modal")],StellarWalletsModal);var EmptyError=createErrorClass(function(_super){return function EmptyErrorImpl(){_super(this),this.name="EmptyError",this.message="no elements in sequence"}});function firstValueFrom_firstValueFrom(source,config){var hasConfig="object"==typeof config;return new Promise(function(resolve,reject){var subscriber=new SafeSubscriber({next:function(value){resolve(value),subscriber.unsubscribe()},error:reject,complete:function(){hasConfig?resolve(config.defaultValue):reject(new EmptyError)}});source.subscribe(subscriber)})}var isArrayLike=function(x){return x&&"number"==typeof x.length&&"function"!=typeof x};function isPromise(value){return isFunction_isFunction(null==value?void 0:value.then)}function isInteropObservable(input){return isFunction_isFunction(input[observable])}function isAsyncIterable(obj){return Symbol.asyncIterator&&isFunction_isFunction(null==obj?void 0:obj[Symbol.asyncIterator])}function createInvalidObservableTypeError(input){return new TypeError("You provided "+(null!==input&&"object"==typeof input?"an invalid object":"'"+input+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var iterator_iterator=function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function isIterable(input){return isFunction_isFunction(null==input?void 0:input[iterator_iterator])}function readableStreamLikeToAsyncGenerator(readableStream){return(0,tslib_es6.AQ)(this,arguments,function readableStreamLikeToAsyncGenerator_1(){var reader,_a,value;return(0,tslib_es6.YH)(this,function(_b){switch(_b.label){case 0:reader=readableStream.getReader(),_b.label=1;case 1:_b.trys.push([1,,9,10]),_b.label=2;case 2:return[4,(0,tslib_es6.N3)(reader.read())];case 3:return _a=_b.sent(),value=_a.value,_a.done?[4,(0,tslib_es6.N3)(void 0)]:[3,5];case 4:return[2,_b.sent()];case 5:return[4,(0,tslib_es6.N3)(value)];case 6:return[4,_b.sent()];case 7:return _b.sent(),[3,2];case 8:return[3,10];case 9:return reader.releaseLock(),[7];case 10:return[2]}})})}function isReadableStreamLike(obj){return isFunction_isFunction(null==obj?void 0:obj.getReader)}function innerFrom(input){if(input instanceof Observable_Observable)return input;if(null!=input){if(isInteropObservable(input))return function fromInteropObservable(obj){return new Observable_Observable(function(subscriber){var obs=obj[observable]();if(isFunction_isFunction(obs.subscribe))return obs.subscribe(subscriber);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(input);if(isArrayLike(input))return function fromArrayLike(array){return new Observable_Observable(function(subscriber){for(var i=0;i<array.length&&!subscriber.closed;i++)subscriber.next(array[i]);subscriber.complete()})}(input);if(isPromise(input))return function fromPromise(promise){return new Observable_Observable(function(subscriber){promise.then(function(value){subscriber.closed||(subscriber.next(value),subscriber.complete())},function(err){return subscriber.error(err)}).then(null,reportUnhandledError)})}(input);if(isAsyncIterable(input))return fromAsyncIterable(input);if(isIterable(input))return function fromIterable(iterable){return new Observable_Observable(function(subscriber){var e_1,_a;try{for(var iterable_1=(0,tslib_es6.Ju)(iterable),iterable_1_1=iterable_1.next();!iterable_1_1.done;iterable_1_1=iterable_1.next()){var value=iterable_1_1.value;if(subscriber.next(value),subscriber.closed)return}}catch(e_1_1){e_1={error:e_1_1}}finally{try{iterable_1_1&&!iterable_1_1.done&&(_a=iterable_1.return)&&_a.call(iterable_1)}finally{if(e_1)throw e_1.error}}subscriber.complete()})}(input);if(isReadableStreamLike(input))return function fromReadableStreamLike(readableStream){return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream))}(input)}throw createInvalidObservableTypeError(input)}function fromAsyncIterable(asyncIterable){return new Observable_Observable(function(subscriber){(function process(asyncIterable,subscriber){var asyncIterable_1,asyncIterable_1_1,e_2,_a;return(0,tslib_es6.sH)(this,void 0,void 0,function(){var value,e_2_1;return(0,tslib_es6.YH)(this,function(_b){switch(_b.label){case 0:_b.trys.push([0,5,6,11]),asyncIterable_1=(0,tslib_es6.xN)(asyncIterable),_b.label=1;case 1:return[4,asyncIterable_1.next()];case 2:if((asyncIterable_1_1=_b.sent()).done)return[3,4];if(value=asyncIterable_1_1.value,subscriber.next(value),subscriber.closed)return[2];_b.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return e_2_1=_b.sent(),e_2={error:e_2_1},[3,11];case 6:return _b.trys.push([6,,9,10]),asyncIterable_1_1&&!asyncIterable_1_1.done&&(_a=asyncIterable_1.return)?[4,_a.call(asyncIterable_1)]:[3,8];case 7:_b.sent(),_b.label=8;case 8:return[3,10];case 9:if(e_2)throw e_2.error;return[7];case 10:return[7];case 11:return subscriber.complete(),[2]}})})})(asyncIterable,subscriber).catch(function(err){return subscriber.error(err)})})}function switchMap(project,resultSelector){return operate(function(source,subscriber){var innerSubscriber=null,index=0,isComplete=!1,checkComplete=function(){return isComplete&&!innerSubscriber&&subscriber.complete()};source.subscribe(createOperatorSubscriber(subscriber,function(value){null==innerSubscriber||innerSubscriber.unsubscribe();var innerIndex=0,outerIndex=index++;innerFrom(project(value,outerIndex)).subscribe(innerSubscriber=createOperatorSubscriber(subscriber,function(innerValue){return subscriber.next(resultSelector?resultSelector(value,innerValue,outerIndex,innerIndex++):innerValue)},function(){innerSubscriber=null,checkComplete()}))},function(){isComplete=!0,checkComplete()}))})}const buttonContainer=i`
  .btn-container {
    position: relative;
  }
`,buttonStyles=i`
  .btn {
    background: none;
    border: none;
    border-radius: var(--button-border-radius, 0.5rem);
    cursor: pointer;
    padding: var(--button-padding, 0.5rem 1.25rem);
    display: flex;
    justify-content: center;
    justify-items: center;
    align-content: center;
    align-items: center;
    line-height: 100%;
    margin: 0;
    font-family: 'Open Sans', arial, sans-serif;
  }

  .btn svg {
    width: 1rem;
    height: auto;
    margin-left: 0.5rem;
  }

  @media (prefers-color-scheme: light) {
    .btn {
      background-color: var(--button-bg-color, #fcfcfc);
      color: var(--button-text-color, #181818);
      border: solid var(--button-text-color, #181818) 1px;
    }

    .btn svg circle,
    .btn svg path {
      stroke: var(--button-text-color, #181818);
    }
  }

  @media (prefers-color-scheme: dark) {
    .btn {
      background-color: var(--button-bg-color, #161616);
      color: var(--button-text-color, #fcfcfc);
      border: solid var(--button-text-color, #fcfcfc) 1px;
    }

    .btn svg circle,
    .btn svg path {
      stroke: var(--button-text-color, #fcfcfc);
    }
  }
`,dropdownWrapper=i`
  .dropdown-wrapper {
    position: absolute;
    top: 110%;
    right: 0;
    box-shadow: 0 0.125rem 0.75rem rgba(0, 0, 0, 0.25);
    z-index: 900;
    border-radius: 0.75rem;
    padding: 2rem;
    width: 18rem;
    display: flex;
    flex-direction: column;
    font-family: 'Open Sans', arial, sans-serif;
  }

  .dropdown-profile {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    margin-bottom: 2rem;
  }

  .dropdown-text-solid {
    font-size: 1rem;
    line-height: 1.25rem;
  }

  .dropdown-text {
    font-size: 0.875rem;
    line-height: 1.125rem;
  }

  .dropdown-action-wrapper {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .dropdown-action-button {
    padding: 0.4rem;
    border-radius: 0.25rem;
    border: none;
    background: none;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
  }

  .dropdown-close {
    position: absolute;
    right: 1rem;
    top: 1rem;
    border-radius: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background: none;
    border: none;
    font-size: 1.25rem;
    cursor: pointer;
  }

  @media (prefers-color-scheme: light) {
    .dropdown-wrapper {
      background-color: var(--button-bg-color, #fcfcfc);
      border: solid 1px var(--button-solid-text-color, #000000);
    }

    .dropdown-text-solid,
    .dropdown-action-button,
    .dropdown-close {
      color: var(--button-solid-text-color, #000000);
    }

    .dropdown-text {
      color: var(--button-text-color, #181818);
    }

    svg circle,
    svg path {
      stroke: var(--button-text-color, #181818);
    }

    .dropdown-action-button {
      border: 1px solid var(--button-text-color, #181818);
    }
  }

  @media (prefers-color-scheme: dark) {
    .dropdown-wrapper {
      background-color: var(--button-bg-color, #161616);
      border: solid 1px var(--button-solid-text-color, #ededed);
    }

    .dropdown-text-solid,
    .dropdown-action-button,
    .dropdown-close {
      color: var(--button-solid-text-color, #ededed);
    }

    .dropdown-text {
      color: var(--button-text-color, #a0a0a0);
    }

    svg circle,
    svg path {
      stroke: var(--button-text-color, #fcfcfc);
    }

    .dropdown-action-button {
      border: 1px solid var(--button-text-color, #a0a0a0);
    }
  }
`;var stellar_wallets_button_defProp=Object.defineProperty,stellar_wallets_button_getOwnPropDesc=Object.getOwnPropertyDescriptor,stellar_wallets_button_decorateClass=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?stellar_wallets_button_getOwnPropDesc(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&stellar_wallets_button_defProp(target,key,result),result};let StellarWalletsButton=class extends lit_element_i{constructor(){super(...arguments),this.buttonText="Connect",this.showDropdown=!1,this.showCopiedMessage=!1,this.activeAddress=new ReactiveState(this,activeAddress$),this.theme=new ReactiveState(this,buttonTheme$)}get getThemeStyles(){return this.theme.value?{"--button-bg-color":this.theme.value.bgColor,"--button-text-color":this.theme.value.textColor,"--button-solid-text-color":this.theme.value.solidTextColor,"--button-divider-color":this.theme.value.dividerColor,"--button-padding":this.theme.value.buttonPadding,"--button-border-radius":this.theme.value.buttonBorderRadius}:{}}onButtonClicked(){this.activeAddress.value?this.showDropdown=!this.showDropdown:this.dispatchEvent(new CustomEvent("button-clicked",{bubbles:!0,composed:!0}))}closeDropdown(){this.showDropdown=!1}disconnect(){removeAddress(),this.closeDropdown(),this.dispatchEvent(new CustomEvent("disconnect-wallet",{bubbles:!0,composed:!0}))}async copyPublicKey(){await async function copyToClipboard(textToCopy){if(!textToCopy)throw new Error("Text to copy to the clipboard can't be undefined");await navigator.clipboard.writeText(textToCopy)}(this.activeAddress.value),this.showCopiedMessage=!0,await new Promise(r=>setTimeout(r,3e3)),this.showCopiedMessage=!1}async startBalanceFetcher(){await firstValueFrom_firstValueFrom(horizonUrl$)&&(this.fetchAddressSubscription=this.activeAddress.value$.pipe(switchMap(async value=>value?async function fetchAccountBalance(pk){const horizonUrl=await firstValueFrom_firstValueFrom(horizonUrl$);if(!horizonUrl)throw new Error("There is no Horizon URL set");const url=new URL(horizonUrl);url.pathname=`/accounts/${pk}`;const response=await fetch(url),nativeBalance=(await response.json()).balances.find(b=>"native"===b.asset_type);return nativeBalance.balance}(value).catch(()=>"0"):"0")).subscribe(balance=>{this.accountBalance=balance}))}connectedCallback(){super.connectedCallback(),this.startBalanceFetcher().then()}disconnectedCallback(){super.disconnectedCallback(),this.fetchAddressSubscription?.unsubscribe()}render(){const button=x`
      <button @click=${this.onButtonClicked} class="btn">
        ${this.activeAddress.value?this.activeAddress.value.slice(0,4)+"...."+this.activeAddress.value.slice(-6):this.buttonText}

        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 8H10" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          <path
            d="M20.8333 9H18.2308C16.4465 9 15 10.3431 15 12C15 13.6569 16.4465 15 18.2308 15H20.8333C20.9167 15 20.9583 15 20.9935 14.9979C21.5328 14.965 21.9623 14.5662 21.9977 14.0654C22 14.0327 22 13.994 22 13.9167V10.0833C22 10.006 22 9.96726 21.9977 9.9346C21.9623 9.43384 21.5328 9.03496 20.9935 9.00214C20.9583 9 20.9167 9 20.8333 9Z"
            stroke-width="1.5" />
          <path
            d="M20.965 9C20.8873 7.1277 20.6366 5.97975 19.8284 5.17157C18.6569 4 16.7712 4 13 4L10 4C6.22876 4 4.34315 4 3.17157 5.17157C2 6.34315 2 8.22876 2 12C2 15.7712 2 17.6569 3.17157 18.8284C4.34315 20 6.22876 20 10 20H13C16.7712 20 18.6569 20 19.8284 18.8284C20.6366 18.0203 20.8873 16.8723 20.965 15"
            stroke-width="1.5" />
          <path d="M17.9912 12H18.0002" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
    `,dropdown=this.showDropdown?x`
          <section class="dropdown-wrapper">
            <button @click=${this.closeDropdown} class="dropdown-close">x</button>

            <div class="dropdown-profile">
              <svg
                style="margin-bottom: 1rem"
                width="36px"
                height="36px"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="6" r="4" stroke="#1C274C" stroke-width="1.5" />
                <path
                  d="M19.9975 18C20 17.8358 20 17.669 20 17.5C20 15.0147 16.4183 13 12 13C7.58172 13 4 15.0147 4 17.5C4 19.9853 4 22 12 22C14.231 22 15.8398 21.8433 17 21.5634"
                  stroke="#1C274C"
                  stroke-width="1.5"
                  stroke-linecap="round" />
              </svg>

              <h2 style="margin: 0 0 0.25rem" class="dropdown-text-solid">
                ${this.activeAddress.value?.slice(0,4)}....${this.activeAddress.value?.slice(-6)}
              </h2>

              ${this.accountBalance?x`<h3 style="margin: 0" class="dropdown-text">${this.accountBalance} XLM</h3>`:""}
            </div>

            <div class="dropdown-action-wrapper">
              <button @click=${this.copyPublicKey} class="dropdown-action-button">
                ${this.showCopiedMessage?"Copied!!":x`Copy address

                      <svg
                        width="0.75rem"
                        height="0.75rem"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M15 1.25H10.9436C9.10583 1.24998 7.65019 1.24997 6.51098 1.40314C5.33856 1.56076 4.38961 1.89288 3.64124 2.64124C2.89288 3.38961 2.56076 4.33856 2.40314 5.51098C2.24997 6.65019 2.24998 8.10582 2.25 9.94357V16C2.25 17.8722 3.62205 19.424 5.41551 19.7047C5.55348 20.4687 5.81753 21.1208 6.34835 21.6517C6.95027 22.2536 7.70814 22.5125 8.60825 22.6335C9.47522 22.75 10.5775 22.75 11.9451 22.75H15.0549C16.4225 22.75 17.5248 22.75 18.3918 22.6335C19.2919 22.5125 20.0497 22.2536 20.6517 21.6517C21.2536 21.0497 21.5125 20.2919 21.6335 19.3918C21.75 18.5248 21.75 17.4225 21.75 16.0549V10.9451C21.75 9.57754 21.75 8.47522 21.6335 7.60825C21.5125 6.70814 21.2536 5.95027 20.6517 5.34835C20.1208 4.81753 19.4687 4.55348 18.7047 4.41551C18.424 2.62205 16.8722 1.25 15 1.25ZM17.1293 4.27117C16.8265 3.38623 15.9876 2.75 15 2.75H11C9.09318 2.75 7.73851 2.75159 6.71085 2.88976C5.70476 3.02502 5.12511 3.27869 4.7019 3.7019C4.27869 4.12511 4.02502 4.70476 3.88976 5.71085C3.75159 6.73851 3.75 8.09318 3.75 10V16C3.75 16.9876 4.38624 17.8265 5.27117 18.1293C5.24998 17.5194 5.24999 16.8297 5.25 16.0549V10.9451C5.24998 9.57754 5.24996 8.47522 5.36652 7.60825C5.48754 6.70814 5.74643 5.95027 6.34835 5.34835C6.95027 4.74643 7.70814 4.48754 8.60825 4.36652C9.47522 4.24996 10.5775 4.24998 11.9451 4.25H15.0549C15.8297 4.24999 16.5194 4.24998 17.1293 4.27117ZM7.40901 6.40901C7.68577 6.13225 8.07435 5.9518 8.80812 5.85315C9.56347 5.75159 10.5646 5.75 12 5.75H15C16.4354 5.75 17.4365 5.75159 18.1919 5.85315C18.9257 5.9518 19.3142 6.13225 19.591 6.40901C19.8678 6.68577 20.0482 7.07435 20.1469 7.80812C20.2484 8.56347 20.25 9.56458 20.25 11V16C20.25 17.4354 20.2484 18.4365 20.1469 19.1919C20.0482 19.9257 19.8678 20.3142 19.591 20.591C19.3142 20.8678 18.9257 21.0482 18.1919 21.1469C17.4365 21.2484 16.4354 21.25 15 21.25H12C10.5646 21.25 9.56347 21.2484 8.80812 21.1469C8.07435 21.0482 7.68577 20.8678 7.40901 20.591C7.13225 20.3142 6.9518 19.9257 6.85315 19.1919C6.75159 18.4365 6.75 17.4354 6.75 16V11C6.75 9.56458 6.75159 8.56347 6.85315 7.80812C6.9518 7.07435 7.13225 6.68577 7.40901 6.40901Z" />
                      </svg>`}
              </button>

              <button @click=${this.disconnect} class="dropdown-action-button">
                Disconnect

                <svg
                  width="0.75rem"
                  height="0.75rem"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M18 8L22 12M22 12L18 16M22 12H9M15 4.20404C13.7252 3.43827 12.2452 3 10.6667 3C5.8802 3 2 7.02944 2 12C2 16.9706 5.8802 21 10.6667 21C12.2452 21 13.7252 20.5617 15 19.796"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
              </button>
            </div>
          </section>
        `:"";return x`
      <section style=${style_map_o(this.getThemeStyles)} class="btn-container">${button} ${dropdown}</section>
    `}};StellarWalletsButton.styles=[i`
      :host * {
        box-sizing: border-box;
      }
    `,buttonStyles,buttonContainer,dropdownWrapper],stellar_wallets_button_decorateClass([property_n({type:String,reflect:!0})],StellarWalletsButton.prototype,"buttonText",2),stellar_wallets_button_decorateClass([state_r()],StellarWalletsButton.prototype,"showDropdown",2),stellar_wallets_button_decorateClass([state_r()],StellarWalletsButton.prototype,"accountBalance",2),stellar_wallets_button_decorateClass([state_r()],StellarWalletsButton.prototype,"showCopiedMessage",2),StellarWalletsButton=stellar_wallets_button_decorateClass([custom_element_t("stellar-wallets-button")],StellarWalletsButton);const styles_modalDialogStyles=i`
  .dialog-modal {
    max-height: 90vh;
    position: fixed;
    z-index: 990;
    font-family: 'Open Sans', arial, sans-serif;
    margin: 0 auto;
    padding: 0;
    width: 100%;
    border-radius: 1rem 1rem 0 0;
    border-width: 0;
    box-shadow: 0 0.125rem 0.75rem rgba(0, 0, 0, 0.25);
    bottom: 0;
    overflow-x: hidden;
    overflow-y: scroll;
  }

  @media screen and (min-width: 768px) {
    .dialog-modal {
      z-index: 990;
      bottom: auto;
      top: 5rem;
      max-width: 25rem;
      border-radius: 1rem;
    }
  }
`,styles_modalDialogBodyStyles=i`
  .dialog-modal-body {
    display: flex;
    flex-direction: column-reverse;
  }

  .dialog-modal-body__help,
  .dialog-modal-body__wallets {
    width: 100%;
    flex-basis: 100%;
  }

  .dialog-modal-body__help {
    padding: 1.5rem;
  }

  .dialog-modal-body__wallets {
    padding: 1.5rem;
  }

  .dialog-text-solid {
    font-size: 1rem;
    line-height: 1.25rem;
  }

  .dialog-text {
    font-size: 0.875rem;
    line-height: 1.125rem;
  }

  @media (prefers-color-scheme: light) {
    .dialog-modal-body__help {
      background-color: var(--modal-help-bg-color, #f8f8f8);
      border-top: 1px solid var(--modal-divider-color, rgba(0, 0, 0, 0.15));
    }

    @media screen and (min-width: 768px) {
      .dialog-modal-body__help {
        border-top: none;
        border-right: 1px solid var(--modal-divider-color, rgba(0, 0, 0, 0.15));
      }
    }

    .dialog-modal-body__wallets,
    .dialog-modal-body {
      background-color: var(--modal-bg-color, #fcfcfc);
    }

    .dialog-text-solid {
      color: var(--modal-solid-text-color, #000000);
    }

    .dialog-text {
      color: var(--modal-text-color, #181818);
    }
  }

  @media (prefers-color-scheme: dark) {
    .dialog-modal-body__help {
      background-color: var(--modal-help-bg-color, #1c1c1c);
      border-top: 1px solid var(--modal-divider-color, rgba(255, 255, 255, 0.15));
    }

    @media screen and (min-width: 768px) {
      .dialog-modal-body__help {
        border-top: none;
        border-right: 1px solid var(--modal-divider-color, rgba(255, 255, 255, 0.15));
      }
    }

    .dialog-modal-body__wallets,
    .dialog-modal-body {
      background-color: var(--modal-bg-color, #161616);
    }

    .dialog-text-solid {
      color: var(--modal-solid-text-color, #ededed);
    }

    .dialog-text {
      color: var(--modal-text-color, #a0a0a0);
    }
  }

  @media screen and (min-width: 768px) {
    .dialog-modal-body {
      flex-direction: row;
    }

    .dialog-modal-body__help,
    .dialog-modal-body__wallets {
      padding: 2rem;
    }
  }
`,styles_modalHelpSection=i`
  .help-container {
    width: 100%;
  }

  .help-header {
    display: none;
    margin: 0 0 2rem 0;
  }

  .help-header__modal-title {
    font-size: 1.25rem;
    padding: 0;
    margin: 0;
  }

  .help__title,
  .help__text {
    text-align: center;
  }

  .help__title {
    font-weight: 400;
    margin-top: 0;
    margin-bottom: 0.5rem;
  }

  .help__text {
    max-width: 21rem;
    margin-left: auto;
    margin-right: auto;
    font-weight: 300;
    margin-top: 0;
  }

  .help__whats_stellar {
    display: none;
  }

  @media screen and (min-width: 768px) {
    .help-header {
      display: block;
    }

    .help__title,
    .help__text {
      text-align: left;
      margin-left: 0;
    }

    .help__whats_a_wallet {
      margin-bottom: 2rem;
    }

    .help__whats_stellar {
      display: block;
    }
  }
`,styles_modalWalletsSection=i`
  .wallets-container {
    width: 100%;
    height: 100%;
    min-height: fit-content;
    display: flex;
    flex-direction: column;
  }

  .wallets-header {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
  }

  .wallets-header__modal-title {
    font-size: 1.25rem;
    padding: 0;
    margin: 0;
  }

  .wallets-header__button {
    background: none;
    border: none;
    cursor: pointer;
  }

  @media (prefers-color-scheme: light) {
    .wallets-header__button svg {
      fill: var(--modal-header-button-color, #8f8f8f);
    }
  }

  @media (prefers-color-scheme: dark) {
    .wallets-header__button svg {
      fill: var(--modal-header-button-color, #707070);
    }
  }

  .wallets-body {
    margin: 0;
    width: 100%;
    list-style: none;
    padding: 1rem 0 0 !important;
  }

  .wallets-body__item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-weight: 600;
    margin-bottom: 2rem;
    cursor: pointer;
    padding: 0 0 1rem 0;
  }

  .wallets-body__item:last-child {
    margin-bottom: 0;
  }

  @media (prefers-color-scheme: light) {
    .wallets-body__item {
      border-bottom: 1px var(--modal-divider-color, rgba(0, 0, 0, 0.15)) solid;
    }
  }

  @media (prefers-color-scheme: dark) {
    .wallets-body__item {
      border-bottom: 1px var(--modal-divider-color, rgba(255, 255, 255, 0.15)) solid;
    }
  }

  .wallets-body__item img {
    margin-right: 1rem;
    width: 2rem;
    border-radius: 100%;
    overflow: hidden;
  }

  .wallets-body__item.not-available {
    cursor: alias;
  }

  .wallets-body__item .not-available {
    margin-left: auto;
    font-size: 10px;
    padding: 0.25rem 0.5rem;
    border-radius: 1rem;
  }

  @media (prefers-color-scheme: light) {
    .wallets-body__item .not-available {
      border: solid var(--modal-not-available-border-color, #e2e2e2) 1px;
      background-color: var(--modal-not-available-bg-color, #f3f3f3);
      color: var(--modal-not-available-text-color, #6f6f6f);
    }
  }

  @media (prefers-color-scheme: dark) {
    .wallets-body__item .not-available {
      border: solid var(--modal-not-available-border-color, #343434) 1px;
      background-color: var(--modal-not-available-bg-color, #232323);
      color: var(--modal-not-available-text-color, #a0a0a0);
    }
  }

  @media screen and (min-width: 768px) {
  }
`,styles_backdropStyles=i`
  .dialog-modal[open] + .backdrop {
    background: rgba(0, 0, 0, 0.5);
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
`,styles_modalAnimations=i`
  .dialog-modal[open] {
    -webkit-animation: showModal 0.3s ease normal;
  }
  @-webkit-keyframes showModal {
    from {
      transform: translateY(25%);
      opacity: 0;
    }
    to {
      transform: translateY(0%);
      opacity: 1;
    }
  }

  .dialog-modal.closing {
    -webkit-animation: hideModal 0.3s ease normal !important;
  }
  @-webkit-keyframes hideModal {
    from {
      transform: translateY(0%);
      opacity: 1;
    }
    to {
      transform: translateY(25%);
      opacity: 0;
    }
  }

  .backdrop.closing {
    -webkit-animation: hideBackdrop 0.3s ease normal !important;
  }
  @-webkit-keyframes hideBackdrop {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
`;var stellar_selector_modal_defProp=Object.defineProperty,stellar_selector_modal_getOwnPropDesc=Object.getOwnPropertyDescriptor,stellar_selector_modal_decorateClass=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?stellar_selector_modal_getOwnPropDesc(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&stellar_selector_modal_defProp(target,key,result),result};let StellarSelectorModal=class extends lit_element_i{constructor(){super(...arguments),this.showModal=!1,this.loadingAccounts=!1,this.closingModal=!1,this.modalTitle="Pick your account",this.accounts=[]}connectedCallback(){super.connectedCallback()}async pickAccount(option){this.closingModal=!0,await new Promise(r=>setTimeout(r,280)),this.dispatchEvent(new CustomEvent("account-selected",{detail:option,bubbles:!0,composed:!0})),this.closingModal=!1}async closeModal(){this.closingModal=!0,await new Promise(r=>setTimeout(r,280)),this.showModal=!1,this.dispatchEvent(new CustomEvent("account-selector-closed",{detail:new Error("Account selector closed"),bubbles:!0,composed:!0})),this.closingModal=!1}render(){const loadingIcon=x`
      <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <style>
          .spinner_qM83 {
            animation: spinner_8HQG 1.05s infinite;
            fill: white;
          }
          .spinner_oXPr {
            animation-delay: 0.1s;
          }
          .spinner_ZTLf {
            animation-delay: 0.2s;
          }
          @keyframes spinner_8HQG {
            0%,
            57.14% {
              animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
              transform: translate(0);
            }
            28.57% {
              animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
              transform: translateY(-6px);
            }
            100% {
              transform: translate(0);
            }
          }
        </style>
        <circle class="spinner_qM83" cx="4" cy="12" r="3" />
        <circle class="spinner_qM83 spinner_oXPr" cx="12" cy="12" r="3" />
        <circle class="spinner_qM83 spinner_ZTLf" cx="20" cy="12" r="3" />
      </svg>
    `,accountsList=x`
      <ul class="wallets-body">
        ${this.accounts.map(({publicKey,index})=>x`
            <li @click="${()=>this.pickAccount({publicKey,index})}" class="wallets-body__item">
              <span style="margin-right: 1rem;" class="dialog-text-solid">
                ${publicKey.slice(0,4)}....${publicKey.slice(-6)}
              </span>
              <span class="dialog-text">(44'/148'/${index}')</span>
            </li>
          `)}
      </ul>
    `;return x`
      <dialog style="" class="dialog-modal ${this.closingModal?"closing":""}" .open=${this.showModal}>
        <section class="dialog-modal-body">
          <div class="dialog-modal-body__wallets">
            <section class="wallets-container">
              <header class="wallets-header">
                <h2 class="wallets-header__modal-title dialog-text-solid">${this.modalTitle}</h2>

                <button @click=${()=>this.closeModal()} class="wallets-header__button">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="#000000"
                    height="20px"
                    width="20px"
                    viewBox="0 0 490 490">
                    <polygon
                      points="456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490   489.292,457.678 277.331,245.004 489.292,32.337 " />
                  </svg>
                </button>
              </header>

              ${this.loadingAccounts?loadingIcon:accountsList}
            </section>
          </div>
        </section>
      </dialog>

      <div
        style="position: fixed; z-index: 950"
        class="backdrop ${this.closingModal?"closing":""}"
        @click=${()=>this.closeModal()}></div>
    `}};function generateRandomToken(){const rn=new Uint32Array(4);if("undefined"!=typeof crypto&&crypto.getRandomValues)crypto.getRandomValues(rn);else for(let i=0;i<rn.length;i++)rn[i]=Math.floor(4294967295*Math.random());return Array.from(rn).map(n=>n.toString(36)).join("")}StellarSelectorModal.styles=[i`
      :host * {
        box-sizing: border-box;
      }

      .mb-0 {
        margin-bottom: 0 !important;
      }
    `,styles_modalDialogStyles,styles_modalDialogBodyStyles,styles_modalHelpSection,styles_backdropStyles,styles_modalAnimations,styles_modalWalletsSection],stellar_selector_modal_decorateClass([property_n({type:Boolean,reflect:!0})],StellarSelectorModal.prototype,"showModal",2),stellar_selector_modal_decorateClass([property_n({type:Boolean,reflect:!0})],StellarSelectorModal.prototype,"loadingAccounts",2),stellar_selector_modal_decorateClass([state_r()],StellarSelectorModal.prototype,"closingModal",2),stellar_selector_modal_decorateClass([property_n({type:String,reflect:!0})],StellarSelectorModal.prototype,"modalTitle",2),stellar_selector_modal_decorateClass([property_n({type:String,reflect:!0,converter:value=>value?JSON.parse(value):[]})],StellarSelectorModal.prototype,"accounts",2),StellarSelectorModal=stellar_selector_modal_decorateClass([custom_element_t("stellar-accounts-selector")],StellarSelectorModal);const intent_interface={public_key:{title:"View public key",description:"Requests account public key. It's a simple way of authentication for Stellar-based applications. The response ensures that a user owns the corresponding secret key.",implicitFlow:!1,params:{token:{description:"Verification token generated by the application (should be unique or random).",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST a signed token and public key.",type:"string",required:!1},require_existing:{description:"Allow existing Albedo accounts only.",type:"boolean",required:!1}},returns:{pubkey:{description:"User-selected public key.",type:"string"},signed_message:{description:"HEX-encoded authentication message derived from the public key and verification token.",type:"string"},signature:{description:"HEX-encoded ED25519 signature of the authentication message that can be further used to verify user's keypair ownership.",type:"string"}}},sign_message:{title:"Sign text message",description:"Requests arbitrary message signing. Can be used to implement identity/ownership verification.",implicitFlow:!0,params:{message:{description:"Text message to sign.",type:"string",required:!0},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST a signed message.",type:"string",required:!1}},returns:{pubkey:{description:"User-selected public key.",type:"string"},original_message:{description:"Text message to sign from request.",type:"string"},signed_message:{description:"HEX-encoded message derived from the public key and original message.",type:"string"},message_signature:{description:"HEX-encoded ED25519 signature of the signed message.",type:"string"}}},tx:{title:"Sign transaction",description:"Requests a signature for the transaction. Returns the signed transaction envelope that can be submitted to the network or used for multi-sig coordination.",implicitFlow:!0,params:{xdr:{description:"XDR-encoded transaction envelope to sign.",type:"string",required:!0},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},network:{description:"Stellar network identifier.",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon.",type:"string",required:!1},description:{description:"Optional human-friendly short transaction description provided by developers.",type:"string",required:!1},submit:{description:"If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.",type:"boolean",required:!1}},returns:{xdr:{description:"XDR-encoded transaction envelope from request.",type:"string"},tx_hash:{description:"HEX-encoded transaction hash.",type:"string"},signed_envelope_xdr:{description:"XDR-encoded transaction envelope with new signatures.",type:"string"},network:{description:"Stellar network identifier.",type:"string"},result:{description:"Optional response from Horizon if the transaction has been submitted automatically.",type:"object"}}},pay:{title:"Make payment",description:"Requests a payment from a user. Works with any Stellar asset, supports transaction memo.",implicitFlow:!0,params:{amount:{description:"Requested payment amount.",type:"string",required:!0},destination:{description:"Payment destination address.",type:"string",required:!0},asset_code:{description:"Asset code (skip for XLM).",type:"string",required:!1},asset_issuer:{description:"Asset issuer (skip for XLM).",type:"string",required:!1},memo:{description:"Transaction memo (required for exchanges and some anchors).",type:"string",required:!1},memo_type:{description:"Transaction memo type.",type:"string",required:!1},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon. ",type:"string",required:!1},submit:{description:"If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.",type:"boolean",required:!1}},returns:{amount:{description:"Payment amount from request.",type:"string"},destination:{description:"Payment destination address from request.",type:"string"},asset_code:{description:"Asset code from request.",type:"string"},asset_issuer:{description:"Asset issuer from request.",type:"string"},memo:{description:"Transaction memo from request.",type:"string"},memo_type:{description:"Transaction memo type from request.",type:"string"},tx_hash:{description:"HEX-encoded transaction hash.",type:"string"},signed_envelope_xdr:{description:"XDR-encoded transaction envelope with new signatures.",type:"string"},pubkey:{description:"User-selected public key.",type:"string"},network:{description:"Stellar network identifier.",type:"string"},result:{description:"Optional response from Horizon if the transaction has been submitted automatically.",type:"object"}}},trust:{title:"Establish trustline",description:"Requests permission to create a trustline to a given Stellar asset. Gradually simplifies the process of creating trustlines for anchors, ICOs, and airdrops.",implicitFlow:!0,params:{asset_code:{description:"Trustline asset code.",type:"string",required:!0},asset_issuer:{description:"Trustline asset issuer address.",type:"string",required:!0},limit:{description:"Trust limit.",type:"string",required:!1},memo:{description:"Transaction memo (required for exchanges and some anchors).",type:"string",required:!1},memo_type:{description:"Transaction memo type.",type:"string",required:!1},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon. ",type:"string",required:!1},submit:{description:"If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.",type:"boolean",required:!1}},returns:{asset_code:{description:"Trustline asset code from request.",type:"string"},asset_issuer:{description:"Trustline asset issuer address from request.",type:"string"},limit:{description:"Trust limit from request.",type:"string"},tx_hash:{description:"HEX-encoded transaction hash.",type:"string"},signed_envelope_xdr:{description:"XDR-encoded transaction envelope with new signatures.",type:"string"},pubkey:{description:"User-selected public key.",type:"string"},network:{description:"Stellar network identifier.",type:"string"},result:{description:"Optional response from Horizon if the transaction has been submitted automatically.",type:"object"}}},exchange:{title:"Swap tokens",description:"Requests permission to buy tokens on Stellar DEX at market price.",implicitFlow:!1,params:{amount:{description:"The amount of asset to buy.",type:"string",required:!0},max_price:{description:"Maximum price the user willing to pay.",type:"string",required:!0},sell_asset_code:{description:"Asset code of the asset to sell.",type:"string",required:!1},sell_asset_issuer:{description:"Issuer account of the asset to sell.",type:"string",required:!1},buy_asset_code:{description:"Asset code of the asset to buy.",type:"string",required:!1},buy_asset_issuer:{description:"Issuer account of the asset to buy.",type:"string",required:!1},memo:{description:"Transaction memo (required for exchanges and some anchors).",type:"string",required:!1},memo_type:{description:"Transaction memo type.",type:"string",required:!1},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon.",type:"string",required:!1},submit:{description:"If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.",type:"boolean",required:!1}},returns:{amount:{description:"The amount of asset to buy from request.",type:"string"},max_price:{description:"Maximum price the user willing to pay from request.",type:"string"},sell_asset_code:{description:"Asset code of the asset to sell from request.",type:"string"},sell_asset_issuer:{description:"Issuer account of the asset to sell from request.",type:"string"},buy_asset_code:{description:"Asset code of the asset to buy from request.",type:"string"},buy_asset_issuer:{description:"Issuer account of the asset to buy from request.",type:"string"},tx_hash:{description:"HEX-encoded transaction hash.",type:"string"},signed_envelope_xdr:{description:"XDR-encoded transaction envelope with new signatures.",type:"string"},pubkey:{description:"User-selected public key.",type:"string"},network:{description:"Stellar network identifier.",type:"string"},result:{description:"Optional response from Horizon if the transaction has been submitted automatically.",type:"object"}}},implicit_flow:{title:"Implicit permissions",description:'Requests temporary access token for one or more intents that can be used to execute actions without explicit confirmation from the user. In order to be executed implicitly, an implicit flow permissions for a given intent should be granted and "pubkey" parameter set.',implicitFlow:!1,params:{intents:{description:"Requested implicit flow intents.",type:"string|string[]",required:!0},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1}},returns:{granted:{description:"Whether a user granted permissions or not.",type:"boolean"},intents:{description:"Requested implicit flow intents.",type:"string[]"},grants:{description:"Implicit flow intents that have been granted.",type:"string[]"},session:{description:"Unique implicit session id.",type:"string"},valid_until:{description:"Session expiration timestamp.",type:"number"},pubkey:{description:"User-selected public key.",type:"string"},network:{description:"Stellar network identifier.",type:"string"}}},manage_account:{title:"Open account settings",description:"Opens account settings window for a given account.",implicitFlow:!1,params:{pubkey:{description:"Specific public key requested by the application.",type:"string",required:!0},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1}},returns:{pubkey:{description:"Public key from intent request.",type:"string"}}},batch:{title:"Intents batch",description:"Requests execution of several tx intents bundled together. This intent is atomic  a user confirms or rejects all bundled requests at once, with the same account and the same Stellar network.",implicitFlow:!0,params:{intents:{description:"Requested tx intents that should be executed together.",type:"object[]",required:!0},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1}},returns:{intents:{description:"Requested tx intents.",type:"object[]"},results:{description:"Array of results for each requested intent.",type:"object[]"},pubkey:{description:"User-selected public key.",type:"string"},network:{description:"Stellar network identifier.",type:"string"}}}},intent_errors={unhandledError:{message:"Unhandled error occurred. If this error persists, please contact Albedo support.",code:-1},externalError:{message:"External error occurred.",code:-2},invalidIntentRequest:{message:"Intent request is invalid.",code:-3},actionRejectedByUser:{message:"Action request was rejected by the user.",code:-4},horizonError:{message:"Transaction failed when submitted to Stellar network.",code:-5},callbackError:{message:"Callback redirect failed.",code:-6}};var transport_handler_console=__webpack_require__("./node_modules/console-browserify/index.js");function TransportHandler(targetWindow,ephemeral=!1){this.windowHandler=targetWindow,this.ephemeral=!!ephemeral,this.isLoaded=!1,this.pendingRequests={},this.preprocessRequestParams=null,this.onLoaded=new Promise((resolve,reject)=>this.onLoadedCallback=resolve).then(()=>this),this.messageHandler=this.messageHandler.bind(this),window.addEventListener("message",this.messageHandler,!1)}function handleIntentResponsePromise(resolve,reject,res){res.error?reject(res):resolve(res)}TransportHandler.prototype={isLoaded:!1,protocolVersion:3,markLoaded(){const{onLoadedCallback}=this;onLoadedCallback&&(this.onLoadedCallback=null,this.isLoaded=!0,onLoadedCallback())},messageHandler({data}){if(data.albedo)return this.matchProtocolVersion(data.albedo.protocol),this.markLoaded();if(data.albedoIntentResult){const{__reqid,...result}=data.albedoIntentResult,pending=this.pendingRequests[__reqid];pending&&(delete this.pendingRequests[__reqid],pending(result),this.ephemeral&&(window.removeEventListener("message",this.messageHandler,!1),this.windowHandler.close()))}},transportCloseHandler(){for(let key in this.pendingRequests)if(this.pendingRequests.hasOwnProperty(key)){const pending=this.pendingRequests[key];delete this.pendingRequests[key],pending(intent_errors.actionRejectedByUser)}},postMessage(params){const nonce=generateRandomToken();return new Promise((resolve,reject)=>{this.onLoaded.then(()=>{this.pendingRequests[nonce]=handleIntentResponsePromise.bind(this,resolve,reject),params=Object.assign({__reqid:nonce,__albedo_intent_version:this.protocolVersion},params),this.preprocessRequestParams&&(params=this.preprocessRequestParams(params)),this.windowHandler.postMessage(params,"*")})})},matchProtocolVersion(albedoProtocolVersion){const versionDif=albedoProtocolVersion-this.protocolVersion;if(0===versionDif)return;const error=`@albedo-link/intent module protocol version (${this.protocolVersion}) is incompatible with current Albedo protocol version ${albedoProtocolVersion}.`;if(versionDif>0)transport_handler_console.warn(error+" Please update @albedo-link/intent module to avoid possible connection problems.");else if(versionDif<0)throw this.windowHandler.close(),new Error(error)}};const transport_handler=TransportHandler;let sharedIframeTransport=null;function createIframeTransport(frontendUrl){if(!sharedIframeTransport){const iframe=document.createElement("iframe");iframe.style.border="none",Object.assign(iframe,{width:"0",height:"0",frameBorder:"0",referrerPolicy:"origin",src:`${frontendUrl}`}),document.body.appendChild(iframe),sharedIframeTransport=new transport_handler(iframe.contentWindow)}return sharedIframeTransport.onLoaded}function ImplicitSession({session,pubkey,grants,valid_until}){this.key=session,this.pubkey=pubkey,this.grants=grants.slice(),this.validUntil=valid_until,Object.freeze(this),Object.freeze(this.grants)}ImplicitSession.prototype={key:"",pubkey:"",grants:[],validUntil:0,get isExpired(){return this.validUntil-2e3<(new Date).getTime()},toJSON(){return{session:this.key,pubkey:this.pubkey,grants:this.grants.slice(),valid_until:this.validUntil}}};const implicit_session=ImplicitSession;function getStorage(){return window.sessionStorage}function retrieveSessionFromStorage(pubkey){let session;{const restored=getStorage().getItem("albedo_session_"+pubkey);restored&&(session=new implicit_session(JSON.parse(restored)))}return session?session.isExpired?(forgetSession(pubkey),null):session:null}function getImplicitSession(intent,pubkey){const session=retrieveSessionFromStorage(pubkey);return session&&session.grants.includes(intent)?session:null}function forgetSession(pubkey){getStorage().removeItem("albedo_session_"+pubkey)}function intentError(msg){return Object.assign(new Error,intent_errors.invalidIntentRequest,{ext:msg})}function requestIntentConfirmation(params,frontendUrl){try{const{intent}=params;if(!intent)throw intentError('Parameter "intent" is required.');const intentDescriptor=intent_interface[intent];if(!intentDescriptor)throw intentError(`Unknown intent: "${intent}".`);const requestParams=function prepareRequestParams(intentDescriptor,params){if("object"!=typeof params)throw intentError("Intent parameters expected.");const{intent,pubkey}=params,requestParams={intent};if(pubkey&&!/^G[0-9A-Z]{55}$/.test(pubkey))throw intentError('Invalid "pubkey" parameter. Stellar account public key expected.');for(const key in intentDescriptor.params){const props=intentDescriptor.params[key],value=params[key];if(value)requestParams[key]=value;else if(props.required)throw intentError(`Parameter "${key}" is required for intent "${intent}".`)}return requestParams}(intentDescriptor,params);return function prepareTransport(params,frontendUrl){if(params.pubkey){const session=getImplicitSession(params.intent,params.pubkey);if(session)return params.session=session.key,createIframeTransport(frontendUrl)}return setTimeout(()=>{"implicit_flow"===params.intent&&createIframeTransport(frontendUrl)},200),function createDialogTransport(frontendUrl){const url=`${frontendUrl}/confirm`,dualScreenLeft=void 0!==window.screenLeft?window.screenLeft:window.screenX,dualScreenTop=void 0!==window.screenTop?window.screenTop:window.screenY,left=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-240+dualScreenLeft,top=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-300+dualScreenTop,dialogWindow=window.open(url,"auth.albedo.link",`height=600,width=480,top=${top},left=${left},menubar=0,toolbar=0,location=0,status=0,personalbar=0,scrollbars=0,dependent=1`);return new transport_handler(dialogWindow,!0).onLoaded}(frontendUrl)}(requestParams,frontendUrl).then(transport=>function sendRequest(params,transport){return transport.postMessage(params).then(result=>("implicit_flow"===result.intent&&result.granted&&function saveImplicitSession(intentResult){const session=new implicit_session(intentResult);getStorage().setItem("albedo_session_"+session.pubkey,JSON.stringify(session))}(result),result))}(requestParams,transport))}catch(e){const{code=-1,message,ext}=e,res={message,code};return ext&&(res.ext=ext),Promise.reject(res)}}if("object"==typeof window&&"function"!=typeof window.fetch)throw new Error("Browser FetchAPI is not available. For legacy browsers support use polyfills such as whatwg-fetch.");function AlbedoIntent(){}function normalizeMessageToSign(message){switch(typeof message){case"string":return message;case"undefined":return""}return JSON.stringify(message)}AlbedoIntent.prototype={frontendUrl:"https://albedo.link",intentInterface:intent_interface,intentErrors:intent_errors,request(intent,params){return requestIntentConfirmation(Object.assign(params||{},{intent}),this.frontendUrl)},implicitFlow(params){return this.request("implicit_flow",params)},publicKey(params){return(params=Object.assign({},params)).token||(params.token=generateRandomToken()),this.request("public_key",params)},tx(params){return this.request("tx",params)},batch(params){return this.request("batch",params)},pay(params){return this.request("pay",params)},trust(params){return this.request("trust",params)},exchange(params){return this.request("exchange",params)},signMessage(params){return params=Object.assign({},params,{message:normalizeMessageToSign(params.message)}),this.request("sign_message",params)},manageAccount(params){return this.request("manage_account",params)},generateRandomToken:()=>generateRandomToken(),isImplicitSessionAllowed:(intent,pubkey)=>!!getImplicitSession(intent,pubkey),listImplicitSessions:()=>function getAllImplicitSessions(){const storage=getStorage();return Object.keys(storage).filter(key=>0===key.indexOf("albedo_session_")).map(key=>retrieveSessionFromStorage(key.substr(15))).filter(session=>!!session)}(),forgetImplicitSession(pubkey){forgetSession(pubkey)}};const albedo=new AlbedoIntent;albedo.default=albedo,function bindWebStellarLinkHandler(albedoIntent){"undefined"!=typeof document&&document.addEventListener&&document.addEventListener("click",function sep0007Handler(e){if("A"!==e.target.tagName||0!==(e.target.href||"").indexOf("web+stellar:"))return;e.preventDefault(),e.stopImmediatePropagation();const{pathname:intentName,search}=new URL(e.target.href);if(!["tx","pay"].includes(intentName))return void alert(`Invalid operation requested: ${intentName}. It's likely an external application error. Please contact support team of ${window.location.origin}.`);const params=function parseQuery(query=null){null===query&&(query=window.location.search),"?"===query[0]&&(query=query.substr(1));const dest={};for(let kv of query.split("&")){const[key,value]=kv.split("=").map(v=>decodeURIComponent(v));dest[key]=value}return dest}(search);albedoIntent.request(intentName,params)},!1)}(albedo);const src=albedo;class AlbedoModule{constructor(){this.moduleType=ModuleType.HOT_WALLET,this.productId="albedo",this.productName="Albedo",this.productUrl="https://albedo.link/",this.productIcon="https://stellar.creit.tech/wallet-icons/albedo.png"}async isAvailable(){return!0}async getAddress(){return src.publicKey({}).then(result=>({address:result.pubkey})).catch(e=>{throw parseError(e)})}async signTransaction(xdr,opts){return src.tx({xdr,pubkey:opts?.address,network:opts?.networkPassphrase?opts.networkPassphrase===WalletNetwork.PUBLIC?"public":"testnet":void 0}).then(({signed_envelope_xdr})=>({signedTxXdr:signed_envelope_xdr,signerAddress:opts?.address})).catch(e=>{throw parseError(e)})}async signAuthEntry(){throw{code:-3,message:'Albedo does not support the "signAuthEntry" function'}}async signMessage(){throw{code:-3,message:'Albedo does not support the "signMessage" function'}}async getNetwork(){throw{code:-3,message:'Albedo does not support the "getNetwork" function'}}}var index_min=__webpack_require__("./node_modules/@stellar/freighter-api/build/index.min.js"),buffer=__webpack_require__("./node_modules/buffer/index.js");const FREIGHTER_ID="freighter";class freighter_module_FreighterModule{constructor(){this.moduleType=ModuleType.HOT_WALLET,this.productId=FREIGHTER_ID,this.productName="Freighter",this.productUrl="https://freighter.app",this.productIcon="https://stellar.creit.tech/wallet-icons/freighter.png"}async runChecks(){if(!await this.isAvailable())throw new Error("Freighter is not connected")}async isAvailable(){return("freighter"!==window.stellar?.provider||"mobile"!==window.stellar?.platform)&&(0,index_min.isConnected)().then(({isConnected:isConnected2,error})=>!error&&isConnected2).catch(()=>!1)}async getAddress(params){return this.runChecks().then(async()=>!!params?.skipRequestAccess||(0,index_min.requestAccess)()).then(()=>(0,index_min.getAddress)()).then(({address,error})=>{if(error)throw error;if(!address)throw{code:-3,message:"Getting the address is not allowed, please request access first."};return{address}}).catch(e=>{throw parseError(e)})}async signTransaction(xdr,opts){return this.runChecks().then(async()=>{const{signedTxXdr,signerAddress,error}=await(0,index_min.signTransaction)(xdr,{address:opts?.address,networkPassphrase:opts?.networkPassphrase});if(error)throw error;return{signedTxXdr,signerAddress}}).catch(e=>{throw parseError(e)})}async signAuthEntry(authEntry,opts){return this.runChecks().then(async()=>{const{signedAuthEntry,signerAddress,error}=await(0,index_min.signAuthEntry)(authEntry,{address:opts?.address,networkPassphrase:opts?.networkPassphrase});if(error||!signedAuthEntry)throw error;return{signedAuthEntry:buffer.Buffer.from(signedAuthEntry).toString("base64"),signerAddress}}).catch(e=>{throw parseError(e)})}async signMessage(message,opts){return this.runChecks().then(async()=>{const{signedMessage,signerAddress,error}=await(0,index_min.signMessage)(message,{address:opts?.address,networkPassphrase:opts?.networkPassphrase});if(error||!signedMessage)throw error;return{signedMessage:"string"==typeof signedMessage?signedMessage:buffer.Buffer.from(signedMessage).toString("base64"),signerAddress}}).catch(e=>{throw parseError(e)})}async getNetwork(){return this.runChecks().then(async()=>{const{network,networkPassphrase,error}=await(0,index_min.getNetwork)();if(error)throw error;return{network,networkPassphrase}}).catch(e=>{throw parseError(e)})}}var build_index_min=__webpack_require__("./node_modules/@lobstrco/signer-extension-api/build/index.min.js"),lobstr_module_console=__webpack_require__("./node_modules/console-browserify/index.js");class LobstrModule{constructor(){this.moduleType=ModuleType.HOT_WALLET,this.productId="lobstr",this.productName="LOBSTR",this.productUrl="https://lobstr.co",this.productIcon="https://stellar.creit.tech/wallet-icons/lobstr.png"}async isAvailable(){return(0,build_index_min.isConnected)()}async getAddress(){return(async()=>{if(!await(0,build_index_min.isConnected)())throw new Error("Lobstr is not connected")})().then(()=>(0,build_index_min.getPublicKey)()).then(address=>({address})).catch(e=>{throw parseError(e)})}async signTransaction(xdr,opts){return(async()=>{if(!await(0,build_index_min.isConnected)())throw new Error("Lobstr is not connected");opts?.address&&lobstr_module_console.warn("Lobstr doesn't allow specifying what public key should sign the transaction, we skip the value"),opts?.networkPassphrase&&lobstr_module_console.warn("Lobstr doesn't allow specifying the network that should be used, we skip the value")})().then(()=>(0,build_index_min.signTransaction)(xdr)).then(signedTxXdr=>({signedTxXdr})).catch(e=>{throw parseError(e)})}async signAuthEntry(){throw{code:-3,message:'Lobstr does not support the "signAuthEntry" function'}}async signMessage(){throw{code:-3,message:'Lobstr does not support the "signMessage" function'}}async getNetwork(){throw{code:-3,message:'Lobstr does not support the "getNetwork" function'}}}var rabet_module_console=__webpack_require__("./node_modules/console-browserify/index.js");class RabetModule{constructor(){this.moduleType=ModuleType.HOT_WALLET,this.productId="rabet",this.productName="Rabet",this.productUrl="https://rabet.io/",this.productIcon="https://stellar.creit.tech/wallet-icons/rabet.png"}isAvailable(){return new Promise(resolve=>{setTimeout(()=>{resolve("undefined"!=typeof window&&!!window.rabet)},100)})}async getAddress(){return(async()=>{if(!await this.isAvailable())throw new Error("Rabet is not installed")})().then(()=>window.rabet.connect()).then(({publicKey})=>({address:publicKey})).catch(e=>{throw parseError(e)})}async signTransaction(xdr,opts){return(async()=>{if(!await this.isAvailable())throw new Error("Rabet is not installed");if(opts?.address&&opts.networkPassphrase!==WalletNetwork.PUBLIC&&opts.networkPassphrase!==WalletNetwork.TESTNET)throw new Error(`Rabet doesn't support the network: ${opts.networkPassphrase}`);opts?.address&&rabet_module_console.warn("Rabet doesn't allow specifying the network that should be used, we skip the value")})().then(async()=>window.rabet.sign(xdr,opts?.networkPassphrase===WalletNetwork.PUBLIC?"mainnet":"testnet")).then(result=>({signedTxXdr:result?.xdr})).catch(e=>{throw parseError(e)})}async signAuthEntry(){throw{code:-3,message:'Rabet does not support the "signAuthEntry" function'}}async signMessage(){throw{code:-3,message:'Rabet does not support the "signMessage" function'}}async getNetwork(){throw{code:-3,message:'Rabet does not support the "getNetwork" function'}}}var nacl_fast=__webpack_require__("./node_modules/tweetnacl/nacl-fast.js"),nacl_util=__webpack_require__("./node_modules/tweetnacl-util/nacl-util.js"),interfaces_L=(L=>(L.XBULL_CONNECT="XBULL_CONNECT",L.XBULL_GET_PUBLIC_KEY="XBULL_GET_PUBLIC_KEY",L.XBULL_SIGN_XDR="XBULL_SIGN_XDR",L.XBULL_GET_NETWORK="XBULL_GET_NETWORK",L.XBULL_SIGN_MESSAGE="XBULL_SIGN_MESSAGE",L.XBULL_INITIAL_RESPONSE="XBULL_INITIAL_RESPONSE",L.XBULL_CONNECT_RESPONSE="XBULL_CONNECT_RESPONSE",L.XBULL_SIGN="XBULL_SIGN",L.XBULL_SIGN_RESPONSE="XBULL_SIGN_RESPONSE",L.XBULL_SIGN_MESSAGE_RESPONSE="XBULL_SIGN_MESSAGE_RESPONSE",L))(interfaces_L||{});function interfaces_(L){return!!L.error}var Action=function(_super){function Action(scheduler,work){return _super.call(this)||this}return(0,tslib_es6.C6)(Action,_super),Action.prototype.schedule=function(state,delay){return void 0===delay&&(delay=0),this},Action}(Subscription),intervalProvider={setInterval:function(handler,timeout){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];var delegate=intervalProvider.delegate;return(null==delegate?void 0:delegate.setInterval)?delegate.setInterval.apply(delegate,(0,tslib_es6.fX)([handler,timeout],(0,tslib_es6.zs)(args))):setInterval.apply(void 0,(0,tslib_es6.fX)([handler,timeout],(0,tslib_es6.zs)(args)))},clearInterval:function(handle){var delegate=intervalProvider.delegate;return((null==delegate?void 0:delegate.clearInterval)||clearInterval)(handle)},delegate:void 0},AsyncAction=function(_super){function AsyncAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this.pending=!1,_this}return(0,tslib_es6.C6)(AsyncAction,_super),AsyncAction.prototype.schedule=function(state,delay){var _a;if(void 0===delay&&(delay=0),this.closed)return this;this.state=state;var id=this.id,scheduler=this.scheduler;return null!=id&&(this.id=this.recycleAsyncId(scheduler,id,delay)),this.pending=!0,this.delay=delay,this.id=null!==(_a=this.id)&&void 0!==_a?_a:this.requestAsyncId(scheduler,this.id,delay),this},AsyncAction.prototype.requestAsyncId=function(scheduler,_id,delay){return void 0===delay&&(delay=0),intervalProvider.setInterval(scheduler.flush.bind(scheduler,this),delay)},AsyncAction.prototype.recycleAsyncId=function(_scheduler,id,delay){if(void 0===delay&&(delay=0),null!=delay&&this.delay===delay&&!1===this.pending)return id;null!=id&&intervalProvider.clearInterval(id)},AsyncAction.prototype.execute=function(state,delay){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var error=this._execute(state,delay);if(error)return error;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},AsyncAction.prototype._execute=function(state,_delay){var errorValue,errored=!1;try{this.work(state)}catch(e){errored=!0,errorValue=e||new Error("Scheduled action threw falsy error")}if(errored)return this.unsubscribe(),errorValue},AsyncAction.prototype.unsubscribe=function(){if(!this.closed){var id=this.id,scheduler=this.scheduler,actions=scheduler.actions;this.work=this.state=this.scheduler=null,this.pending=!1,arrRemove(actions,this),null!=id&&(this.id=this.recycleAsyncId(scheduler,id,null)),this.delay=null,_super.prototype.unsubscribe.call(this)}},AsyncAction}(Action),dateTimestampProvider={now:function(){return(dateTimestampProvider.delegate||Date).now()},delegate:void 0},Scheduler=function(){function Scheduler(schedulerActionCtor,now){void 0===now&&(now=Scheduler.now),this.schedulerActionCtor=schedulerActionCtor,this.now=now}return Scheduler.prototype.schedule=function(work,delay,state){return void 0===delay&&(delay=0),new this.schedulerActionCtor(this,work).schedule(state,delay)},Scheduler.now=dateTimestampProvider.now,Scheduler}(),async_async=new(function(_super){function AsyncScheduler(SchedulerAction,now){void 0===now&&(now=Scheduler.now);var _this=_super.call(this,SchedulerAction,now)||this;return _this.actions=[],_this._active=!1,_this}return(0,tslib_es6.C6)(AsyncScheduler,_super),AsyncScheduler.prototype.flush=function(action){var actions=this.actions;if(this._active)actions.push(action);else{var error;this._active=!0;do{if(error=action.execute(action.state,action.delay))break}while(action=actions.shift());if(this._active=!1,error){for(;action=actions.shift();)action.unsubscribe();throw error}}},AsyncScheduler}(Scheduler))(AsyncAction);function isScheduler(value){return value&&isFunction_isFunction(value.schedule)}function timer(dueTime,intervalOrScheduler,scheduler){void 0===dueTime&&(dueTime=0),void 0===scheduler&&(scheduler=async_async);var intervalDuration=-1;return null!=intervalOrScheduler&&(isScheduler(intervalOrScheduler)?scheduler=intervalOrScheduler:intervalDuration=intervalOrScheduler),new Observable_Observable(function(subscriber){var due=function isValidDate(value){return value instanceof Date&&!isNaN(value)}(dueTime)?+dueTime-scheduler.now():dueTime;due<0&&(due=0);var n=0;return scheduler.schedule(function(){subscriber.closed||(subscriber.next(n++),0<=intervalDuration?this.schedule(void 0,intervalDuration):subscriber.complete())},due)})}function takeUntil(notifier){return operate(function(source,subscriber){innerFrom(notifier).subscribe(createOperatorSubscriber(subscriber,function(){return subscriber.complete()},noop)),!subscriber.closed&&source.subscribe(subscriber)})}function last(arr){return arr[arr.length-1]}function executeSchedule(parentSubscription,scheduler,work,delay,repeat){void 0===delay&&(delay=0),void 0===repeat&&(repeat=!1);var scheduleSubscription=scheduler.schedule(function(){work(),repeat?parentSubscription.add(this.schedule(null,delay)):this.unsubscribe()},delay);if(parentSubscription.add(scheduleSubscription),!repeat)return scheduleSubscription}function observeOn(scheduler,delay){return void 0===delay&&(delay=0),operate(function(source,subscriber){source.subscribe(createOperatorSubscriber(subscriber,function(value){return executeSchedule(subscriber,scheduler,function(){return subscriber.next(value)},delay)},function(){return executeSchedule(subscriber,scheduler,function(){return subscriber.complete()},delay)},function(err){return executeSchedule(subscriber,scheduler,function(){return subscriber.error(err)},delay)}))})}function subscribeOn(scheduler,delay){return void 0===delay&&(delay=0),operate(function(source,subscriber){subscriber.add(scheduler.schedule(function(){return source.subscribe(subscriber)},delay))})}function scheduleAsyncIterable(input,scheduler){if(!input)throw new Error("Iterable cannot be null");return new Observable_Observable(function(subscriber){executeSchedule(subscriber,scheduler,function(){var iterator=input[Symbol.asyncIterator]();executeSchedule(subscriber,scheduler,function(){iterator.next().then(function(result){result.done?subscriber.complete():subscriber.next(result.value)})},0,!0)})})}function scheduled(input,scheduler){if(null!=input){if(isInteropObservable(input))return function scheduleObservable(input,scheduler){return innerFrom(input).pipe(subscribeOn(scheduler),observeOn(scheduler))}(input,scheduler);if(isArrayLike(input))return function scheduleArray(input,scheduler){return new Observable_Observable(function(subscriber){var i=0;return scheduler.schedule(function(){i===input.length?subscriber.complete():(subscriber.next(input[i++]),subscriber.closed||this.schedule())})})}(input,scheduler);if(isPromise(input))return function schedulePromise(input,scheduler){return innerFrom(input).pipe(subscribeOn(scheduler),observeOn(scheduler))}(input,scheduler);if(isAsyncIterable(input))return scheduleAsyncIterable(input,scheduler);if(isIterable(input))return function scheduleIterable(input,scheduler){return new Observable_Observable(function(subscriber){var iterator;return executeSchedule(subscriber,scheduler,function(){iterator=input[iterator_iterator](),executeSchedule(subscriber,scheduler,function(){var _a,value,done;try{value=(_a=iterator.next()).value,done=_a.done}catch(err){return void subscriber.error(err)}done?subscriber.complete():subscriber.next(value)},0,!0)}),function(){return isFunction_isFunction(null==iterator?void 0:iterator.return)&&iterator.return()}})}(input,scheduler);if(isReadableStreamLike(input))return function scheduleReadableStreamLike(input,scheduler){return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input),scheduler)}(input,scheduler)}throw createInvalidObservableTypeError(input)}function of(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var scheduler=function popScheduler(args){return isScheduler(last(args))?args.pop():void 0}(args);return function from(input,scheduler){return scheduler?scheduled(input,scheduler):innerFrom(input)}(args,scheduler)}function throwError(errorOrErrorFactory,scheduler){var errorFactory=isFunction_isFunction(errorOrErrorFactory)?errorOrErrorFactory:function(){return errorOrErrorFactory},init=function(subscriber){return subscriber.error(errorFactory())};return new Observable_Observable(scheduler?function(subscriber){return scheduler.schedule(init,0,subscriber)}:init)}class mobile_sdk_r{constructor(){this.isConnected=!1}sendEventToContentScript(e,r,o){return new Promise(s=>{const t=e=>{e.source===window&&e.data&&e.origin===window.origin&&e.data.eventId===o&&(s(e),window.removeEventListener("message",t,!1))};window.addEventListener("message",t,!1),window.webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({type:e,eventId:o,detail:r}))})}async enableConnection(){const r={origin:window.origin,host:window.location.host,permissions:{canRequestPublicKey:!0,canRequestSign:!0}},o=await this.sendEventToContentScript(interfaces_L.XBULL_CONNECT,r,crypto.randomUUID()),{detail:s}=o.data;if(!s||s.error)throw{code:s?.code||-1,message:s?.errorMessage||"Unexpected error"};this.isConnected=!0}async getAddress(){try{await this.enableConnection()}catch(e){return{error:{code:e?.code||-1,message:e?.message||"Unexpected error"}}}const r={origin:window.origin,host:window.location.host},o=await this.sendEventToContentScript(interfaces_L.XBULL_GET_PUBLIC_KEY,r,crypto.randomUUID()),{detail:s}=o.data;return!s||s.error?{error:{code:s?.code||-1,message:s?.errorMessage||"Unexpected error"}}:{address:s.payload}}async signTransaction(r){if(r.opts?.submit||r.opts?.submitUrl)return{error:{code:-1,message:"Parameters `submit` and `submitUrl` are not supported"}};try{await this.enableConnection()}catch(e){return{error:{code:e?.code||-1,message:e?.message||"Unexpected error"}}}const o={origin:window.origin,host:window.location.host,network:r.opts?.networkPassphrase,publicKey:r.opts?.address,xdr:r.xdr,xdrType:"Transaction"},s=await this.sendEventToContentScript(interfaces_L.XBULL_SIGN_XDR,o,crypto.randomUUID()),{detail:t}=s.data;return!t||t.error?{error:{code:t?.code||-1,message:t?.errorMessage||"Unexpected error"}}:{signedTxXdr:t.payload.signedXdr,signerAddress:t.payload.signerAddress}}async signMessage(r,o){if(!r)return{error:{code:-1,message:"The message must be defined."}};try{await this.enableConnection()}catch(e){return{error:{code:e?.code||-1,message:e?.message||"Unexpected error"}}}const s={origin:window.origin,host:window.location.host,message:r,publicKey:o?.address,network:o?.networkPassphrase},t=await this.sendEventToContentScript(interfaces_L.XBULL_SIGN_MESSAGE,s,crypto.randomUUID()),{detail:n}=t.data;return!n||n.error?{error:{code:n?.code||-1,message:n?.errorMessage||"Unexpected error"}}:{signedMessage:n.payload.signedMessage,signerAddress:n.payload.signerAddress}}async getNetwork(){try{await this.enableConnection()}catch(e){return{error:{code:e?.code||-1,message:e?.message||"Unexpected error"}}}const r={origin:window.origin,host:window.location.host},o=await this.sendEventToContentScript(interfaces_L.XBULL_GET_NETWORK,r,crypto.randomUUID()),{detail:s}=o.data;return!s||s.error?{error:{code:s?.code||-1,message:s?.errorMessage||"Unexpected error"}}:{network:s.payload.network,networkPassphrase:s.payload.networkPassphrase}}}class xbull_wallet_connect_w{constructor(o){this.closeCurrentPromises$=new Subject,this.closeObservables$=new Subject,this.initialResponse$=new Subject,this.initialResponseCompleted$=new Subject,this.connectResponse$=new Subject,this.connectResult$=new Subject,this.signResponse$=new Subject,this.signResult$=new Subject,this.signMessageResponse$=new Subject,this.signMessageResult$=new Subject,this.closeCurrentPromisesSubscription=timer(1e3,1e3).pipe(takeUntil(this.closeObservables$)).subscribe(()=>{this.target?.closed&&this.closeCurrentPromises$.next()}),this.onInititalResponseSubscription=this.initialResponse$.pipe(takeUntil(this.closeObservables$)).subscribe(e=>{const s=this.decryptFromReceiver({oneTimeCode:e.data.oneTimeCode,payload:e.data.message,senderPublicKey:e.data.publicKey});JSON.parse(s).providedSession===this.session()&&(this.targetPublicKey=e.data.publicKey,this.initialResponseCompleted$.next())}),this.onConnectResponseSubscription=this.connectResponse$.pipe(takeUntil(this.closeObservables$)).subscribe(e=>{if(!this.targetPublicKey)return void this.connectResult$.next({success:!1,message:"Wallet encryption public key is not provided, request rejected."});if(!e.data.success)return void this.connectResult$.next({success:!1,message:"Request rejected from the wallet"});const s=this.decryptFromReceiver({oneTimeCode:e.data.oneTimeCode,payload:e.data.message,senderPublicKey:this.targetPublicKey}),t=JSON.parse(s);this.connectResult$.next({success:!0,publicKey:t.publicKey})}),this.onSignResponseSubscription=this.signResponse$.pipe(takeUntil(this.closeObservables$)).subscribe(e=>{if(!this.targetPublicKey)return void this.signResult$.next({success:!1,message:"Wallet encryption public key is not provided, request rejected."});if(!e.data.success)return void this.signResult$.next({success:!1,message:"Request rejected from the wallet"});const s=this.decryptFromReceiver({oneTimeCode:e.data.oneTimeCode,payload:e.data.message,senderPublicKey:this.targetPublicKey}),t=JSON.parse(s);this.signResult$.next({success:!0,xdr:t.xdr})}),this.onSignMessageResponseSubscription=this.signMessageResponse$.pipe(takeUntil(this.closeObservables$)).subscribe(e=>{if(!this.targetPublicKey)return void this.signMessageResult$.next({success:!1,message:"Wallet encryption public key is not provided, request rejected."});if(!e.data.success)return void this.signMessageResult$.next({success:!1,message:"Request rejected from the wallet"});const s=this.decryptFromReceiver({oneTimeCode:e.data.oneTimeCode,payload:e.data.message,senderPublicKey:this.targetPublicKey}),t=JSON.parse(s);this.signMessageResult$.next({success:!0,...t})}),this.preferredTarget=o?.preferredTarget||"extension",this.walletUrl=o?.url||"https://wallet.xbull.app/connect";const d=nacl_fast.box.keyPair(),u=(0,nacl_util.encodeBase64)((0,nacl_fast.randomBytes)(24));this.encryptForReceiver=r=>{const n=(0,nacl_fast.randomBytes)(24),o=(0,nacl_fast.box)((0,nacl_util.decodeUTF8)(r.data),n,r.receiverPublicKey,d.secretKey);return{message:(0,nacl_util.encodeBase64)(o),oneTimeCode:(0,nacl_util.encodeBase64)(n)}},this.decryptFromReceiver=s=>{const t=nacl_fast.box.open((0,nacl_util.decodeBase64)(s.payload),(0,nacl_util.decodeBase64)(s.oneTimeCode),(0,nacl_util.decodeBase64)(s.senderPublicKey),d.secretKey);if(!t)throw new Error("Decrypted message is null");return(0,nacl_util.encodeUTF8)(t)},this.publicKey=()=>d.publicKey,this.session=()=>u.slice();const g=e=>{switch(e.data.type){case interfaces_L.XBULL_INITIAL_RESPONSE:this.initialResponse$.next(e);break;case interfaces_L.XBULL_CONNECT_RESPONSE:this.connectResponse$.next(e);break;case interfaces_L.XBULL_SIGN_RESPONSE:this.signResponse$.next(e);break;case interfaces_L.XBULL_SIGN_MESSAGE_RESPONSE:this.signMessageResponse$.next(e)}};window.addEventListener("message",g),this.closeObservables$.asObservable().pipe(take(1)).subscribe(()=>{window.removeEventListener("message",g)})}openWallet(){return this.target&&!this.target.closed&&(this.target.close(),this.target=null,this.closeCurrentPromises$.next()),this.target=window.open(`${this.walletUrl}?public=${encodeURIComponent((0,nacl_util.encodeBase64)(this.publicKey()))}&session=${encodeURIComponent(this.session())}`,"xBull_Wallet_app","width=380,height=640,left=100,top=100"),firstValueFrom_firstValueFrom(this.initialResponseCompleted$.pipe(takeUntil(this.closeCurrentPromises$)).pipe(takeUntil(this.closeObservables$)))}closeWallet(){this.target&&(this.target?.close(),this.target=null)}async connect(e={canRequestPublicKey:!0,canRequestSign:!0}){const s=window?.webkit?.messageHandlers?.cordova_iab?new mobile_sdk_r:window.xBullSDK;if(s&&"extension"===this.preferredTarget){const e=await s.getAddress();if(interfaces_(e))throw e.error;return e.address}{if(await this.openWallet(),!this.target||!this.targetPublicKey)throw new Error("xBull Wallet is not open, we can't connect with it");const{message:s,oneTimeCode:t}=this.encryptForReceiver({data:JSON.stringify(e),receiverPublicKey:(0,nacl_util.decodeBase64)(this.targetPublicKey)}),i={type:interfaces_L.XBULL_CONNECT,message:s,oneTimeCode:t};this.target.postMessage(i,"*");const n=this.connectResult$.asObservable().pipe(switchMap(e=>e.success?(this.closeWallet(),of(e.publicKey)):(this.closeWallet(),throwError(()=>new Error(e.message))))).pipe(take(1)).pipe(takeUntil(this.closeCurrentPromises$)).pipe(takeUntil(this.closeObservables$));return firstValueFrom_firstValueFrom(n)}}async sign(e){const s=window?.webkit?.messageHandlers?.cordova_iab?new mobile_sdk_r:window.xBullSDK;if(s&&"extension"===this.preferredTarget){const t=await s.signTransaction({xdr:e.xdr,opts:{networkPassphrase:e.network,address:e.publicKey}});if(interfaces_(t))throw t.error;return t.signedTxXdr}{if(await this.openWallet(),!this.target||!this.targetPublicKey)throw new Error("xBull Wallet is not open, we can't connect with it");if("string"!=typeof e.xdr)throw new Error("XDR provided needs to be a string value");const{message:s,oneTimeCode:t}=this.encryptForReceiver({data:JSON.stringify(e),receiverPublicKey:(0,nacl_util.decodeBase64)(this.targetPublicKey)}),i={type:interfaces_L.XBULL_SIGN,message:s,oneTimeCode:t};this.target.postMessage(i,"*");const n=this.signResult$.asObservable().pipe(switchMap(e=>e.success?(this.closeWallet(),of(e.xdr)):(this.closeWallet(),throwError(()=>new Error(e.message))))).pipe(take(1)).pipe(takeUntil(this.closeCurrentPromises$)).pipe(takeUntil(this.closeObservables$));return firstValueFrom_firstValueFrom(n)}}async signMessage(e,s){const t=window?.webkit?.messageHandlers?.cordova_iab?new mobile_sdk_r:window.xBullSDK;if(t&&"extension"===this.preferredTarget){const i=await t.signMessage(e,s);if(interfaces_(i))throw i.error;return i}{if(await this.openWallet(),!this.target||!this.targetPublicKey)throw new Error("xBull Wallet is not open, we can't connect with it");if("string"!=typeof e)throw new Error("XDR provided needs to be a string value");const t=this.encryptForReceiver({data:JSON.stringify({message:e,opts:s}),receiverPublicKey:(0,nacl_util.decodeBase64)(this.targetPublicKey)}),i={type:interfaces_L.XBULL_SIGN_MESSAGE,message:t.message,oneTimeCode:t.oneTimeCode};this.target.postMessage(i,"*");const n=this.signMessageResult$.asObservable().pipe(switchMap(e=>e.success?(this.closeWallet(),of({signedMessage:e.signedMessage,signerAddress:e.signerAddress})):(this.closeWallet(),throwError(()=>new Error(e.message))))).pipe(take(1)).pipe(takeUntil(this.closeCurrentPromises$)).pipe(takeUntil(this.closeObservables$));return firstValueFrom_firstValueFrom(n)}}closeConnections(){this.closeObservables$.next(),this.closeCurrentPromises$.next(),this.closeObservables$.complete(),this.closeCurrentPromises$.complete()}}class xBullModule{constructor(){this.moduleType=ModuleType.HOT_WALLET,this.productId="xbull",this.productName="xBull",this.productUrl="https://xbull.app",this.productIcon="https://stellar.creit.tech/wallet-icons/xbull.png"}async isAvailable(){return!0}async getAddress(){try{const bridge=new xbull_wallet_connect_w,publicKey=await bridge.connect();return bridge.closeConnections(),{address:publicKey}}catch(e){throw parseError(e)}}async signTransaction(xdr,opts){try{const bridge=new xbull_wallet_connect_w,signedXdr=await bridge.sign({xdr,publicKey:opts?.address,network:opts?.networkPassphrase});return bridge.closeConnections(),{signedTxXdr:signedXdr,signerAddress:opts?.address}}catch(e){throw parseError(e)}}async signAuthEntry(){throw{code:-3,message:'xBull does not support the "signAuthEntry" function'}}async signMessage(message,opts){try{const bridge=new xbull_wallet_connect_w,result=await bridge.signMessage(message,{address:opts?.address,networkPassphrase:opts?.networkPassphrase});return bridge.closeConnections(),result}catch(e){throw parseError(e)}}async getNetwork(){throw{code:-3,message:'xBull does not support the "getNetwork" function'}}}var build=__webpack_require__("./node_modules/@hot-wallet/sdk/build/index.js");class hotwallet_module_HotWalletModule{constructor(){this.moduleType=ModuleType.HOT_WALLET,this.productId="hot-wallet",this.productName="HOT Wallet",this.productUrl="https://hot-labs.org/wallet",this.productIcon="https://storage.herewallet.app/logo.png"}async isAvailable(){return!0}async getAddress(){return await build.HOT.request("stellar:getAddress",{})}async signTransaction(xdr,opts){return await build.HOT.request("stellar:signTransaction",{xdr,accountToSign:opts?.address})}async signAuthEntry(authEntry,opts){return await build.HOT.request("stellar:signAuthEntry",{authEntry,accountToSign:opts?.address})}async signMessage(message,opts){return await build.HOT.request("stellar:signMessage",{message,accountToSign:opts?.address})}async getNetwork(){return{network:"mainnet",networkPassphrase:WalletNetwork.PUBLIC}}}class HanaModule{constructor(){this.moduleType=ModuleType.HOT_WALLET,this.productId="hana",this.productName="Hana Wallet",this.productUrl="https://hanawallet.io/",this.productIcon="https://stellar.creit.tech/wallet-icons/hana.png"}async runChecks(){if(!await this.isAvailable())throw new Error("Hana Wallet is not installed")}isAvailable(){return new Promise(resolve=>resolve("undefined"!=typeof window&&!!window.hanaWallet?.stellar))}async getAddress(){return this.runChecks().then(()=>window.hanaWallet.stellar.getPublicKey()).then(address=>({address})).catch(e=>{throw parseError(e)})}async signTransaction(xdr,opts){return this.runChecks().then(()=>window.hanaWallet.stellar.signTransaction({xdr,accountToSign:opts?.address,networkPassphrase:opts?.networkPassphrase})).then(signedTxXdr=>({signedTxXdr,signerAddress:opts?.address})).catch(e=>{throw parseError(e)})}async signAuthEntry(authEntry,opts){return this.runChecks().then(()=>window.hanaWallet.stellar.signAuthEntry({xdr:authEntry,accountToSign:opts?.address})).then(signedAuthEntry=>({signedAuthEntry,signerAddress:opts?.address})).catch(e=>{throw parseError(e)})}async signMessage(message,opts){return this.runChecks().then(()=>window.hanaWallet.stellar.signMessage({message,accountToSign:opts?.address})).then(signedMessage=>({signedMessage,signerAddress:opts?.address})).catch(e=>{throw parseError(e)})}async getNetwork(){throw{code:-3,message:'Hana does not support the "getNetwork" function'}}}class KleverModule{constructor(){this.moduleType=ModuleType.HOT_WALLET,this.productId="klever",this.productName="Klever Wallet",this.productUrl="https://klever.io/",this.productIcon="https://stellar.creit.tech/wallet-icons/klever.png"}async runChecks(){if(!await this.isAvailable())throw new Error("Klever Wallet is not installed")}isAvailable(){return new Promise(resolve=>resolve("undefined"!=typeof window&&!!window.kleverWallet?.stellar))}async getAddress(){return this.runChecks().then(()=>window.kleverWallet.stellar.getAddress()).catch(e=>{throw parseError(e)})}async signTransaction(xdr,opts){return this.runChecks().then(()=>window.kleverWallet.stellar.signTransaction(xdr,opts)).catch(e=>{throw parseError(e)})}async signAuthEntry(authEntry,opts){return this.runChecks().then(()=>window.kleverWallet.stellar.signAuthEntry(authEntry,opts)).catch(e=>{throw parseError(e)})}async signMessage(message,opts){return this.runChecks().then(()=>window.kleverWallet.stellar.signMessage(message,opts)).catch(e=>{throw parseError(e)})}async getNetwork(){return this.runChecks().then(()=>window.kleverWallet.stellar.getNetwork()).catch(e=>{throw parseError(e)})}}function allowAllModules(opts){const modules=[new AlbedoModule,new freighter_module_FreighterModule,new RabetModule,new xBullModule,new LobstrModule,new HanaModule,new hotwallet_module_HotWalletModule,new KleverModule];return opts?.filterBy?modules.filter(opts.filterBy):modules}function parseError(e){return{code:e?.error?.code||e?.code||-1,message:e?.error?.message||e?.message||"string"==typeof e&&e||"Unhandled error from the wallet",ext:e?.error?.ext||e?.ext}}},"./node_modules/@hot-wallet/sdk/build/helpers/nep0314.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,__createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.authPayloadSchema=exports.AuthPayload=void 0,exports.verifySignature=function verifySignature(request,result){const payload=new AuthPayload(request),borsh_payload=borsh.serialize(exports.authPayloadSchema,payload),to_sign=Uint8Array.from(js_sha256_1.default.sha256.array(borsh_payload));let real_signature=new Uint8Array(Buffer.from(result.signature,"base64"));return crypto_1.PublicKey.from(result.publicKey).verify(to_sign,real_signature)};const borsh=__importStar(__webpack_require__("./node_modules/borsh/lib/cjs/index.js")),js_sha256_1=__importDefault(__webpack_require__("./node_modules/js-sha256/src/sha256.js")),crypto_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/index.cjs");class AuthPayload{message;recipient;nonce;callbackUrl;tag;constructor({message,nonce,recipient}){this.tag=2147484061,this.message=message,this.nonce=nonce,this.recipient=recipient}}exports.AuthPayload=AuthPayload,exports.authPayloadSchema={struct:{tag:"u32",message:"string",nonce:{array:{type:"u8",len:32}},recipient:"string",callbackUrl:{option:"string"}}}},"./node_modules/@hot-wallet/sdk/build/helpers/proxy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRequest=exports.computeRequestId=exports.deleteRequest=exports.getResponse=exports.proxyApi=void 0;const sha1_1=__importDefault(__webpack_require__("./node_modules/sha1/sha1.js")),uuid4_1=__importDefault(__webpack_require__("./node_modules/uuid4/browser.mjs")),utils_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/index.cjs");exports.proxyApi="https://h4n.app";exports.getResponse=async id=>{const res=await fetch(`${exports.proxyApi}/${id}/response`,{headers:{"content-type":"application/json"},method:"GET"});if(!1===res.ok)throw Error(await res.text());const{data}=await res.json();return JSON.parse(data)};exports.deleteRequest=async id=>{const res=await fetch(`${exports.proxyApi}/${id}`,{headers:{"content-type":"application/json"},method:"DELETE"});if(!1===res.ok)throw Error(await res.text())};exports.computeRequestId=async request=>{const query=(0,utils_1.baseEncode)(JSON.stringify({...request,_id:(0,uuid4_1.default)()})),hashsum=(0,sha1_1.default)(query);return{requestId:Buffer.from(hashsum,"hex").toString("base64").replaceAll("/","_").replaceAll("-","+").slice(0,13),query}};exports.createRequest=async(request,signal)=>{const{query,requestId}=await(0,exports.computeRequestId)(request),res=await fetch(`${exports.proxyApi}/${requestId}/request`,{body:JSON.stringify({data:query}),headers:{"content-type":"application/json"},method:"POST",signal});if(!1===res.ok)throw Error(await res.text());return requestId}},"./node_modules/@hot-wallet/sdk/build/hot.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getExtension=exports.RequestFailed=exports.wait=void 0;const uuid4_1=__importDefault(__webpack_require__("./node_modules/uuid4/browser.mjs")),utils_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/index.cjs"),proxy_1=__webpack_require__("./node_modules/@hot-wallet/sdk/build/helpers/proxy.js");exports.wait=timeout=>new Promise(resolve=>setTimeout(resolve,timeout));class RequestFailed extends Error{payload;name="RequestFailed";constructor(payload){super(),this.payload=payload}}exports.RequestFailed=RequestFailed;let connector;exports.getExtension=()=>"undefined"==typeof window?null:window.hotExtension,"undefined"!=typeof window&&window.addEventListener("message",e=>{"hot-close"===e.data&&(connector?.remove(),connector=void 0)});exports.default=new class HOT{walletId="https://t.me/herewalletbot/app";ancestorOrigins=["http://localhost:1234","https://my.herewallet.app","https://tgapp-dev.herewallet.app","https://tgapp.herewallet.app","https://beta.herewallet.app"];connection=new Promise(resolve=>"undefined"==typeof window||window?.self===window?.top?resolve(null):void this.injectedRequest("initialized",{}).then(resolve).catch(()=>resolve(null)));get isInjected(){return"undefined"!=typeof window&&(null!=window.hotExtension?window.hotExtension.autoRun:this.ancestorOrigins.includes(window.location.ancestorOrigins?.[0]))}openInHotBrowserUrl=null;toggleOpenInHotBrowser(url){this.openInHotBrowserUrl=url}customProvider;setupEthProvider(provider){this.customProvider=provider}async injectedRequest(method,request){const id=(0,uuid4_1.default)();return new Promise((resolve,reject)=>{const handler=e=>{if(e.data.id===id)return window?.removeEventListener("message",handler),e.data.success?resolve(e.data.payload):reject(e.data.payload)};window?.parent.postMessage({$hot:!0,method,request,id},"*"),window?.addEventListener("message",handler)})}subscribe(event,cb){return window.hotExtension?window.hotExtension.subscribe(event,cb):()=>{}}async request(method,request){if(null!=window.hotExtension)return window.hotExtension.request(method,request);if(this.isInjected)return this.injectedRequest(method,request);const id=(0,uuid4_1.default)(),WebApp=window?.Telegram?.WebApp,requestId=await(0,proxy_1.createRequest)({inside:!!this.openInHotBrowserUrl||"ethereum"===method&&null==this.customProvider,origin:"string"==typeof this.openInHotBrowserUrl?this.openInHotBrowserUrl:location.href,$hot:!0,method,request,id}),link=`${this.walletId}?startapp=hotconnect-${(0,utils_1.baseEncode)(requestId)}`;if(WebApp)WebApp?.openTelegramLink(link);else{(widget=>{connector?.remove(),connector=document.createElement("div");const iframe=document.createElement("iframe");connector?.appendChild(iframe),iframe.src=widget,iframe.allow="usb",iframe.style.border="none",iframe.style.borderRadius="16px",iframe.style.background="#fff",iframe.style.overflow="hidden",iframe.style.background="#1D1F20",iframe.style.border="1px solid #2C3034",iframe.style.width="375px",iframe.style.height="560px",iframe.onclick=e=>e.stopPropagation(),connector.style.padding="16px",connector.style.zIndex="100000000000000",connector.style.position="fixed",connector.style.display="flex",connector.style.justifyContent="center",connector.style.alignItems="center",connector.style.top="0",connector.style.left="0",connector.style.width="100%",connector.style.height="100%",connector.style.background="rgba(0, 0, 0, 0.1)",connector.style.backdropFilter="blur(24px)",connector.onclick=()=>{connector?.remove(),connector=void 0},document.body.appendChild(connector)})(`${"https://hot-labs.org/hot-widget/index.html"}?hotconnect-${(0,utils_1.baseEncode)(requestId)}`)}const poolResponse=async()=>{await(0,exports.wait)(3e3);const data=await(0,proxy_1.getResponse)(requestId).catch(()=>null);if(null==data)return await poolResponse();if(data.success)return data.payload;throw new RequestFailed(data.payload)},result=await poolResponse();return connector?.remove(),result}}},"./node_modules/@hot-wallet/sdk/build/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestFailed=exports.HOT=exports.authPayloadSchema=exports.AuthPayload=exports.verifySignature=void 0;var nep0314_1=__webpack_require__("./node_modules/@hot-wallet/sdk/build/helpers/nep0314.js");Object.defineProperty(exports,"verifySignature",{enumerable:!0,get:function(){return nep0314_1.verifySignature}}),Object.defineProperty(exports,"AuthPayload",{enumerable:!0,get:function(){return nep0314_1.AuthPayload}}),Object.defineProperty(exports,"authPayloadSchema",{enumerable:!0,get:function(){return nep0314_1.authPayloadSchema}});var hot_1=__webpack_require__("./node_modules/@hot-wallet/sdk/build/hot.js");Object.defineProperty(exports,"HOT",{enumerable:!0,get:function(){return __importDefault(hot_1).default}}),Object.defineProperty(exports,"RequestFailed",{enumerable:!0,get:function(){return hot_1.RequestFailed}})},"./node_modules/@lobstrco/signer-extension-api/build/index.min.js":function(module,__unused_webpack_exports,__webpack_require__){var console=__webpack_require__("./node_modules/console-browserify/index.js");module.exports=(()=>{"use strict";var e,n,o,t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},i={};t.r(i),t.d(i,{default:()=>S,getPublicKey:()=>c,isBrowser:()=>T,isConnected:()=>a,signTransaction:()=>d}),function(e){e.LOAD_STATE="LOAD_STATE",e.LOGIN="LOGIN",e.LOGOUT="LOGOUT",e.SIGN_TRANSACTION="SIGN_TRANSACTION",e.REJECT_TRANSACTION="REJECT_TRANSACTION",e.GRANT_ACCESS="GRANT_ACCESS",e.REJECT_ACCESS="REJECT_ACCESS"}(e||(e={})),function(e){e.REQUEST_ACCESS="REQUEST_ACCESS",e.SIGN_TRANSACTION="SUBMIT_TRANSACTION",e.REQUEST_CONNECTION_STATUS="REQUEST_CONNECTION_STATUS"}(n||(n={})),function(e){e.pending="pending",e.signed="signed",e.rejected="rejected"}(o||(o={}));const r="LOBSTR_CONNECTION_KEY",s=e=>{const o=Date.now()+Math.random();return window.postMessage({source:"LOBSTR_EXTERNAL_MSG_REQUEST",messageId:o,...e},window.location.origin),new Promise(t=>{let i=0;e.type===n.REQUEST_CONNECTION_STATUS&&(i=setTimeout(()=>{t({isConnected:!1}),window.removeEventListener("message",r)},2e3));const r=e=>{var n,s;e.source===window&&"LOBSTR_EXTERNAL_MSG_RESPONSE"===(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.source)&&(null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.messagedId)===o&&(t(e.data),window.removeEventListener("message",r),clearTimeout(i))};window.addEventListener("message",r,!1)})},c=async()=>{if(!T)return"";const{publicKey:e,connectionKey:o}=await(async()=>{let e={publicKey:"",error:"",connectionKey:""};try{e=await s({type:n.REQUEST_ACCESS})}catch(e){console.error(e)}const{publicKey:o,connectionKey:t,error:i}=e;if(i)throw i;return{publicKey:o,connectionKey:t}})();return(e=>{var n;null===(n=null===window||void 0===window?void 0:window.sessionStorage)||void 0===n||n.setItem(r,e)})(o),e},d=async e=>{if(!T)return"";const o=(null===(t=null===window||void 0===window?void 0:window.sessionStorage)||void 0===t?void 0:t.getItem(r))||"";var t;return await(async(e,o)=>{let t={signedTransaction:"",error:""};try{t=await s({transactionXdr:e,connectionKey:o,type:n.SIGN_TRANSACTION})}catch(e){throw console.error(e),e}const{signedTransaction:i,error:r}=t;if(r)throw r;return i})(e,o)},a=async()=>!!T&&(window.lobstrSignerExtension?window.lobstrSignerExtension:await(async()=>{let e={isConnected:!1};try{e=await s({type:n.REQUEST_CONNECTION_STATUS})}catch(e){console.error(e)}return e.isConnected})()),T="undefined"!=typeof window,S={getPublicKey:c,signTransaction:d,isConnected:a};return i})()},"./node_modules/@near-js/crypto/lib/commonjs/constants.cjs":(__unused_webpack_module,exports)=>{"use strict";var KeyType;Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeySize=exports.KeyType=void 0,function(KeyType){KeyType[KeyType.ED25519=0]="ED25519",KeyType[KeyType.SECP256K1=1]="SECP256K1"}(KeyType||(exports.KeyType=KeyType={})),exports.KeySize={SECRET_KEY:32,ED25519_PUBLIC_KEY:32,SECP256k1_PUBLIC_KEY:64}},"./node_modules/@near-js/crypto/lib/commonjs/index.cjs":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PublicKey=exports.KeyPairSecp256k1=exports.KeyPairEd25519=exports.KeyPair=exports.KeyType=void 0;var constants_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/constants.cjs");Object.defineProperty(exports,"KeyType",{enumerable:!0,get:function(){return constants_1.KeyType}});var key_pair_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/key_pair.cjs");Object.defineProperty(exports,"KeyPair",{enumerable:!0,get:function(){return key_pair_1.KeyPair}});var key_pair_ed25519_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/key_pair_ed25519.cjs");Object.defineProperty(exports,"KeyPairEd25519",{enumerable:!0,get:function(){return key_pair_ed25519_1.KeyPairEd25519}});var key_pair_secp256k1_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/key_pair_secp256k1.cjs");Object.defineProperty(exports,"KeyPairSecp256k1",{enumerable:!0,get:function(){return key_pair_secp256k1_1.KeyPairSecp256k1}});var public_key_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/public_key.cjs");Object.defineProperty(exports,"PublicKey",{enumerable:!0,get:function(){return public_key_1.PublicKey}})},"./node_modules/@near-js/crypto/lib/commonjs/key_pair.cjs":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyPair=void 0;const key_pair_base_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/key_pair_base.cjs"),key_pair_ed25519_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/key_pair_ed25519.cjs"),key_pair_secp256k1_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/key_pair_secp256k1.cjs");class KeyPair extends key_pair_base_1.KeyPairBase{static fromRandom(curve){switch(curve.toUpperCase()){case"ED25519":return key_pair_ed25519_1.KeyPairEd25519.fromRandom();case"SECP256K1":return key_pair_secp256k1_1.KeyPairSecp256k1.fromRandom();default:throw new Error(`Unknown curve ${curve}`)}}static fromString(encodedKey){const parts=encodedKey.split(":");if(2!==parts.length)throw new Error("Invalid encoded key format, must be <curve>:<encoded key>");switch(parts[0].toUpperCase()){case"ED25519":return new key_pair_ed25519_1.KeyPairEd25519(parts[1]);case"SECP256K1":return new key_pair_secp256k1_1.KeyPairSecp256k1(parts[1]);default:throw new Error(`Unknown curve: ${parts[0]}`)}}}exports.KeyPair=KeyPair},"./node_modules/@near-js/crypto/lib/commonjs/key_pair_base.cjs":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyPairBase=void 0;exports.KeyPairBase=class KeyPairBase{}},"./node_modules/@near-js/crypto/lib/commonjs/key_pair_ed25519.cjs":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyPairEd25519=void 0;const utils_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/index.cjs"),ed25519_1=__webpack_require__("./node_modules/@noble/curves/ed25519.js"),randombytes_1=__importDefault(__webpack_require__("./node_modules/randombytes/browser.js")),constants_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/constants.cjs"),key_pair_base_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/key_pair_base.cjs"),public_key_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/public_key.cjs");class KeyPairEd25519 extends key_pair_base_1.KeyPairBase{publicKey;secretKey;extendedSecretKey;constructor(extendedSecretKey){super();const decoded=(0,utils_1.baseDecode)(extendedSecretKey),secretKey=new Uint8Array(decoded.slice(0,constants_1.KeySize.SECRET_KEY)),publicKey=ed25519_1.ed25519.getPublicKey(new Uint8Array(secretKey));this.publicKey=new public_key_1.PublicKey({keyType:constants_1.KeyType.ED25519,data:publicKey}),this.secretKey=(0,utils_1.baseEncode)(secretKey),this.extendedSecretKey=extendedSecretKey}static fromRandom(){const secretKey=(0,randombytes_1.default)(constants_1.KeySize.SECRET_KEY),publicKey=ed25519_1.ed25519.getPublicKey(new Uint8Array(secretKey)),extendedSecretKey=new Uint8Array([...secretKey,...publicKey]);return new KeyPairEd25519((0,utils_1.baseEncode)(extendedSecretKey))}sign(message){return{signature:ed25519_1.ed25519.sign(message,(0,utils_1.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(message,signature){return this.publicKey.verify(message,signature)}toString(){return`ed25519:${this.extendedSecretKey}`}getPublicKey(){return this.publicKey}}exports.KeyPairEd25519=KeyPairEd25519},"./node_modules/@near-js/crypto/lib/commonjs/key_pair_secp256k1.cjs":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyPairSecp256k1=void 0;const utils_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/index.cjs"),randombytes_1=__importDefault(__webpack_require__("./node_modules/randombytes/browser.js")),secp256k1_1=__importDefault(__webpack_require__("./node_modules/secp256k1/elliptic.js")),constants_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/constants.cjs"),key_pair_base_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/key_pair_base.cjs"),public_key_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/public_key.cjs");class KeyPairSecp256k1 extends key_pair_base_1.KeyPairBase{publicKey;secretKey;extendedSecretKey;constructor(extendedSecretKey){super();const decoded=(0,utils_1.baseDecode)(extendedSecretKey),secretKey=new Uint8Array(decoded.slice(0,constants_1.KeySize.SECRET_KEY)),withHeader=secp256k1_1.default.publicKeyCreate(new Uint8Array(secretKey),!1),data=withHeader.subarray(1,withHeader.length);this.publicKey=new public_key_1.PublicKey({keyType:constants_1.KeyType.SECP256K1,data}),this.secretKey=(0,utils_1.baseEncode)(secretKey),this.extendedSecretKey=extendedSecretKey}static fromRandom(){const secretKey=(0,randombytes_1.default)(constants_1.KeySize.SECRET_KEY),withHeader=secp256k1_1.default.publicKeyCreate(new Uint8Array(secretKey),!1),publicKey=withHeader.subarray(1,withHeader.length),extendedSecretKey=new Uint8Array([...secretKey,...publicKey]);return new KeyPairSecp256k1((0,utils_1.baseEncode)(extendedSecretKey))}sign(message){const{signature,recid}=secp256k1_1.default.ecdsaSign(message,(0,utils_1.baseDecode)(this.secretKey));return{signature:new Uint8Array([...signature,recid]),publicKey:this.publicKey}}verify(message,signature){return this.publicKey.verify(message,signature)}toString(){return`secp256k1:${this.extendedSecretKey}`}getPublicKey(){return this.publicKey}}exports.KeyPairSecp256k1=KeyPairSecp256k1},"./node_modules/@near-js/crypto/lib/commonjs/public_key.cjs":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PublicKey=void 0;const utils_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/index.cjs"),ed25519_1=__webpack_require__("./node_modules/@noble/curves/ed25519.js"),secp256k1_1=__importDefault(__webpack_require__("./node_modules/secp256k1/elliptic.js")),constants_1=__webpack_require__("./node_modules/@near-js/crypto/lib/commonjs/constants.cjs");class Enum{constructor(properties){if(1!==Object.keys(properties).length)throw new Error("Enum can only take single value");Object.keys(properties).map(key=>{this[key]=properties[key]})}}class PublicKey extends Enum{enum;ed25519Key;secp256k1Key;constructor(publicKey){const keyName=function resolveEnumKeyName(keyType){switch(keyType){case constants_1.KeyType.ED25519:return"ed25519Key";case constants_1.KeyType.SECP256K1:return"secp256k1Key";default:throw Error(`unknown type ${keyType}`)}}(publicKey.keyType);super({[keyName]:publicKey}),this[keyName]=publicKey,this.enum=keyName}static from(value){return"string"==typeof value?PublicKey.fromString(value):value}static fromString(encodedKey){const parts=encodedKey.split(":");let publicKey,keyType;if(1===parts.length)publicKey=parts[0];else{if(2!==parts.length)throw new Error("Invalid encoded key format, must be <curve>:<encoded key>");publicKey=parts[1],keyType=function str_to_key_type(keyType){switch(keyType.toLowerCase()){case"ed25519":return constants_1.KeyType.ED25519;case"secp256k1":return constants_1.KeyType.SECP256K1;default:throw new Error(`Unknown key type ${keyType}`)}}(parts[0])}const decodedPublicKey=(0,utils_1.baseDecode)(publicKey);keyType||(keyType=decodedPublicKey.length===constants_1.KeySize.SECP256k1_PUBLIC_KEY?constants_1.KeyType.SECP256K1:constants_1.KeyType.ED25519);const keySize=keyType===constants_1.KeyType.ED25519?constants_1.KeySize.ED25519_PUBLIC_KEY:constants_1.KeySize.SECP256k1_PUBLIC_KEY;if(decodedPublicKey.length!==keySize)throw new Error(`Invalid public key size (${decodedPublicKey.length}), must be ${keySize}`);return new PublicKey({keyType,data:decodedPublicKey})}toString(){const encodedKey=(0,utils_1.baseEncode)(this.data);return`${function key_type_to_str(keyType){switch(keyType){case constants_1.KeyType.ED25519:return"ed25519";case constants_1.KeyType.SECP256K1:return"secp256k1";default:throw new Error(`Unknown key type ${keyType}`)}}(this.keyType)}:${encodedKey}`}verify(message,signature){const keyType=this.keyType,data=this.data;switch(keyType){case constants_1.KeyType.ED25519:return ed25519_1.ed25519.verify(signature,message,data);case constants_1.KeyType.SECP256K1:return secp256k1_1.default.ecdsaVerify(signature.subarray(0,64),message,new Uint8Array([4,...data]));default:throw new Error(`Unknown key type: ${keyType}`)}}get keyPair(){return this.ed25519Key||this.secp256k1Key}get keyType(){return this.keyPair.keyType}get data(){return this.keyPair.data}}exports.PublicKey=PublicKey},"./node_modules/@near-js/types/lib/commonjs/assignable.cjs":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Assignable=void 0;exports.Assignable=class Assignable{constructor(properties){Object.keys(properties).map(key=>{this[key]=properties[key]})}}},"./node_modules/@near-js/types/lib/commonjs/enum.cjs":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Enum=void 0;exports.Enum=class Enum{constructor(properties){if(1!==Object.keys(properties).length)throw new Error("Enum can only take single value");Object.keys(properties).map(key=>{this[key]=properties[key]})}}},"./node_modules/@near-js/types/lib/commonjs/errors.cjs":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ErrorContext=exports.TypedError=exports.ArgumentTypeError=exports.PositionalArgsError=void 0;class PositionalArgsError extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}exports.PositionalArgsError=PositionalArgsError;class ArgumentTypeError extends Error{constructor(argName,argType,argValue){super(`Expected ${argType} for '${argName}' argument, but got '${JSON.stringify(argValue)}'`)}}exports.ArgumentTypeError=ArgumentTypeError;class TypedError extends Error{type;context;constructor(message,type,context){super(message),this.type=type||"UntypedError",this.context=context}}exports.TypedError=TypedError;exports.ErrorContext=class ErrorContext{transactionHash;constructor(transactionHash){this.transactionHash=transactionHash}}},"./node_modules/@near-js/types/lib/commonjs/index.cjs":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@near-js/types/lib/commonjs/assignable.cjs"),exports),__exportStar(__webpack_require__("./node_modules/@near-js/types/lib/commonjs/enum.cjs"),exports),__exportStar(__webpack_require__("./node_modules/@near-js/types/lib/commonjs/errors.cjs"),exports),__exportStar(__webpack_require__("./node_modules/@near-js/types/lib/commonjs/provider/index.cjs"),exports)},"./node_modules/@near-js/types/lib/commonjs/provider/index.cjs":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FinalExecutionStatusBasic=exports.ExecutionStatusBasic=exports.IdType=void 0;var light_client_1=__webpack_require__("./node_modules/@near-js/types/lib/commonjs/provider/light_client.cjs");Object.defineProperty(exports,"IdType",{enumerable:!0,get:function(){return light_client_1.IdType}});var response_1=__webpack_require__("./node_modules/@near-js/types/lib/commonjs/provider/response.cjs");Object.defineProperty(exports,"ExecutionStatusBasic",{enumerable:!0,get:function(){return response_1.ExecutionStatusBasic}}),Object.defineProperty(exports,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return response_1.FinalExecutionStatusBasic}})},"./node_modules/@near-js/types/lib/commonjs/provider/light_client.cjs":(__unused_webpack_module,exports)=>{"use strict";var IdType;Object.defineProperty(exports,"__esModule",{value:!0}),exports.IdType=void 0,function(IdType){IdType.Transaction="transaction",IdType.Receipt="receipt"}(IdType||(exports.IdType=IdType={}))},"./node_modules/@near-js/types/lib/commonjs/provider/response.cjs":(__unused_webpack_module,exports)=>{"use strict";var ExecutionStatusBasic,FinalExecutionStatusBasic;Object.defineProperty(exports,"__esModule",{value:!0}),exports.FinalExecutionStatusBasic=exports.ExecutionStatusBasic=void 0,function(ExecutionStatusBasic){ExecutionStatusBasic.Unknown="Unknown",ExecutionStatusBasic.Pending="Pending",ExecutionStatusBasic.Failure="Failure"}(ExecutionStatusBasic||(exports.ExecutionStatusBasic=ExecutionStatusBasic={})),function(FinalExecutionStatusBasic){FinalExecutionStatusBasic.NotStarted="NotStarted",FinalExecutionStatusBasic.Started="Started",FinalExecutionStatusBasic.Failure="Failure"}(FinalExecutionStatusBasic||(exports.FinalExecutionStatusBasic=FinalExecutionStatusBasic={}))},"./node_modules/@near-js/utils/lib/commonjs/constants.cjs":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_FUNCTION_CALL_GAS=void 0,exports.DEFAULT_FUNCTION_CALL_GAS=30000000000000n},"./node_modules/@near-js/utils/lib/commonjs/errors/error_messages.json":module=>{"use strict";module.exports=JSON.parse('{"GasLimitExceeded":"Exceeded the maximum amount of gas allowed to burn per contract","MethodEmptyName":"Method name is empty","WasmerCompileError":"Wasmer compilation error: {{msg}}","GuestPanic":"Smart contract panicked: {{panic_msg}}","Memory":"Error creating Wasm memory","GasExceeded":"Exceeded the prepaid gas","MethodUTF8Error":"Method name is not valid UTF8 string","BadUTF16":"String encoding is bad UTF-16 sequence","WasmTrap":"WebAssembly trap: {{msg}}","GasInstrumentation":"Gas instrumentation failed or contract has denied instructions.","InvalidPromiseIndex":"{{promise_idx}} does not correspond to existing promises","InvalidPromiseResultIndex":"Accessed invalid promise result index: {{result_idx}}","Deserialization":"Error happened while deserializing the module","MethodNotFound":"Contract method is not found","InvalidRegisterId":"Accessed invalid register id: {{register_id}}","InvalidReceiptIndex":"VM Logic returned an invalid receipt index: {{receipt_index}}","EmptyMethodName":"Method name is empty in contract call","CannotReturnJointPromise":"Returning joint promise is currently prohibited","StackHeightInstrumentation":"Stack instrumentation failed","CodeDoesNotExist":"Cannot find contract code for account {{account_id}}","MethodInvalidSignature":"Invalid method signature","IntegerOverflow":"Integer overflow happened during contract execution","MemoryAccessViolation":"MemoryAccessViolation","InvalidIteratorIndex":"Iterator index {{iterator_index}} does not exist","IteratorWasInvalidated":"Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie","InvalidAccountId":"VM Logic returned an invalid account id","Serialization":"Error happened while serializing the module","CannotAppendActionToJointPromise":"Actions can only be appended to non-joint promise.","InternalMemoryDeclared":"Internal memory declaration has been found in the module","Instantiate":"Error happened during instantiation","ProhibitedInView":"{{method_name}} is not allowed in view calls","InvalidMethodName":"VM Logic returned an invalid method name","BadUTF8":"String encoding is bad UTF-8 sequence","BalanceExceeded":"Exceeded the account balance","LinkError":"Wasm contract link error: {{msg}}","InvalidPublicKey":"VM Logic provided an invalid public key","ActorNoPermission":"Actor {{actor_id}} doesn\'t have permission to account {{account_id}} to complete the action","LackBalanceForState":"The account {{account_id}} wouldn\'t have enough balance to cover storage, required to have {{amount}} yoctoNEAR more","ReceiverMismatch":"Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.","CostOverflow":"Transaction gas or balance cost is too high","InvalidSignature":"Transaction is not signed with the given public key","AccessKeyNotFound":"Signer \\"{{account_id}}\\" doesn\'t have access key with the given public_key {{public_key}}","NotEnoughBalance":"Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}","NotEnoughAllowance":"Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}","Expired":"Transaction has expired","DeleteAccountStaking":"Account {{account_id}} is staking and can not be deleted","SignerDoesNotExist":"Signer {{signer_id}} does not exist","TriesToStake":"Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}","AddKeyAlreadyExists":"The public key {{public_key}} is already used for an existing access key","InvalidSigner":"Invalid signer account ID {{signer_id}} according to requirements","CreateAccountNotAllowed":"The new account_id {{account_id}} can\'t be created by {{predecessor_id}}","RequiresFullAccess":"The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key","TriesToUnstake":"Account {{account_id}} is not yet staked, but tried to unstake","InvalidNonce":"Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}","AccountAlreadyExists":"Can\'t create a new account {{account_id}}, because it already exists","InvalidChain":"Transaction parent block hash doesn\'t belong to the current chain","AccountDoesNotExist":"Can\'t complete the action because account {{account_id}} doesn\'t exist","AccessKeyDoesNotExist":"Can\'t complete the action because access key {{public_key}} doesn\'t exist","MethodNameMismatch":"Transaction method name {{method_name}} isn\'t allowed by the access key","DeleteAccountHasRent":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent","DeleteAccountHasEnoughBalance":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it\'s storage","InvalidReceiver":"Invalid receiver account ID {{receiver_id}} according to requirements","DeleteKeyDoesNotExist":"Account {{account_id}} tries to remove an access key that doesn\'t exist","Timeout":"Timeout exceeded","Closed":"Connection closed","ShardCongested":"Shard {{shard_id}} rejected the transaction due to congestion level {{congestion_level}}, try again later","ShardStuck":"Shard {{shard_id}} rejected the transaction because it missed {{missed_chunks}} chunks and needs to recover before accepting new transactions, try again later"}')},"./node_modules/@near-js/utils/lib/commonjs/errors/errors.cjs":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ErrorMessages=void 0;const error_messages_json_1=__importDefault(__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/errors/error_messages.json"));exports.ErrorMessages=error_messages_json_1.default},"./node_modules/@near-js/utils/lib/commonjs/errors/index.cjs":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseRpcError=exports.parseResultError=exports.getErrorTypeFromErrorMessage=exports.formatError=exports.ServerError=exports.ErrorMessages=void 0;var errors_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/errors/errors.cjs");Object.defineProperty(exports,"ErrorMessages",{enumerable:!0,get:function(){return errors_1.ErrorMessages}});var rpc_errors_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/errors/rpc_errors.cjs");Object.defineProperty(exports,"ServerError",{enumerable:!0,get:function(){return rpc_errors_1.ServerError}}),Object.defineProperty(exports,"formatError",{enumerable:!0,get:function(){return rpc_errors_1.formatError}}),Object.defineProperty(exports,"getErrorTypeFromErrorMessage",{enumerable:!0,get:function(){return rpc_errors_1.getErrorTypeFromErrorMessage}}),Object.defineProperty(exports,"parseResultError",{enumerable:!0,get:function(){return rpc_errors_1.parseResultError}}),Object.defineProperty(exports,"parseRpcError",{enumerable:!0,get:function(){return rpc_errors_1.parseRpcError}})},"./node_modules/@near-js/utils/lib/commonjs/errors/rpc_error_schema.json":module=>{"use strict";module.exports=JSON.parse('{"schema":{"AccessKeyNotFound":{"name":"AccessKeyNotFound","subtypes":[],"props":{"account_id":"","public_key":""}},"AccountAlreadyExists":{"name":"AccountAlreadyExists","subtypes":[],"props":{"account_id":""}},"AccountDoesNotExist":{"name":"AccountDoesNotExist","subtypes":[],"props":{"account_id":""}},"ActionError":{"name":"ActionError","subtypes":["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed","DeleteAccountWithLargeState","DelegateActionInvalidSignature","DelegateActionSenderDoesNotMatchTxReceiver","DelegateActionExpired","DelegateActionAccessKeyError","DelegateActionInvalidNonce","DelegateActionNonceTooLarge"],"props":{"index":""}},"ActionsValidationError":{"name":"ActionsValidationError","subtypes":["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas","DelegateActionMustBeOnlyOne","UnsupportedProtocolFeature"],"props":{}},"ActorNoPermission":{"name":"ActorNoPermission","subtypes":[],"props":{"account_id":"","actor_id":""}},"AddKeyAlreadyExists":{"name":"AddKeyAlreadyExists","subtypes":[],"props":{"account_id":"","public_key":""}},"AddKeyMethodNameLengthExceeded":{"name":"AddKeyMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"AddKeyMethodNamesNumberOfBytesExceeded":{"name":"AddKeyMethodNamesNumberOfBytesExceeded","subtypes":[],"props":{"limit":"","total_number_of_bytes":""}},"AltBn128InvalidInput":{"name":"AltBn128InvalidInput","subtypes":[],"props":{"msg":""}},"BadUTF16":{"name":"BadUTF16","subtypes":[],"props":{}},"BadUTF8":{"name":"BadUTF8","subtypes":[],"props":{}},"BalanceExceeded":{"name":"BalanceExceeded","subtypes":[],"props":{}},"BalanceMismatchError":{"name":"BalanceMismatchError","subtypes":[],"props":{"final_accounts_balance":"","final_postponed_receipts_balance":"","forwarded_buffered_receipts_balance":"","incoming_receipts_balance":"","incoming_validator_rewards":"","initial_accounts_balance":"","initial_postponed_receipts_balance":"","new_buffered_receipts_balance":"","new_delayed_receipts_balance":"","other_burnt_amount":"","outgoing_receipts_balance":"","processed_delayed_receipts_balance":"","slashed_burnt_amount":"","tx_burnt_amount":""}},"CallIndirectOOB":{"name":"CallIndirectOOB","subtypes":[],"props":{}},"CannotAppendActionToJointPromise":{"name":"CannotAppendActionToJointPromise","subtypes":[],"props":{}},"CannotReturnJointPromise":{"name":"CannotReturnJointPromise","subtypes":[],"props":{}},"CodeDoesNotExist":{"name":"CodeDoesNotExist","subtypes":[],"props":{"account_id":""}},"CompilationError":{"name":"CompilationError","subtypes":["CodeDoesNotExist","PrepareError","WasmerCompileError"],"props":{}},"ContractSizeExceeded":{"name":"ContractSizeExceeded","subtypes":[],"props":{"limit":"","size":""}},"CostOverflow":{"name":"CostOverflow","subtypes":[],"props":{}},"CreateAccountNotAllowed":{"name":"CreateAccountNotAllowed","subtypes":[],"props":{"account_id":"","predecessor_id":""}},"CreateAccountOnlyByRegistrar":{"name":"CreateAccountOnlyByRegistrar","subtypes":[],"props":{"account_id":"","predecessor_id":"","registrar_account_id":""}},"DelegateActionExpired":{"name":"DelegateActionExpired","subtypes":[],"props":{}},"DelegateActionInvalidNonce":{"name":"DelegateActionInvalidNonce","subtypes":[],"props":{"ak_nonce":"","delegate_nonce":""}},"DelegateActionInvalidSignature":{"name":"DelegateActionInvalidSignature","subtypes":[],"props":{}},"DelegateActionMustBeOnlyOne":{"name":"DelegateActionMustBeOnlyOne","subtypes":[],"props":{}},"DelegateActionNonceTooLarge":{"name":"DelegateActionNonceTooLarge","subtypes":[],"props":{"delegate_nonce":"","upper_bound":""}},"DelegateActionSenderDoesNotMatchTxReceiver":{"name":"DelegateActionSenderDoesNotMatchTxReceiver","subtypes":[],"props":{"receiver_id":"","sender_id":""}},"DeleteAccountStaking":{"name":"DeleteAccountStaking","subtypes":[],"props":{"account_id":""}},"DeleteAccountWithLargeState":{"name":"DeleteAccountWithLargeState","subtypes":[],"props":{"account_id":""}},"DeleteActionMustBeFinal":{"name":"DeleteActionMustBeFinal","subtypes":[],"props":{}},"DeleteKeyDoesNotExist":{"name":"DeleteKeyDoesNotExist","subtypes":[],"props":{"account_id":"","public_key":""}},"DepositWithFunctionCall":{"name":"DepositWithFunctionCall","subtypes":[],"props":{}},"Deprecated":{"name":"Deprecated","subtypes":[],"props":{"method_name":""}},"Deserialization":{"name":"Deserialization","subtypes":[],"props":{}},"ECRecoverError":{"name":"ECRecoverError","subtypes":[],"props":{"msg":""}},"Ed25519VerifyInvalidInput":{"name":"Ed25519VerifyInvalidInput","subtypes":[],"props":{"msg":""}},"EmptyMethodName":{"name":"EmptyMethodName","subtypes":[],"props":{}},"Expired":{"name":"Expired","subtypes":[],"props":{}},"FunctionCallArgumentsLengthExceeded":{"name":"FunctionCallArgumentsLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallMethodNameLengthExceeded":{"name":"FunctionCallMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallZeroAttachedGas":{"name":"FunctionCallZeroAttachedGas","subtypes":[],"props":{}},"GasExceeded":{"name":"GasExceeded","subtypes":[],"props":{}},"GasInstrumentation":{"name":"GasInstrumentation","subtypes":[],"props":{}},"GasLimitExceeded":{"name":"GasLimitExceeded","subtypes":[],"props":{}},"GenericTrap":{"name":"GenericTrap","subtypes":[],"props":{}},"GuestPanic":{"name":"GuestPanic","subtypes":[],"props":{"panic_msg":""}},"HostError":{"name":"HostError","subtypes":["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated","ECRecoverError","AltBn128InvalidInput","Ed25519VerifyInvalidInput"],"props":{}},"IllegalArithmetic":{"name":"IllegalArithmetic","subtypes":[],"props":{}},"IncorrectCallIndirectSignature":{"name":"IncorrectCallIndirectSignature","subtypes":[],"props":{}},"IndirectCallToNull":{"name":"IndirectCallToNull","subtypes":[],"props":{}},"Instantiate":{"name":"Instantiate","subtypes":[],"props":{}},"InsufficientStake":{"name":"InsufficientStake","subtypes":[],"props":{"account_id":"","minimum_stake":"","stake":""}},"IntegerOverflow":{"name":"IntegerOverflow","subtypes":[],"props":{}},"InternalMemoryDeclared":{"name":"InternalMemoryDeclared","subtypes":[],"props":{}},"InvalidAccessKeyError":{"name":"InvalidAccessKeyError","subtypes":["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],"props":{}},"InvalidAccountId":{"name":"InvalidAccountId","subtypes":[],"props":{}},"InvalidChain":{"name":"InvalidChain","subtypes":[],"props":{}},"InvalidDataReceiverId":{"name":"InvalidDataReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidIteratorIndex":{"name":"InvalidIteratorIndex","subtypes":[],"props":{"iterator_index":""}},"InvalidMethodName":{"name":"InvalidMethodName","subtypes":[],"props":{}},"InvalidNonce":{"name":"InvalidNonce","subtypes":[],"props":{"ak_nonce":"","tx_nonce":""}},"InvalidPredecessorId":{"name":"InvalidPredecessorId","subtypes":[],"props":{"account_id":""}},"InvalidPromiseIndex":{"name":"InvalidPromiseIndex","subtypes":[],"props":{"promise_idx":""}},"InvalidPromiseResultIndex":{"name":"InvalidPromiseResultIndex","subtypes":[],"props":{"result_idx":""}},"InvalidPublicKey":{"name":"InvalidPublicKey","subtypes":[],"props":{}},"InvalidReceiptIndex":{"name":"InvalidReceiptIndex","subtypes":[],"props":{"receipt_index":""}},"InvalidReceiverId":{"name":"InvalidReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidRegisterId":{"name":"InvalidRegisterId","subtypes":[],"props":{"register_id":""}},"InvalidSignature":{"name":"InvalidSignature","subtypes":[],"props":{}},"InvalidSignerId":{"name":"InvalidSignerId","subtypes":[],"props":{"account_id":""}},"InvalidTxError":{"name":"InvalidTxError","subtypes":["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","NonceTooLarge","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation","TransactionSizeExceeded","StorageError","ShardCongested","ShardStuck"],"props":{}},"IteratorWasInvalidated":{"name":"IteratorWasInvalidated","subtypes":[],"props":{"iterator_index":""}},"KeyLengthExceeded":{"name":"KeyLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"LackBalanceForState":{"name":"LackBalanceForState","subtypes":[],"props":{"account_id":"","amount":""}},"Memory":{"name":"Memory","subtypes":[],"props":{}},"MemoryAccessViolation":{"name":"MemoryAccessViolation","subtypes":[],"props":{}},"MemoryOutOfBounds":{"name":"MemoryOutOfBounds","subtypes":[],"props":{}},"MethodEmptyName":{"name":"MethodEmptyName","subtypes":[],"props":{}},"MethodInvalidSignature":{"name":"MethodInvalidSignature","subtypes":[],"props":{}},"MethodNameMismatch":{"name":"MethodNameMismatch","subtypes":[],"props":{"method_name":""}},"MethodNotFound":{"name":"MethodNotFound","subtypes":[],"props":{}},"MethodResolveError":{"name":"MethodResolveError","subtypes":["MethodEmptyName","MethodNotFound","MethodInvalidSignature"],"props":{}},"MisalignedAtomicAccess":{"name":"MisalignedAtomicAccess","subtypes":[],"props":{}},"NonceTooLarge":{"name":"NonceTooLarge","subtypes":[],"props":{"tx_nonce":"","upper_bound":""}},"NotEnoughAllowance":{"name":"NotEnoughAllowance","subtypes":[],"props":{"account_id":"","allowance":"","cost":"","public_key":""}},"NotEnoughBalance":{"name":"NotEnoughBalance","subtypes":[],"props":{"balance":"","cost":"","signer_id":""}},"NumberInputDataDependenciesExceeded":{"name":"NumberInputDataDependenciesExceeded","subtypes":[],"props":{"limit":"","number_of_input_data_dependencies":""}},"NumberOfLogsExceeded":{"name":"NumberOfLogsExceeded","subtypes":[],"props":{"limit":""}},"NumberPromisesExceeded":{"name":"NumberPromisesExceeded","subtypes":[],"props":{"limit":"","number_of_promises":""}},"OnlyImplicitAccountCreationAllowed":{"name":"OnlyImplicitAccountCreationAllowed","subtypes":[],"props":{"account_id":""}},"PrepareError":{"name":"PrepareError","subtypes":["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory","TooManyFunctions","TooManyLocals"],"props":{}},"ProhibitedInView":{"name":"ProhibitedInView","subtypes":[],"props":{"method_name":""}},"ReceiptSizeExceeded":{"name":"ReceiptSizeExceeded","subtypes":[],"props":{"limit":"","size":""}},"ReceiptValidationError":{"name":"ReceiptValidationError","subtypes":["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation","ReceiptSizeExceeded"],"props":{}},"ReceiverMismatch":{"name":"ReceiverMismatch","subtypes":[],"props":{"ak_receiver":"","tx_receiver":""}},"RequiresFullAccess":{"name":"RequiresFullAccess","subtypes":[],"props":{}},"ReturnedValueLengthExceeded":{"name":"ReturnedValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Serialization":{"name":"Serialization","subtypes":[],"props":{}},"ShardCongested":{"name":"ShardCongested","subtypes":[],"props":{"congestion_level":"","shard_id":""}},"ShardStuck":{"name":"ShardStuck","subtypes":[],"props":{"missed_chunks":"","shard_id":""}},"SignerDoesNotExist":{"name":"SignerDoesNotExist","subtypes":[],"props":{"signer_id":""}},"StackHeightInstrumentation":{"name":"StackHeightInstrumentation","subtypes":[],"props":{}},"StackOverflow":{"name":"StackOverflow","subtypes":[],"props":{}},"TooManyFunctions":{"name":"TooManyFunctions","subtypes":[],"props":{}},"TooManyLocals":{"name":"TooManyLocals","subtypes":[],"props":{}},"TotalLogLengthExceeded":{"name":"TotalLogLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"TotalNumberOfActionsExceeded":{"name":"TotalNumberOfActionsExceeded","subtypes":[],"props":{"limit":"","total_number_of_actions":""}},"TotalPrepaidGasExceeded":{"name":"TotalPrepaidGasExceeded","subtypes":[],"props":{"limit":"","total_prepaid_gas":""}},"TransactionSizeExceeded":{"name":"TransactionSizeExceeded","subtypes":[],"props":{"limit":"","size":""}},"TriesToStake":{"name":"TriesToStake","subtypes":[],"props":{"account_id":"","balance":"","locked":"","stake":""}},"TriesToUnstake":{"name":"TriesToUnstake","subtypes":[],"props":{"account_id":""}},"TxExecutionError":{"name":"TxExecutionError","subtypes":["ActionError","InvalidTxError"],"props":{}},"Unreachable":{"name":"Unreachable","subtypes":[],"props":{}},"UnsuitableStakingKey":{"name":"UnsuitableStakingKey","subtypes":[],"props":{"public_key":""}},"UnsupportedProtocolFeature":{"name":"UnsupportedProtocolFeature","subtypes":[],"props":{"protocol_feature":"","version":""}},"ValueLengthExceeded":{"name":"ValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"WasmTrap":{"name":"WasmTrap","subtypes":["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","IndirectCallToNull","StackOverflow","GenericTrap"],"props":{}},"WasmerCompileError":{"name":"WasmerCompileError","subtypes":[],"props":{"msg":""}},"Closed":{"name":"Closed","subtypes":[],"props":{}},"ServerError":{"name":"ServerError","subtypes":["TxExecutionError","Timeout","Closed"],"props":{}},"Timeout":{"name":"Timeout","subtypes":[],"props":{}}}}')},"./node_modules/@near-js/utils/lib/commonjs/errors/rpc_errors.cjs":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getErrorTypeFromErrorMessage=exports.formatError=exports.parseResultError=exports.parseRpcError=exports.ServerError=void 0;const types_1=__webpack_require__("./node_modules/@near-js/types/lib/commonjs/index.cjs"),mustache_1=__importDefault(__webpack_require__("./node_modules/mustache/mustache.js")),format_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/format.cjs"),errors_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/errors/errors.cjs"),rpc_error_schema_json_1=__importDefault(__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/errors/rpc_error_schema.json")),mustacheHelpers={formatNear:()=>(n,render)=>(0,format_1.formatNearAmount)(render(n))};class ServerError extends types_1.TypedError{}exports.ServerError=ServerError;class ServerTransactionError extends ServerError{transaction_outcome}function parseRpcError(errorObj){const result={},errorClassName=walkSubtype(errorObj,rpc_error_schema_json_1.default.schema,result,""),error=new ServerError(formatError(errorClassName,result),errorClassName);return Object.assign(error,result),error}function formatError(errorClassName,errorData){return"string"==typeof errors_1.ErrorMessages[errorClassName]?mustache_1.default.render(errors_1.ErrorMessages[errorClassName],{...errorData,...mustacheHelpers}):JSON.stringify(errorData)}function walkSubtype(errorObj,schema,result,typeName){let error,type,errorTypeName;for(const errorName in schema){if(isString(errorObj[errorName]))return errorObj[errorName];if(isObject(errorObj[errorName]))error=errorObj[errorName],type=schema[errorName],errorTypeName=errorName;else{if(!isObject(errorObj.kind)||!isObject(errorObj.kind[errorName]))continue;error=errorObj.kind[errorName],type=schema[errorName],errorTypeName=errorName}}if(error&&type){for(const prop of Object.keys(type.props))result[prop]=error[prop];return walkSubtype(error,schema,result,errorTypeName)}return result.kind=errorObj,typeName}function isObject(n){return"[object Object]"===Object.prototype.toString.call(n)}function isString(n){return"[object String]"===Object.prototype.toString.call(n)}exports.parseRpcError=parseRpcError,exports.parseResultError=function parseResultError(result){const server_error=parseRpcError(result.status.Failure),server_tx_error=new ServerTransactionError;return Object.assign(server_tx_error,server_error),server_tx_error.type=server_error.type,server_tx_error.message=server_error.message,server_tx_error.transaction_outcome=result.transaction_outcome,server_tx_error},exports.formatError=formatError,exports.getErrorTypeFromErrorMessage=function getErrorTypeFromErrorMessage(errorMessage,errorType){switch(!0){case/^account .*? does not exist while viewing$/.test(errorMessage):case/^Account .*? doesn't exist$/.test(errorMessage):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(errorMessage):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(errorMessage):case/wasm execution failed with error: CompilationError\(CodeDoesNotExist/.test(errorMessage):return"CodeDoesNotExist";case/wasm execution failed with error: FunctionCallError\(MethodResolveError\(MethodNotFound/.test(errorMessage):case/wasm execution failed with error: MethodResolveError\(MethodNotFound/.test(errorMessage):return"MethodNotFound";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(errorMessage):return"InvalidNonce";default:return errorType}}},"./node_modules/@near-js/utils/lib/commonjs/format.cjs":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.baseDecode=exports.baseEncode=exports.parseNearAmount=exports.formatNearAmount=exports.NEAR_NOMINATION=exports.NEAR_NOMINATION_EXP=void 0;const base_1=__webpack_require__("./node_modules/@scure/base/lib/index.js");exports.NEAR_NOMINATION_EXP=24,exports.NEAR_NOMINATION=10n**BigInt(exports.NEAR_NOMINATION_EXP);const ROUNDING_OFFSETS=[];for(let i=0,offset=5n;i<exports.NEAR_NOMINATION_EXP;i++,offset*=10n)ROUNDING_OFFSETS[i]=offset;exports.formatNearAmount=function formatNearAmount(balance,fracDigits=exports.NEAR_NOMINATION_EXP){let balanceBN=BigInt(balance);if(fracDigits!==exports.NEAR_NOMINATION_EXP){const roundingExp=exports.NEAR_NOMINATION_EXP-fracDigits-1;roundingExp>0&&(balanceBN+=ROUNDING_OFFSETS[roundingExp])}const wholeStr=(balance=balanceBN.toString()).substring(0,balance.length-exports.NEAR_NOMINATION_EXP)||"0",fractionStr=balance.substring(balance.length-exports.NEAR_NOMINATION_EXP).padStart(exports.NEAR_NOMINATION_EXP,"0").substring(0,fracDigits);return function trimTrailingZeroes(value){return value.replace(/\.?0*$/,"")}(`${function formatWithCommas(value){const pattern=/(-?\d+)(\d{3})/;for(;pattern.test(value);)value=value.replace(pattern,"$1,$2");return value}(wholeStr)}.${fractionStr}`)},exports.parseNearAmount=function parseNearAmount(amt){if(!amt)return null;const split=(amt=function cleanupAmount(amount){return amount.replace(/,/g,"").trim()}(amt)).split("."),wholePart=split[0],fracPart=split[1]||"";if(split.length>2||fracPart.length>exports.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${amt}' as NEAR amount`);return function trimLeadingZeroes(value){if(""===(value=value.replace(/^0+/,"")))return"0";return value}(wholePart+fracPart.padEnd(exports.NEAR_NOMINATION_EXP,"0"))},exports.baseEncode=function baseEncode(value){if("string"==typeof value){const bytes=[];for(let c=0;c<value.length;c++)bytes.push(value.charCodeAt(c));value=new Uint8Array(bytes)}return base_1.base58.encode(value)},exports.baseDecode=function baseDecode(value){return base_1.base58.decode(value)}},"./node_modules/@near-js/utils/lib/commonjs/index.cjs":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/constants.cjs"),exports),__exportStar(__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/errors/index.cjs"),exports),__exportStar(__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/format.cjs"),exports),__exportStar(__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/logging.cjs"),exports),__exportStar(__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/provider.cjs"),exports),__exportStar(__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/validators.cjs"),exports),__exportStar(__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/logger/index.cjs"),exports),__exportStar(__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/utils.cjs"),exports)},"./node_modules/@near-js/utils/lib/commonjs/logger/console.logger.cjs":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var console=__webpack_require__("./node_modules/console-browserify/index.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConsoleLogger=void 0;exports.ConsoleLogger=class ConsoleLogger{logLevels;constructor(logLevels){this.logLevels=logLevels}isLevelEnabled=level=>this.logLevels.includes(level);print(level,message,...optionalParams){switch(level){case"error":case"fatal":return console.error(message,...optionalParams);case"warn":return console.warn(message,...optionalParams);case"log":return console.log(message,...optionalParams);case"debug":case"verbose":return console.debug(message,...optionalParams)}}verbose(message,...optionalParams){this.isLevelEnabled("verbose")&&this.print("verbose",message,...optionalParams)}debug(message,...optionalParams){this.isLevelEnabled("debug")&&this.print("debug",message,...optionalParams)}log(message,...optionalParams){this.isLevelEnabled("log")&&this.print("log",message,...optionalParams)}warn(message,...optionalParams){this.isLevelEnabled("warn")&&this.print("warn",message,...optionalParams)}error(message,...optionalParams){this.isLevelEnabled("error")&&this.print("error",message,...optionalParams)}fatal(message,...optionalParams){this.isLevelEnabled("fatal")&&this.print("fatal",message,...optionalParams)}}},"./node_modules/@near-js/utils/lib/commonjs/logger/index.cjs":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Logger=exports.ConsoleLogger=void 0;var console_logger_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/logger/console.logger.cjs");Object.defineProperty(exports,"ConsoleLogger",{enumerable:!0,get:function(){return console_logger_1.ConsoleLogger}});var logger_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/logger/logger.cjs");Object.defineProperty(exports,"Logger",{enumerable:!0,get:function(){return logger_1.Logger}})},"./node_modules/@near-js/utils/lib/commonjs/logger/logger.cjs":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Logger=void 0;const DEFAULT_LOGGER=new(__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/logger/console.logger.cjs").ConsoleLogger)(["verbose","debug","log","warn","error","fatal"]);exports.Logger=class Logger{static instanceRef=DEFAULT_LOGGER;static overrideLogger=logger=>{this.instanceRef=logger};static error(message,...optionalParams){this.instanceRef?.error(message,...optionalParams)}static log(message,...optionalParams){this.instanceRef?.log(message,...optionalParams)}static warn(message,...optionalParams){this.instanceRef?.warn(message,...optionalParams)}static debug(message,...optionalParams){this.instanceRef?.debug?.(message,...optionalParams)}static verbose(message,...optionalParams){this.instanceRef?.verbose?.(message,...optionalParams)}static fatal(message,...optionalParams){this.instanceRef?.fatal?.(message,...optionalParams)}}},"./node_modules/@near-js/utils/lib/commonjs/logging.cjs":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.printTxOutcomeLogs=exports.printTxOutcomeLogsAndFailures=void 0;const errors_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/errors/index.cjs"),logger_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/logger/index.cjs");function printTxOutcomeLogs({contractId,logs,prefix=""}){for(const log of logs)logger_1.Logger.log(`${prefix}Log [${contractId}]: ${log}`)}exports.printTxOutcomeLogsAndFailures=function printTxOutcomeLogsAndFailures({contractId,outcome}){const flatLogs=[outcome.transaction_outcome,...outcome.receipts_outcome].reduce((acc,it)=>{const isFailure="object"==typeof it.outcome.status&&"object"==typeof it.outcome.status.Failure;return it.outcome.logs.length||isFailure?acc.concat({receiptIds:it.outcome.receipt_ids,logs:it.outcome.logs,failure:"object"==typeof it.outcome.status&&void 0!==it.outcome.status.Failure?(0,errors_1.parseRpcError)(it.outcome.status.Failure):null}):acc},[]);for(const result of flatLogs)logger_1.Logger.log(`Receipt${result.receiptIds.length>1?"s":""}: ${result.receiptIds.join(", ")}`),printTxOutcomeLogs({contractId,logs:result.logs,prefix:"\t"}),result.failure&&logger_1.Logger.warn(`\tFailure [${contractId}]: ${result.failure}`)},exports.printTxOutcomeLogs=printTxOutcomeLogs},"./node_modules/@near-js/utils/lib/commonjs/provider.cjs":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTransactionLastResult=void 0,exports.getTransactionLastResult=function getTransactionLastResult(txResult){if("object"==typeof txResult.status&&"string"==typeof txResult.status.SuccessValue){const value=Buffer.from(txResult.status.SuccessValue,"base64").toString();try{return JSON.parse(value)}catch(e){return value}}return null}},"./node_modules/@near-js/utils/lib/commonjs/utils.cjs":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sortBigIntAsc=void 0,exports.sortBigIntAsc=function sortBigIntAsc(a,b){return a<b?-1:a>b?1:0}},"./node_modules/@near-js/utils/lib/commonjs/validators.cjs":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.diffEpochValidators=exports.findSeatPrice=void 0;const depd_1=__importDefault(__webpack_require__("./node_modules/depd/lib/browser/index.js")),utils_1=__webpack_require__("./node_modules/@near-js/utils/lib/commonjs/utils.cjs");exports.findSeatPrice=function findSeatPrice(validators,maxNumberOfSeats,minimumStakeRatio,protocolVersion){if(protocolVersion&&protocolVersion<49)return function findSeatPriceForProtocolBefore49(validators,numSeats){const stakes=validators.map(v=>BigInt(v.stake)).sort(utils_1.sortBigIntAsc),num=BigInt(numSeats),stakesSum=stakes.reduce((a,b)=>a+b);if(stakesSum<num)throw new Error("Stakes are below seats");let left=1n,right=stakesSum+1n;for(;left!==right-1n;){const mid=(left+right)/2n;let found=!1,currentSum=0n;for(let i=0;i<stakes.length;++i)if(currentSum+=stakes[i]/mid,currentSum>=num){left=mid,found=!0;break}found||(right=mid)}return left}(validators,maxNumberOfSeats);if(!minimumStakeRatio){(0,depd_1.default)("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),minimumStakeRatio=[1,6250]}return function findSeatPriceForProtocolAfter49(validators,maxNumberOfSeats,minimumStakeRatio){if(2!=minimumStakeRatio.length)throw Error("minimumStakeRatio should have 2 elements");const stakes=validators.map(v=>BigInt(v.stake)).sort(utils_1.sortBigIntAsc),stakesSum=stakes.reduce((a,b)=>a+b);return validators.length<maxNumberOfSeats?stakesSum*BigInt(minimumStakeRatio[0])/BigInt(minimumStakeRatio[1]):stakes[0]+1n}(validators,maxNumberOfSeats,minimumStakeRatio)},exports.diffEpochValidators=function diffEpochValidators(currentValidators,nextValidators){const validatorsMap=new Map;currentValidators.forEach(v=>validatorsMap.set(v.account_id,v));const nextValidatorsSet=new Set(nextValidators.map(v=>v.account_id));return{newValidators:nextValidators.filter(v=>!validatorsMap.has(v.account_id)),removedValidators:currentValidators.filter(v=>!nextValidatorsSet.has(v.account_id)),changedValidators:nextValidators.filter(v=>validatorsMap.has(v.account_id)&&validatorsMap.get(v.account_id).stake!=v.stake).map(v=>({current:validatorsMap.get(v.account_id),next:v}))}}},"./node_modules/@noble/curves/abstract/curve.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wNAF=function wNAF(c,bits){return{constTimeNegate,hasPrecomputes:elm=>1!==getW(elm),unsafeLadder(elm,n,p=c.ZERO){let d=elm;for(;n>_0n;)n&_1n&&(p=p.add(d)),d=d.double(),n>>=_1n;return p},precomputeWindow(elm,W){const{windows,windowSize}=calcWOpts(W,bits),points=[];let p=elm,base=p;for(let window=0;window<windows;window++){base=p,points.push(base);for(let i=1;i<windowSize;i++)base=base.add(p),points.push(base);p=base.double()}return points},wNAF(W,precomputes,n){const{windows,windowSize}=calcWOpts(W,bits);let p=c.ZERO,f=c.BASE;const mask=BigInt(2**W-1),maxNumber=2**W,shiftBy=BigInt(W);for(let window=0;window<windows;window++){const offset=window*windowSize;let wbits=Number(n&mask);n>>=shiftBy,wbits>windowSize&&(wbits-=maxNumber,n+=_1n);const offset1=offset,offset2=offset+Math.abs(wbits)-1,cond1=window%2!=0,cond2=wbits<0;0===wbits?f=f.add(constTimeNegate(cond1,precomputes[offset1])):p=p.add(constTimeNegate(cond2,precomputes[offset2]))}return{p,f}},wNAFUnsafe(W,precomputes,n,acc=c.ZERO){const{windows,windowSize}=calcWOpts(W,bits),mask=BigInt(2**W-1),maxNumber=2**W,shiftBy=BigInt(W);for(let window=0;window<windows;window++){const offset=window*windowSize;if(n===_0n)break;let wbits=Number(n&mask);if(n>>=shiftBy,wbits>windowSize&&(wbits-=maxNumber,n+=_1n),0===wbits)continue;let curr=precomputes[offset+Math.abs(wbits)-1];wbits<0&&(curr=curr.negate()),acc=acc.add(curr)}return acc},getPrecomputes(W,P,transform){let comp=pointPrecomputes.get(P);return comp||(comp=this.precomputeWindow(P,W),1!==W&&pointPrecomputes.set(P,transform(comp))),comp},wNAFCached(P,n,transform){const W=getW(P);return this.wNAF(W,this.getPrecomputes(W,P,transform),n)},wNAFCachedUnsafe(P,n,transform,prev){const W=getW(P);return 1===W?this.unsafeLadder(P,n,prev):this.wNAFUnsafe(W,this.getPrecomputes(W,P,transform),n,prev)},setWindowSize(P,W){validateW(W,bits),pointWindowSizes.set(P,W),pointPrecomputes.delete(P)}}},exports.pippenger=function pippenger(c,fieldN,points,scalars){if(validateMSMPoints(points,c),validateMSMScalars(scalars,fieldN),points.length!==scalars.length)throw new Error("arrays of points and scalars must have equal length");const zero=c.ZERO,wbits=(0,utils_js_1.bitLen)(BigInt(points.length)),windowSize=wbits>12?wbits-3:wbits>4?wbits-2:wbits?2:1,MASK=(1<<windowSize)-1,buckets=new Array(MASK+1).fill(zero),lastBits=Math.floor((fieldN.BITS-1)/windowSize)*windowSize;let sum=zero;for(let i=lastBits;i>=0;i-=windowSize){buckets.fill(zero);for(let j=0;j<scalars.length;j++){const scalar=scalars[j],wbits=Number(scalar>>BigInt(i)&BigInt(MASK));buckets[wbits]=buckets[wbits].add(points[j])}let resI=zero;for(let j=buckets.length-1,sumI=zero;j>0;j--)sumI=sumI.add(buckets[j]),resI=resI.add(sumI);if(sum=sum.add(resI),0!==i)for(let j=0;j<windowSize;j++)sum=sum.double()}return sum},exports.precomputeMSMUnsafe=function precomputeMSMUnsafe(c,fieldN,points,windowSize){validateW(windowSize,fieldN.BITS),validateMSMPoints(points,c);const zero=c.ZERO,tableSize=2**windowSize-1,chunks=Math.ceil(fieldN.BITS/windowSize),MASK=BigInt((1<<windowSize)-1),tables=points.map(p=>{const res=[];for(let i=0,acc=p;i<tableSize;i++)res.push(acc),acc=acc.add(p);return res});return scalars=>{if(validateMSMScalars(scalars,fieldN),scalars.length>points.length)throw new Error("array of scalars must be smaller than array of points");let res=zero;for(let i=0;i<chunks;i++){if(res!==zero)for(let j=0;j<windowSize;j++)res=res.double();const shiftBy=BigInt(chunks*windowSize-(i+1)*windowSize);for(let j=0;j<scalars.length;j++){const n=scalars[j],curr=Number(n>>shiftBy&MASK);curr&&(res=res.add(tables[j][curr-1]))}}return res}},exports.validateBasic=function validateBasic(curve){return(0,modular_js_1.validateField)(curve.Fp),(0,utils_js_1.validateObject)(curve,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,modular_js_1.nLength)(curve.n,curve.nBitLength),...curve,p:curve.Fp.ORDER})};const modular_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/modular.js"),utils_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/utils.js"),_0n=BigInt(0),_1n=BigInt(1);function constTimeNegate(condition,item){const neg=item.negate();return condition?neg:item}function validateW(W,bits){if(!Number.isSafeInteger(W)||W<=0||W>bits)throw new Error("invalid window size, expected [1.."+bits+"], got W="+W)}function calcWOpts(W,bits){validateW(W,bits);return{windows:Math.ceil(bits/W)+1,windowSize:2**(W-1)}}function validateMSMPoints(points,c){if(!Array.isArray(points))throw new Error("array expected");points.forEach((p,i)=>{if(!(p instanceof c))throw new Error("invalid point at index "+i)})}function validateMSMScalars(scalars,field){if(!Array.isArray(scalars))throw new Error("array of scalars expected");scalars.forEach((s,i)=>{if(!field.isValid(s))throw new Error("invalid scalar at index "+i)})}const pointPrecomputes=new WeakMap,pointWindowSizes=new WeakMap;function getW(P){return pointWindowSizes.get(P)||1}},"./node_modules/@noble/curves/abstract/edwards.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.twistedEdwards=function twistedEdwards(curveDef){const CURVE=function validateOpts(curve){const opts=(0,curve_js_1.validateBasic)(curve);return ut.validateObject(curve,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...opts})}(curveDef),{Fp,n:CURVE_ORDER,prehash,hash:cHash,randomBytes,nByteLength,h:cofactor}=CURVE,MASK=_2n<<BigInt(8*nByteLength)-_1n,modP=Fp.create,Fn=(0,modular_js_1.Field)(CURVE.n,CURVE.nBitLength),uvRatio=CURVE.uvRatio||((u,v)=>{try{return{isValid:!0,value:Fp.sqrt(u*Fp.inv(v))}}catch(e){return{isValid:!1,value:_0n}}}),adjustScalarBytes=CURVE.adjustScalarBytes||(bytes=>bytes),domain=CURVE.domain||((data,ctx,phflag)=>{if((0,utils_js_1.abool)("phflag",phflag),ctx.length||phflag)throw new Error("Contexts/pre-hash are not supported");return data});function aCoordinate(title,n){ut.aInRange("coordinate "+title,n,_0n,MASK)}function assertPoint(other){if(!(other instanceof Point))throw new Error("ExtendedPoint expected")}const toAffineMemo=(0,utils_js_1.memoized)((p,iz)=>{const{ex:x,ey:y,ez:z}=p,is0=p.is0();null==iz&&(iz=is0?_8n:Fp.inv(z));const ax=modP(x*iz),ay=modP(y*iz),zz=modP(z*iz);if(is0)return{x:_0n,y:_1n};if(zz!==_1n)throw new Error("invZ was invalid");return{x:ax,y:ay}}),assertValidMemo=(0,utils_js_1.memoized)(p=>{const{a,d}=CURVE;if(p.is0())throw new Error("bad point: ZERO");const{ex:X,ey:Y,ez:Z,et:T}=p,X2=modP(X*X),Y2=modP(Y*Y),Z2=modP(Z*Z),Z4=modP(Z2*Z2),aX2=modP(X2*a);if(modP(Z2*modP(aX2+Y2))!==modP(Z4+modP(d*modP(X2*Y2))))throw new Error("bad point: equation left != right (1)");if(modP(X*Y)!==modP(Z*T))throw new Error("bad point: equation left != right (2)");return!0});class Point{constructor(ex,ey,ez,et){this.ex=ex,this.ey=ey,this.ez=ez,this.et=et,aCoordinate("x",ex),aCoordinate("y",ey),aCoordinate("z",ez),aCoordinate("t",et),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(p){if(p instanceof Point)throw new Error("extended point not allowed");const{x,y}=p||{};return aCoordinate("x",x),aCoordinate("y",y),new Point(x,y,_1n,modP(x*y))}static normalizeZ(points){const toInv=Fp.invertBatch(points.map(p=>p.ez));return points.map((p,i)=>p.toAffine(toInv[i])).map(Point.fromAffine)}static msm(points,scalars){return(0,curve_js_1.pippenger)(Point,Fn,points,scalars)}_setWindowSize(windowSize){wnaf.setWindowSize(this,windowSize)}assertValidity(){assertValidMemo(this)}equals(other){assertPoint(other);const{ex:X1,ey:Y1,ez:Z1}=this,{ex:X2,ey:Y2,ez:Z2}=other,X1Z2=modP(X1*Z2),X2Z1=modP(X2*Z1),Y1Z2=modP(Y1*Z2),Y2Z1=modP(Y2*Z1);return X1Z2===X2Z1&&Y1Z2===Y2Z1}is0(){return this.equals(Point.ZERO)}negate(){return new Point(modP(-this.ex),this.ey,this.ez,modP(-this.et))}double(){const{a}=CURVE,{ex:X1,ey:Y1,ez:Z1}=this,A=modP(X1*X1),B=modP(Y1*Y1),C=modP(_2n*modP(Z1*Z1)),D=modP(a*A),x1y1=X1+Y1,E=modP(modP(x1y1*x1y1)-A-B),G=D+B,F=G-C,H=D-B,X3=modP(E*F),Y3=modP(G*H),T3=modP(E*H),Z3=modP(F*G);return new Point(X3,Y3,Z3,T3)}add(other){assertPoint(other);const{a,d}=CURVE,{ex:X1,ey:Y1,ez:Z1,et:T1}=this,{ex:X2,ey:Y2,ez:Z2,et:T2}=other;if(a===BigInt(-1)){const A=modP((Y1-X1)*(Y2+X2)),B=modP((Y1+X1)*(Y2-X2)),F=modP(B-A);if(F===_0n)return this.double();const C=modP(Z1*_2n*T2),D=modP(T1*_2n*Z2),E=D+C,G=B+A,H=D-C,X3=modP(E*F),Y3=modP(G*H),T3=modP(E*H),Z3=modP(F*G);return new Point(X3,Y3,Z3,T3)}const A=modP(X1*X2),B=modP(Y1*Y2),C=modP(T1*d*T2),D=modP(Z1*Z2),E=modP((X1+Y1)*(X2+Y2)-A-B),F=D-C,G=D+C,H=modP(B-a*A),X3=modP(E*F),Y3=modP(G*H),T3=modP(E*H),Z3=modP(F*G);return new Point(X3,Y3,Z3,T3)}subtract(other){return this.add(other.negate())}wNAF(n){return wnaf.wNAFCached(this,n,Point.normalizeZ)}multiply(scalar){const n=scalar;ut.aInRange("scalar",n,_1n,CURVE_ORDER);const{p,f}=this.wNAF(n);return Point.normalizeZ([p,f])[0]}multiplyUnsafe(scalar,acc=Point.ZERO){const n=scalar;return ut.aInRange("scalar",n,_0n,CURVE_ORDER),n===_0n?I:this.is0()||n===_1n?this:wnaf.wNAFCachedUnsafe(this,n,Point.normalizeZ,acc)}isSmallOrder(){return this.multiplyUnsafe(cofactor).is0()}isTorsionFree(){return wnaf.unsafeLadder(this,CURVE_ORDER).is0()}toAffine(iz){return toAffineMemo(this,iz)}clearCofactor(){const{h:cofactor}=CURVE;return cofactor===_1n?this:this.multiplyUnsafe(cofactor)}static fromHex(hex,zip215=!1){const{d,a}=CURVE,len=Fp.BYTES;hex=(0,utils_js_1.ensureBytes)("pointHex",hex,len),(0,utils_js_1.abool)("zip215",zip215);const normed=hex.slice(),lastByte=hex[len-1];normed[len-1]=-129&lastByte;const y=ut.bytesToNumberLE(normed),max=zip215?MASK:Fp.ORDER;ut.aInRange("pointHex.y",y,_0n,max);const y2=modP(y*y),u=modP(y2-_1n),v=modP(d*y2-a);let{isValid,value:x}=uvRatio(u,v);if(!isValid)throw new Error("Point.fromHex: invalid y coordinate");const isXOdd=(x&_1n)===_1n,isLastByteOdd=!!(128&lastByte);if(!zip215&&x===_0n&&isLastByteOdd)throw new Error("Point.fromHex: x=0 and x_0=1");return isLastByteOdd!==isXOdd&&(x=modP(-x)),Point.fromAffine({x,y})}static fromPrivateKey(privKey){return getExtendedPublicKey(privKey).point}toRawBytes(){const{x,y}=this.toAffine(),bytes=ut.numberToBytesLE(y,Fp.BYTES);return bytes[bytes.length-1]|=x&_1n?128:0,bytes}toHex(){return ut.bytesToHex(this.toRawBytes())}}Point.BASE=new Point(CURVE.Gx,CURVE.Gy,_1n,modP(CURVE.Gx*CURVE.Gy)),Point.ZERO=new Point(_0n,_1n,_1n,_0n);const{BASE:G,ZERO:I}=Point,wnaf=(0,curve_js_1.wNAF)(Point,8*nByteLength);function modN(a){return(0,modular_js_1.mod)(a,CURVE_ORDER)}function modN_LE(hash){return modN(ut.bytesToNumberLE(hash))}function getExtendedPublicKey(key){const len=Fp.BYTES;key=(0,utils_js_1.ensureBytes)("private key",key,len);const hashed=(0,utils_js_1.ensureBytes)("hashed private key",cHash(key),2*len),head=adjustScalarBytes(hashed.slice(0,len)),prefix=hashed.slice(len,2*len),scalar=modN_LE(head),point=G.multiply(scalar),pointBytes=point.toRawBytes();return{head,prefix,scalar,point,pointBytes}}function hashDomainToScalar(context=new Uint8Array,...msgs){const msg=ut.concatBytes(...msgs);return modN_LE(cHash(domain(msg,(0,utils_js_1.ensureBytes)("context",context),!!prehash)))}const verifyOpts=VERIFY_DEFAULT;G._setWindowSize(8);return{CURVE,getPublicKey:function getPublicKey(privKey){return getExtendedPublicKey(privKey).pointBytes},sign:function sign(msg,privKey,options={}){msg=(0,utils_js_1.ensureBytes)("message",msg),prehash&&(msg=prehash(msg));const{prefix,scalar,pointBytes}=getExtendedPublicKey(privKey),r=hashDomainToScalar(options.context,prefix,msg),R=G.multiply(r).toRawBytes(),s=modN(r+hashDomainToScalar(options.context,R,pointBytes,msg)*scalar);ut.aInRange("signature.s",s,_0n,CURVE_ORDER);const res=ut.concatBytes(R,ut.numberToBytesLE(s,Fp.BYTES));return(0,utils_js_1.ensureBytes)("result",res,2*Fp.BYTES)},verify:function verify(sig,msg,publicKey,options=verifyOpts){const{context,zip215}=options,len=Fp.BYTES;sig=(0,utils_js_1.ensureBytes)("signature",sig,2*len),msg=(0,utils_js_1.ensureBytes)("message",msg),publicKey=(0,utils_js_1.ensureBytes)("publicKey",publicKey,len),void 0!==zip215&&(0,utils_js_1.abool)("zip215",zip215),prehash&&(msg=prehash(msg));const s=ut.bytesToNumberLE(sig.slice(len,2*len));let A,R,SB;try{A=Point.fromHex(publicKey,zip215),R=Point.fromHex(sig.slice(0,len),zip215),SB=G.multiplyUnsafe(s)}catch(error){return!1}if(!zip215&&A.isSmallOrder())return!1;const k=hashDomainToScalar(context,R.toRawBytes(),A.toRawBytes(),msg);return R.add(A.multiplyUnsafe(k)).subtract(SB).clearCofactor().equals(Point.ZERO)},ExtendedPoint:Point,utils:{getExtendedPublicKey,randomPrivateKey:()=>randomBytes(Fp.BYTES),precompute:(windowSize=8,point=Point.BASE)=>(point._setWindowSize(windowSize),point.multiply(BigInt(3)),point)}}};const curve_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/curve.js"),modular_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/modular.js"),ut=__webpack_require__("./node_modules/@noble/curves/abstract/utils.js"),utils_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/utils.js"),_0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_8n=BigInt(8),VERIFY_DEFAULT={zip215:!0}},"./node_modules/@noble/curves/abstract/hash-to-curve.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expand_message_xmd=expand_message_xmd,exports.expand_message_xof=expand_message_xof,exports.hash_to_field=hash_to_field,exports.isogenyMap=function isogenyMap(field,map){const COEFF=map.map(i=>Array.from(i).reverse());return(x,y)=>{const[xNum,xDen,yNum,yDen]=COEFF.map(val=>val.reduce((acc,i)=>field.add(field.mul(acc,x),i)));return x=field.div(xNum,xDen),y=field.mul(y,field.div(yNum,yDen)),{x,y}}},exports.createHasher=function createHasher(Point,mapToCurve,def){if("function"!=typeof mapToCurve)throw new Error("mapToCurve() must be defined");return{hashToCurve(msg,options){const u=hash_to_field(msg,2,{...def,DST:def.DST,...options}),u0=Point.fromAffine(mapToCurve(u[0])),u1=Point.fromAffine(mapToCurve(u[1])),P=u0.add(u1).clearCofactor();return P.assertValidity(),P},encodeToCurve(msg,options){const u=hash_to_field(msg,1,{...def,DST:def.encodeDST,...options}),P=Point.fromAffine(mapToCurve(u[0])).clearCofactor();return P.assertValidity(),P},mapToCurve(scalars){if(!Array.isArray(scalars))throw new Error("mapToCurve: expected array of bigints");for(const i of scalars)if("bigint"!=typeof i)throw new Error("mapToCurve: expected array of bigints");const P=Point.fromAffine(mapToCurve(scalars)).clearCofactor();return P.assertValidity(),P}}};const modular_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/modular.js"),utils_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/utils.js"),os2ip=utils_js_1.bytesToNumberBE;function i2osp(value,length){if(anum(value),anum(length),value<0||value>=1<<8*length)throw new Error("invalid I2OSP input: "+value);const res=Array.from({length}).fill(0);for(let i=length-1;i>=0;i--)res[i]=255&value,value>>>=8;return new Uint8Array(res)}function strxor(a,b){const arr=new Uint8Array(a.length);for(let i=0;i<a.length;i++)arr[i]=a[i]^b[i];return arr}function anum(item){if(!Number.isSafeInteger(item))throw new Error("number expected")}function expand_message_xmd(msg,DST,lenInBytes,H){(0,utils_js_1.abytes)(msg),(0,utils_js_1.abytes)(DST),anum(lenInBytes),DST.length>255&&(DST=H((0,utils_js_1.concatBytes)((0,utils_js_1.utf8ToBytes)("H2C-OVERSIZE-DST-"),DST)));const{outputLen:b_in_bytes,blockLen:r_in_bytes}=H,ell=Math.ceil(lenInBytes/b_in_bytes);if(lenInBytes>65535||ell>255)throw new Error("expand_message_xmd: invalid lenInBytes");const DST_prime=(0,utils_js_1.concatBytes)(DST,i2osp(DST.length,1)),Z_pad=i2osp(0,r_in_bytes),l_i_b_str=i2osp(lenInBytes,2),b=new Array(ell),b_0=H((0,utils_js_1.concatBytes)(Z_pad,msg,l_i_b_str,i2osp(0,1),DST_prime));b[0]=H((0,utils_js_1.concatBytes)(b_0,i2osp(1,1),DST_prime));for(let i=1;i<=ell;i++){const args=[strxor(b_0,b[i-1]),i2osp(i+1,1),DST_prime];b[i]=H((0,utils_js_1.concatBytes)(...args))}return(0,utils_js_1.concatBytes)(...b).slice(0,lenInBytes)}function expand_message_xof(msg,DST,lenInBytes,k,H){if((0,utils_js_1.abytes)(msg),(0,utils_js_1.abytes)(DST),anum(lenInBytes),DST.length>255){const dkLen=Math.ceil(2*k/8);DST=H.create({dkLen}).update((0,utils_js_1.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(DST).digest()}if(lenInBytes>65535||DST.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return H.create({dkLen:lenInBytes}).update(msg).update(i2osp(lenInBytes,2)).update(DST).update(i2osp(DST.length,1)).digest()}function hash_to_field(msg,count,options){(0,utils_js_1.validateObject)(options,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p,k,m,hash,expand,DST:_DST}=options;(0,utils_js_1.abytes)(msg),anum(count);const DST="string"==typeof _DST?(0,utils_js_1.utf8ToBytes)(_DST):_DST,log2p=p.toString(2).length,L=Math.ceil((log2p+k)/8),len_in_bytes=count*m*L;let prb;if("xmd"===expand)prb=expand_message_xmd(msg,DST,len_in_bytes,hash);else if("xof"===expand)prb=expand_message_xof(msg,DST,len_in_bytes,k,hash);else{if("_internal_pass"!==expand)throw new Error('expand must be "xmd" or "xof"');prb=msg}const u=new Array(count);for(let i=0;i<count;i++){const e=new Array(m);for(let j=0;j<m;j++){const elm_offset=L*(j+i*m),tv=prb.subarray(elm_offset,elm_offset+L);e[j]=(0,modular_js_1.mod)(os2ip(tv),p)}u[i]=e}return u}},"./node_modules/@noble/curves/abstract/modular.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNegativeLE=void 0,exports.mod=mod,exports.pow=pow,exports.pow2=function pow2(x,power,modulo){let res=x;for(;power-- >_0n;)res*=res,res%=modulo;return res},exports.invert=invert,exports.tonelliShanks=tonelliShanks,exports.FpSqrt=FpSqrt,exports.validateField=function validateField(field){const opts=FIELD_FIELDS.reduce((map,val)=>(map[val]="function",map),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,utils_js_1.validateObject)(field,opts)},exports.FpPow=FpPow,exports.FpInvertBatch=FpInvertBatch,exports.FpDiv=function FpDiv(f,lhs,rhs){return f.mul(lhs,"bigint"==typeof rhs?invert(rhs,f.ORDER):f.inv(rhs))},exports.FpLegendre=FpLegendre,exports.FpIsSquare=function FpIsSquare(f){const legendre=FpLegendre(f.ORDER);return x=>{const p=legendre(f,x);return f.eql(p,f.ZERO)||f.eql(p,f.ONE)}},exports.nLength=nLength,exports.Field=function Field(ORDER,bitLen,isLE=!1,redef={}){if(ORDER<=_0n)throw new Error("invalid field: expected ORDER > 0, got "+ORDER);const{nBitLength:BITS,nByteLength:BYTES}=nLength(ORDER,bitLen);if(BYTES>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let sqrtP;const f=Object.freeze({ORDER,isLE,BITS,BYTES,MASK:(0,utils_js_1.bitMask)(BITS),ZERO:_0n,ONE:_1n,create:num=>mod(num,ORDER),isValid:num=>{if("bigint"!=typeof num)throw new Error("invalid field element: expected bigint, got "+typeof num);return _0n<=num&&num<ORDER},is0:num=>num===_0n,isOdd:num=>(num&_1n)===_1n,neg:num=>mod(-num,ORDER),eql:(lhs,rhs)=>lhs===rhs,sqr:num=>mod(num*num,ORDER),add:(lhs,rhs)=>mod(lhs+rhs,ORDER),sub:(lhs,rhs)=>mod(lhs-rhs,ORDER),mul:(lhs,rhs)=>mod(lhs*rhs,ORDER),pow:(num,power)=>FpPow(f,num,power),div:(lhs,rhs)=>mod(lhs*invert(rhs,ORDER),ORDER),sqrN:num=>num*num,addN:(lhs,rhs)=>lhs+rhs,subN:(lhs,rhs)=>lhs-rhs,mulN:(lhs,rhs)=>lhs*rhs,inv:num=>invert(num,ORDER),sqrt:redef.sqrt||(n=>(sqrtP||(sqrtP=FpSqrt(ORDER)),sqrtP(f,n))),invertBatch:lst=>FpInvertBatch(f,lst),cmov:(a,b,c)=>c?b:a,toBytes:num=>isLE?(0,utils_js_1.numberToBytesLE)(num,BYTES):(0,utils_js_1.numberToBytesBE)(num,BYTES),fromBytes:bytes=>{if(bytes.length!==BYTES)throw new Error("Field.fromBytes: expected "+BYTES+" bytes, got "+bytes.length);return isLE?(0,utils_js_1.bytesToNumberLE)(bytes):(0,utils_js_1.bytesToNumberBE)(bytes)}});return Object.freeze(f)},exports.FpSqrtOdd=function FpSqrtOdd(Fp,elm){if(!Fp.isOdd)throw new Error("Field doesn't have isOdd");const root=Fp.sqrt(elm);return Fp.isOdd(root)?root:Fp.neg(root)},exports.FpSqrtEven=function FpSqrtEven(Fp,elm){if(!Fp.isOdd)throw new Error("Field doesn't have isOdd");const root=Fp.sqrt(elm);return Fp.isOdd(root)?Fp.neg(root):root},exports.hashToPrivateScalar=function hashToPrivateScalar(hash,groupOrder,isLE=!1){const hashLen=(hash=(0,utils_js_1.ensureBytes)("privateHash",hash)).length,minLen=nLength(groupOrder).nByteLength+8;if(minLen<24||hashLen<minLen||hashLen>1024)throw new Error("hashToPrivateScalar: expected "+minLen+"-1024 bytes of input, got "+hashLen);return mod(isLE?(0,utils_js_1.bytesToNumberLE)(hash):(0,utils_js_1.bytesToNumberBE)(hash),groupOrder-_1n)+_1n},exports.getFieldBytesLength=getFieldBytesLength,exports.getMinHashLength=getMinHashLength,exports.mapHashToField=function mapHashToField(key,fieldOrder,isLE=!1){const len=key.length,fieldLen=getFieldBytesLength(fieldOrder),minLen=getMinHashLength(fieldOrder);if(len<16||len<minLen||len>1024)throw new Error("expected "+minLen+"-1024 bytes of input, got "+len);const reduced=mod(isLE?(0,utils_js_1.bytesToNumberLE)(key):(0,utils_js_1.bytesToNumberBE)(key),fieldOrder-_1n)+_1n;return isLE?(0,utils_js_1.numberToBytesLE)(reduced,fieldLen):(0,utils_js_1.numberToBytesBE)(reduced,fieldLen)};const utils_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/utils.js"),_0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_3n=BigInt(3),_4n=BigInt(4),_5n=BigInt(5),_8n=BigInt(8);function mod(a,b){const result=a%b;return result>=_0n?result:b+result}function pow(num,power,modulo){if(power<_0n)throw new Error("invalid exponent, negatives unsupported");if(modulo<=_0n)throw new Error("invalid modulus");if(modulo===_1n)return _0n;let res=_1n;for(;power>_0n;)power&_1n&&(res=res*num%modulo),num=num*num%modulo,power>>=_1n;return res}function invert(number,modulo){if(number===_0n)throw new Error("invert: expected non-zero number");if(modulo<=_0n)throw new Error("invert: expected positive modulus, got "+modulo);let a=mod(number,modulo),b=modulo,x=_0n,y=_1n,u=_1n,v=_0n;for(;a!==_0n;){const q=b/a,r=b%a,m=x-u*q,n=y-v*q;b=a,a=r,x=u,y=v,u=m,v=n}if(b!==_1n)throw new Error("invert: does not exist");return mod(x,modulo)}function tonelliShanks(P){const legendreC=(P-_1n)/_2n;let Q,S,Z;for(Q=P-_1n,S=0;Q%_2n===_0n;Q/=_2n,S++);for(Z=_2n;Z<P&&pow(Z,legendreC,P)!==P-_1n;Z++)if(Z>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===S){const p1div4=(P+_1n)/_4n;return function tonelliFast(Fp,n){const root=Fp.pow(n,p1div4);if(!Fp.eql(Fp.sqr(root),n))throw new Error("Cannot find square root");return root}}const Q1div2=(Q+_1n)/_2n;return function tonelliSlow(Fp,n){if(Fp.pow(n,legendreC)===Fp.neg(Fp.ONE))throw new Error("Cannot find square root");let r=S,g=Fp.pow(Fp.mul(Fp.ONE,Z),Q),x=Fp.pow(n,Q1div2),b=Fp.pow(n,Q);for(;!Fp.eql(b,Fp.ONE);){if(Fp.eql(b,Fp.ZERO))return Fp.ZERO;let m=1;for(let t2=Fp.sqr(b);m<r&&!Fp.eql(t2,Fp.ONE);m++)t2=Fp.sqr(t2);const ge=Fp.pow(g,_1n<<BigInt(r-m-1));g=Fp.sqr(ge),x=Fp.mul(x,ge),b=Fp.mul(b,g),r=m}return x}}function FpSqrt(P){if(P%_4n===_3n){const p1div4=(P+_1n)/_4n;return function sqrt3mod4(Fp,n){const root=Fp.pow(n,p1div4);if(!Fp.eql(Fp.sqr(root),n))throw new Error("Cannot find square root");return root}}if(P%_8n===_5n){const c1=(P-_5n)/_8n;return function sqrt5mod8(Fp,n){const n2=Fp.mul(n,_2n),v=Fp.pow(n2,c1),nv=Fp.mul(n,v),i=Fp.mul(Fp.mul(nv,_2n),v),root=Fp.mul(nv,Fp.sub(i,Fp.ONE));if(!Fp.eql(Fp.sqr(root),n))throw new Error("Cannot find square root");return root}}return tonelliShanks(P)}exports.isNegativeLE=(num,modulo)=>(mod(num,modulo)&_1n)===_1n;const FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function FpPow(f,num,power){if(power<_0n)throw new Error("invalid exponent, negatives unsupported");if(power===_0n)return f.ONE;if(power===_1n)return num;let p=f.ONE,d=num;for(;power>_0n;)power&_1n&&(p=f.mul(p,d)),d=f.sqr(d),power>>=_1n;return p}function FpInvertBatch(f,nums){const tmp=new Array(nums.length),lastMultiplied=nums.reduce((acc,num,i)=>f.is0(num)?acc:(tmp[i]=acc,f.mul(acc,num)),f.ONE),inverted=f.inv(lastMultiplied);return nums.reduceRight((acc,num,i)=>f.is0(num)?acc:(tmp[i]=f.mul(acc,tmp[i]),f.mul(acc,num)),inverted),tmp}function FpLegendre(order){const legendreConst=(order-_1n)/_2n;return(f,x)=>f.pow(x,legendreConst)}function nLength(n,nBitLength){const _nBitLength=void 0!==nBitLength?nBitLength:n.toString(2).length;return{nBitLength:_nBitLength,nByteLength:Math.ceil(_nBitLength/8)}}function getFieldBytesLength(fieldOrder){if("bigint"!=typeof fieldOrder)throw new Error("field order must be bigint");const bitLength=fieldOrder.toString(2).length;return Math.ceil(bitLength/8)}function getMinHashLength(fieldOrder){const length=getFieldBytesLength(fieldOrder);return length+Math.ceil(length/2)}},"./node_modules/@noble/curves/abstract/montgomery.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.montgomery=function montgomery(curveDef){const CURVE=function validateOpts(curve){return(0,utils_js_1.validateObject)(curve,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...curve})}(curveDef),{P}=CURVE,modP=n=>(0,modular_js_1.mod)(n,P),montgomeryBits=CURVE.montgomeryBits,montgomeryBytes=Math.ceil(montgomeryBits/8),fieldLen=CURVE.nByteLength,adjustScalarBytes=CURVE.adjustScalarBytes||(bytes=>bytes),powPminus2=CURVE.powPminus2||(x=>(0,modular_js_1.pow)(x,P-BigInt(2),P));function cswap(swap,x_2,x_3){const dummy=modP(swap*(x_2-x_3));return[x_2=modP(x_2-dummy),x_3=modP(x_3+dummy)]}const a24=(CURVE.a-BigInt(2))/BigInt(4);function encodeUCoordinate(u){return(0,utils_js_1.numberToBytesLE)(modP(u),montgomeryBytes)}function scalarMult(scalar,u){const pointU=function decodeUCoordinate(uEnc){const u=(0,utils_js_1.ensureBytes)("u coordinate",uEnc,montgomeryBytes);return 32===fieldLen&&(u[31]&=127),(0,utils_js_1.bytesToNumberLE)(u)}(u),pu=function montgomeryLadder(u,scalar){(0,utils_js_1.aInRange)("u",u,_0n,P),(0,utils_js_1.aInRange)("scalar",scalar,_0n,P);const k=scalar,x_1=u;let sw,x_2=_1n,z_2=_0n,x_3=u,z_3=_1n,swap=_0n;for(let t=BigInt(montgomeryBits-1);t>=_0n;t--){const k_t=k>>t&_1n;swap^=k_t,sw=cswap(swap,x_2,x_3),x_2=sw[0],x_3=sw[1],sw=cswap(swap,z_2,z_3),z_2=sw[0],z_3=sw[1],swap=k_t;const A=x_2+z_2,AA=modP(A*A),B=x_2-z_2,BB=modP(B*B),E=AA-BB,C=x_3+z_3,DA=modP((x_3-z_3)*A),CB=modP(C*B),dacb=DA+CB,da_cb=DA-CB;x_3=modP(dacb*dacb),z_3=modP(x_1*modP(da_cb*da_cb)),x_2=modP(AA*BB),z_2=modP(E*(AA+modP(a24*E)))}sw=cswap(swap,x_2,x_3),x_2=sw[0],x_3=sw[1],sw=cswap(swap,z_2,z_3),z_2=sw[0],z_3=sw[1];const z2=powPminus2(z_2);return modP(x_2*z2)}(pointU,function decodeScalar(n){const bytes=(0,utils_js_1.ensureBytes)("scalar",n),len=bytes.length;if(len!==montgomeryBytes&&len!==fieldLen)throw new Error("invalid scalar, expected "+montgomeryBytes+" or "+fieldLen+" bytes, got "+len);return(0,utils_js_1.bytesToNumberLE)(adjustScalarBytes(bytes))}(scalar));if(pu===_0n)throw new Error("invalid private or public key received");return encodeUCoordinate(pu)}const GuBytes=encodeUCoordinate(CURVE.Gu);function scalarMultBase(scalar){return scalarMult(scalar,GuBytes)}return{scalarMult,scalarMultBase,getSharedSecret:(privateKey,publicKey)=>scalarMult(privateKey,publicKey),getPublicKey:privateKey=>scalarMultBase(privateKey),utils:{randomPrivateKey:()=>CURVE.randomBytes(CURVE.nByteLength)},GuBytes}};const modular_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/modular.js"),utils_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/utils.js"),_0n=BigInt(0),_1n=BigInt(1)},"./node_modules/@noble/curves/abstract/utils.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notImplemented=exports.bitMask=void 0,exports.isBytes=isBytes,exports.abytes=abytes,exports.abool=function abool(title,value){if("boolean"!=typeof value)throw new Error(title+" boolean expected, got "+value)},exports.bytesToHex=bytesToHex,exports.numberToHexUnpadded=numberToHexUnpadded,exports.hexToNumber=hexToNumber,exports.hexToBytes=hexToBytes,exports.bytesToNumberBE=function bytesToNumberBE(bytes){return hexToNumber(bytesToHex(bytes))},exports.bytesToNumberLE=function bytesToNumberLE(bytes){return abytes(bytes),hexToNumber(bytesToHex(Uint8Array.from(bytes).reverse()))},exports.numberToBytesBE=numberToBytesBE,exports.numberToBytesLE=function numberToBytesLE(n,len){return numberToBytesBE(n,len).reverse()},exports.numberToVarBytesBE=function numberToVarBytesBE(n){return hexToBytes(numberToHexUnpadded(n))},exports.ensureBytes=function ensureBytes(title,hex,expectedLength){let res;if("string"==typeof hex)try{res=hexToBytes(hex)}catch(e){throw new Error(title+" must be hex string or Uint8Array, cause: "+e)}else{if(!isBytes(hex))throw new Error(title+" must be hex string or Uint8Array");res=Uint8Array.from(hex)}const len=res.length;if("number"==typeof expectedLength&&len!==expectedLength)throw new Error(title+" of length "+expectedLength+" expected, got "+len);return res},exports.concatBytes=concatBytes,exports.equalBytes=function equalBytes(a,b){if(a.length!==b.length)return!1;let diff=0;for(let i=0;i<a.length;i++)diff|=a[i]^b[i];return 0===diff},exports.utf8ToBytes=function utf8ToBytes(str){if("string"!=typeof str)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(str))},exports.inRange=inRange,exports.aInRange=function aInRange(title,n,min,max){if(!inRange(n,min,max))throw new Error("expected valid "+title+": "+min+" <= n < "+max+", got "+n)},exports.bitLen=function bitLen(n){let len;for(len=0;n>_0n;n>>=_1n,len+=1);return len},exports.bitGet=function bitGet(n,pos){return n>>BigInt(pos)&_1n},exports.bitSet=function bitSet(n,pos,value){return n|(value?_1n:_0n)<<BigInt(pos)},exports.createHmacDrbg=function createHmacDrbg(hashLen,qByteLen,hmacFn){if("number"!=typeof hashLen||hashLen<2)throw new Error("hashLen must be a number");if("number"!=typeof qByteLen||qByteLen<2)throw new Error("qByteLen must be a number");if("function"!=typeof hmacFn)throw new Error("hmacFn must be a function");let v=u8n(hashLen),k=u8n(hashLen),i=0;const reset=()=>{v.fill(1),k.fill(0),i=0},h=(...b)=>hmacFn(k,v,...b),reseed=(seed=u8n())=>{k=h(u8fr([0]),seed),v=h(),0!==seed.length&&(k=h(u8fr([1]),seed),v=h())},gen=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let len=0;const out=[];for(;len<qByteLen;){v=h();const sl=v.slice();out.push(sl),len+=v.length}return concatBytes(...out)};return(seed,pred)=>{let res;for(reset(),reseed(seed);!(res=pred(gen()));)reseed();return reset(),res}},exports.validateObject=function validateObject(object,validators,optValidators={}){const checkField=(fieldName,type,isOptional)=>{const checkVal=validatorFns[type];if("function"!=typeof checkVal)throw new Error("invalid validator function");const val=object[fieldName];if(!(isOptional&&void 0===val||checkVal(val,object)))throw new Error("param "+String(fieldName)+" is invalid. Expected "+type+", got "+val)};for(const[fieldName,type]of Object.entries(validators))checkField(fieldName,type,!1);for(const[fieldName,type]of Object.entries(optValidators))checkField(fieldName,type,!0);return object},exports.memoized=function memoized(fn){const map=new WeakMap;return(arg,...args)=>{const val=map.get(arg);if(void 0!==val)return val;const computed=fn(arg,...args);return map.set(arg,computed),computed}};const _0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2);function isBytes(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name}function abytes(item){if(!isBytes(item))throw new Error("Uint8Array expected")}const hexes=Array.from({length:256},(_,i)=>i.toString(16).padStart(2,"0"));function bytesToHex(bytes){abytes(bytes);let hex="";for(let i=0;i<bytes.length;i++)hex+=hexes[bytes[i]];return hex}function numberToHexUnpadded(num){const hex=num.toString(16);return 1&hex.length?"0"+hex:hex}function hexToNumber(hex){if("string"!=typeof hex)throw new Error("hex string expected, got "+typeof hex);return""===hex?_0n:BigInt("0x"+hex)}const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(ch){return ch>=asciis._0&&ch<=asciis._9?ch-asciis._0:ch>=asciis.A&&ch<=asciis.F?ch-(asciis.A-10):ch>=asciis.a&&ch<=asciis.f?ch-(asciis.a-10):void 0}function hexToBytes(hex){if("string"!=typeof hex)throw new Error("hex string expected, got "+typeof hex);const hl=hex.length,al=hl/2;if(hl%2)throw new Error("hex string expected, got unpadded hex of length "+hl);const array=new Uint8Array(al);for(let ai=0,hi=0;ai<al;ai++,hi+=2){const n1=asciiToBase16(hex.charCodeAt(hi)),n2=asciiToBase16(hex.charCodeAt(hi+1));if(void 0===n1||void 0===n2){const char=hex[hi]+hex[hi+1];throw new Error('hex string expected, got non-hex character "'+char+'" at index '+hi)}array[ai]=16*n1+n2}return array}function numberToBytesBE(n,len){return hexToBytes(n.toString(16).padStart(2*len,"0"))}function concatBytes(...arrays){let sum=0;for(let i=0;i<arrays.length;i++){const a=arrays[i];abytes(a),sum+=a.length}const res=new Uint8Array(sum);for(let i=0,pad=0;i<arrays.length;i++){const a=arrays[i];res.set(a,pad),pad+=a.length}return res}const isPosBig=n=>"bigint"==typeof n&&_0n<=n;function inRange(n,min,max){return isPosBig(n)&&isPosBig(min)&&isPosBig(max)&&min<=n&&n<max}exports.bitMask=n=>(_2n<<BigInt(n-1))-_1n;const u8n=data=>new Uint8Array(data),u8fr=arr=>Uint8Array.from(arr);const validatorFns={bigint:val=>"bigint"==typeof val,function:val=>"function"==typeof val,boolean:val=>"boolean"==typeof val,string:val=>"string"==typeof val,stringOrUint8Array:val=>"string"==typeof val||isBytes(val),isSafeInteger:val=>Number.isSafeInteger(val),array:val=>Array.isArray(val),field:(val,object)=>object.Fp.isValid(val),hash:val=>"function"==typeof val&&Number.isSafeInteger(val.outputLen)};exports.notImplemented=()=>{throw new Error("not implemented")}},"./node_modules/@noble/curves/ed25519.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hash_to_ristretto255=exports.hashToRistretto255=exports.RistrettoPoint=exports.encodeToCurve=exports.hashToCurve=exports.edwardsToMontgomery=exports.x25519=exports.ed25519ph=exports.ed25519ctx=exports.ed25519=exports.ED25519_TORSION_SUBGROUP=void 0,exports.edwardsToMontgomeryPub=edwardsToMontgomeryPub,exports.edwardsToMontgomeryPriv=function edwardsToMontgomeryPriv(edwardsPriv){const hashed=ed25519Defaults.hash(edwardsPriv.subarray(0,32));return ed25519Defaults.adjustScalarBytes(hashed).subarray(0,32)};const sha512_1=__webpack_require__("./node_modules/@noble/hashes/sha512.js"),utils_1=__webpack_require__("./node_modules/@noble/hashes/utils.js"),curve_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/curve.js"),edwards_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/edwards.js"),hash_to_curve_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/hash-to-curve.js"),modular_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/modular.js"),montgomery_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/montgomery.js"),utils_js_1=__webpack_require__("./node_modules/@noble/curves/abstract/utils.js"),ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),_0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_3n=BigInt(3),_5n=BigInt(5),_8n=BigInt(8);function ed25519_pow_2_252_3(x){const _10n=BigInt(10),_20n=BigInt(20),_40n=BigInt(40),_80n=BigInt(80),P=ED25519_P,b2=x*x%P*x%P,b4=(0,modular_js_1.pow2)(b2,_2n,P)*b2%P,b5=(0,modular_js_1.pow2)(b4,_1n,P)*x%P,b10=(0,modular_js_1.pow2)(b5,_5n,P)*b5%P,b20=(0,modular_js_1.pow2)(b10,_10n,P)*b10%P,b40=(0,modular_js_1.pow2)(b20,_20n,P)*b20%P,b80=(0,modular_js_1.pow2)(b40,_40n,P)*b40%P,b160=(0,modular_js_1.pow2)(b80,_80n,P)*b80%P,b240=(0,modular_js_1.pow2)(b160,_80n,P)*b80%P,b250=(0,modular_js_1.pow2)(b240,_10n,P)*b10%P;return{pow_p_5_8:(0,modular_js_1.pow2)(b250,_2n,P)*x%P,b2}}function adjustScalarBytes(bytes){return bytes[0]&=248,bytes[31]&=127,bytes[31]|=64,bytes}function uvRatio(u,v){const P=ED25519_P,v3=(0,modular_js_1.mod)(v*v*v,P),pow=ed25519_pow_2_252_3(u*(0,modular_js_1.mod)(v3*v3*v,P)).pow_p_5_8;let x=(0,modular_js_1.mod)(u*v3*pow,P);const vx2=(0,modular_js_1.mod)(v*x*x,P),root1=x,root2=(0,modular_js_1.mod)(x*ED25519_SQRT_M1,P),useRoot1=vx2===u,useRoot2=vx2===(0,modular_js_1.mod)(-u,P),noRoot=vx2===(0,modular_js_1.mod)(-u*ED25519_SQRT_M1,P);return useRoot1&&(x=root1),(useRoot2||noRoot)&&(x=root2),(0,modular_js_1.isNegativeLE)(x,P)&&(x=(0,modular_js_1.mod)(-x,P)),{isValid:useRoot1||useRoot2,value:x}}exports.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const Fp=(()=>(0,modular_js_1.Field)(ED25519_P,void 0,!0))(),ed25519Defaults=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:_8n,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512_1.sha512,randomBytes:utils_1.randomBytes,adjustScalarBytes,uvRatio}))();function ed25519_domain(data,ctx,phflag){if(ctx.length>255)throw new Error("Context is too big");return(0,utils_1.concatBytes)((0,utils_1.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([phflag?1:0,ctx.length]),ctx,data)}function edwardsToMontgomeryPub(edwardsPub){const{y}=exports.ed25519.ExtendedPoint.fromHex(edwardsPub),_1n=BigInt(1);return Fp.toBytes(Fp.create((_1n+y)*Fp.inv(_1n-y)))}exports.ed25519=(0,edwards_js_1.twistedEdwards)(ed25519Defaults),exports.ed25519ctx=(0,edwards_js_1.twistedEdwards)({...ed25519Defaults,domain:ed25519_domain}),exports.ed25519ph=(0,edwards_js_1.twistedEdwards)(Object.assign({},ed25519Defaults,{domain:ed25519_domain,prehash:sha512_1.sha512})),exports.x25519=(0,montgomery_js_1.montgomery)({P:ED25519_P,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:x=>{const P=ED25519_P,{pow_p_5_8,b2}=ed25519_pow_2_252_3(x);return(0,modular_js_1.mod)((0,modular_js_1.pow2)(pow_p_5_8,_3n,P)*b2,P)},adjustScalarBytes,randomBytes:utils_1.randomBytes}),exports.edwardsToMontgomery=edwardsToMontgomeryPub;const ELL2_C1=(()=>(Fp.ORDER+_3n)/_8n)(),ELL2_C2=(()=>Fp.pow(_2n,ELL2_C1))(),ELL2_C3=(()=>Fp.sqrt(Fp.neg(Fp.ONE)))();const ELL2_C1_EDWARDS=(()=>(0,modular_js_1.FpSqrtEven)(Fp,Fp.neg(BigInt(486664))))();function map_to_curve_elligator2_edwards25519(u){const{xMn,xMd,yMn,yMd}=function map_to_curve_elligator2_curve25519(u){const ELL2_C4=(Fp.ORDER-_5n)/_8n,ELL2_J=BigInt(486662);let tv1=Fp.sqr(u);tv1=Fp.mul(tv1,_2n);let xd=Fp.add(tv1,Fp.ONE),x1n=Fp.neg(ELL2_J),tv2=Fp.sqr(xd),gxd=Fp.mul(tv2,xd),gx1=Fp.mul(tv1,ELL2_J);gx1=Fp.mul(gx1,x1n),gx1=Fp.add(gx1,tv2),gx1=Fp.mul(gx1,x1n);let tv3=Fp.sqr(gxd);tv2=Fp.sqr(tv3),tv3=Fp.mul(tv3,gxd),tv3=Fp.mul(tv3,gx1),tv2=Fp.mul(tv2,tv3);let y11=Fp.pow(tv2,ELL2_C4);y11=Fp.mul(y11,tv3);let y12=Fp.mul(y11,ELL2_C3);tv2=Fp.sqr(y11),tv2=Fp.mul(tv2,gxd);let e1=Fp.eql(tv2,gx1),y1=Fp.cmov(y12,y11,e1),x2n=Fp.mul(x1n,tv1),y21=Fp.mul(y11,u);y21=Fp.mul(y21,ELL2_C2);let y22=Fp.mul(y21,ELL2_C3),gx2=Fp.mul(gx1,tv1);tv2=Fp.sqr(y21),tv2=Fp.mul(tv2,gxd);let e2=Fp.eql(tv2,gx2),y2=Fp.cmov(y22,y21,e2);tv2=Fp.sqr(y1),tv2=Fp.mul(tv2,gxd);let e3=Fp.eql(tv2,gx1),xn=Fp.cmov(x2n,x1n,e3),y=Fp.cmov(y2,y1,e3),e4=Fp.isOdd(y);return y=Fp.cmov(y,Fp.neg(y),e3!==e4),{xMn:xn,xMd:xd,yMn:y,yMd:_1n}}(u);let xn=Fp.mul(xMn,yMd);xn=Fp.mul(xn,ELL2_C1_EDWARDS);let xd=Fp.mul(xMd,yMn),yn=Fp.sub(xMn,xMd),yd=Fp.add(xMn,xMd),tv1=Fp.mul(xd,yd),e=Fp.eql(tv1,Fp.ZERO);xn=Fp.cmov(xn,Fp.ZERO,e),xd=Fp.cmov(xd,Fp.ONE,e),yn=Fp.cmov(yn,Fp.ONE,e),yd=Fp.cmov(yd,Fp.ONE,e);const inv=Fp.invertBatch([xd,yd]);return{x:Fp.mul(xn,inv[0]),y:Fp.mul(yn,inv[1])}}const htf=(()=>(0,hash_to_curve_js_1.createHasher)(exports.ed25519.ExtendedPoint,scalars=>map_to_curve_elligator2_edwards25519(scalars[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:Fp.ORDER,m:1,k:128,expand:"xmd",hash:sha512_1.sha512}))();function assertRstPoint(other){if(!(other instanceof RistPoint))throw new Error("RistrettoPoint expected")}exports.hashToCurve=htf.hashToCurve,exports.encodeToCurve=htf.encodeToCurve;const SQRT_M1=ED25519_SQRT_M1,SQRT_AD_MINUS_ONE=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),INVSQRT_A_MINUS_D=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ONE_MINUS_D_SQ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),D_MINUS_ONE_SQ=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),invertSqrt=number=>uvRatio(_1n,number),MAX_255B=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),bytes255ToNumberLE=bytes=>exports.ed25519.CURVE.Fp.create((0,utils_js_1.bytesToNumberLE)(bytes)&MAX_255B);function calcElligatorRistrettoMap(r0){const{d}=exports.ed25519.CURVE,P=exports.ed25519.CURVE.Fp.ORDER,mod=exports.ed25519.CURVE.Fp.create,r=mod(SQRT_M1*r0*r0),Ns=mod((r+_1n)*ONE_MINUS_D_SQ);let c=BigInt(-1);const D=mod((c-d*r)*mod(r+d));let{isValid:Ns_D_is_sq,value:s}=uvRatio(Ns,D),s_=mod(s*r0);(0,modular_js_1.isNegativeLE)(s_,P)||(s_=mod(-s_)),Ns_D_is_sq||(s=s_),Ns_D_is_sq||(c=r);const Nt=mod(c*(r-_1n)*D_MINUS_ONE_SQ-D),s2=s*s,W0=mod((s+s)*D),W1=mod(Nt*SQRT_AD_MINUS_ONE),W2=mod(_1n-s2),W3=mod(_1n+s2);return new exports.ed25519.ExtendedPoint(mod(W0*W3),mod(W2*W1),mod(W1*W3),mod(W0*W2))}class RistPoint{constructor(ep){this.ep=ep}static fromAffine(ap){return new RistPoint(exports.ed25519.ExtendedPoint.fromAffine(ap))}static hashToCurve(hex){hex=(0,utils_js_1.ensureBytes)("ristrettoHash",hex,64);const R1=calcElligatorRistrettoMap(bytes255ToNumberLE(hex.slice(0,32))),R2=calcElligatorRistrettoMap(bytes255ToNumberLE(hex.slice(32,64)));return new RistPoint(R1.add(R2))}static fromHex(hex){hex=(0,utils_js_1.ensureBytes)("ristrettoHex",hex,32);const{a,d}=exports.ed25519.CURVE,P=exports.ed25519.CURVE.Fp.ORDER,mod=exports.ed25519.CURVE.Fp.create,emsg="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",s=bytes255ToNumberLE(hex);if(!(0,utils_js_1.equalBytes)((0,utils_js_1.numberToBytesLE)(s,32),hex)||(0,modular_js_1.isNegativeLE)(s,P))throw new Error(emsg);const s2=mod(s*s),u1=mod(_1n+a*s2),u2=mod(_1n-a*s2),u1_2=mod(u1*u1),u2_2=mod(u2*u2),v=mod(a*d*u1_2-u2_2),{isValid,value:I}=invertSqrt(mod(v*u2_2)),Dx=mod(I*u2),Dy=mod(I*Dx*v);let x=mod((s+s)*Dx);(0,modular_js_1.isNegativeLE)(x,P)&&(x=mod(-x));const y=mod(u1*Dy),t=mod(x*y);if(!isValid||(0,modular_js_1.isNegativeLE)(t,P)||y===_0n)throw new Error(emsg);return new RistPoint(new exports.ed25519.ExtendedPoint(x,y,_1n,t))}static msm(points,scalars){const Fn=(0,modular_js_1.Field)(exports.ed25519.CURVE.n,exports.ed25519.CURVE.nBitLength);return(0,curve_js_1.pippenger)(RistPoint,Fn,points,scalars)}toRawBytes(){let{ex:x,ey:y,ez:z,et:t}=this.ep;const P=exports.ed25519.CURVE.Fp.ORDER,mod=exports.ed25519.CURVE.Fp.create,u1=mod(mod(z+y)*mod(z-y)),u2=mod(x*y),u2sq=mod(u2*u2),{value:invsqrt}=invertSqrt(mod(u1*u2sq)),D1=mod(invsqrt*u1),D2=mod(invsqrt*u2),zInv=mod(D1*D2*t);let D;if((0,modular_js_1.isNegativeLE)(t*zInv,P)){let _x=mod(y*SQRT_M1),_y=mod(x*SQRT_M1);x=_x,y=_y,D=mod(D1*INVSQRT_A_MINUS_D)}else D=D2;(0,modular_js_1.isNegativeLE)(x*zInv,P)&&(y=mod(-y));let s=mod((z-y)*D);return(0,modular_js_1.isNegativeLE)(s,P)&&(s=mod(-s)),(0,utils_js_1.numberToBytesLE)(s,32)}toHex(){return(0,utils_js_1.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(other){assertRstPoint(other);const{ex:X1,ey:Y1}=this.ep,{ex:X2,ey:Y2}=other.ep,mod=exports.ed25519.CURVE.Fp.create,one=mod(X1*Y2)===mod(Y1*X2),two=mod(Y1*Y2)===mod(X1*X2);return one||two}add(other){return assertRstPoint(other),new RistPoint(this.ep.add(other.ep))}subtract(other){return assertRstPoint(other),new RistPoint(this.ep.subtract(other.ep))}multiply(scalar){return new RistPoint(this.ep.multiply(scalar))}multiplyUnsafe(scalar){return new RistPoint(this.ep.multiplyUnsafe(scalar))}double(){return new RistPoint(this.ep.double())}negate(){return new RistPoint(this.ep.negate())}}exports.RistrettoPoint=(RistPoint.BASE||(RistPoint.BASE=new RistPoint(exports.ed25519.ExtendedPoint.BASE)),RistPoint.ZERO||(RistPoint.ZERO=new RistPoint(exports.ed25519.ExtendedPoint.ZERO)),RistPoint);exports.hashToRistretto255=(msg,options)=>{const d=options.DST,DST="string"==typeof d?(0,utils_1.utf8ToBytes)(d):d,uniform_bytes=(0,hash_to_curve_js_1.expand_message_xmd)(msg,DST,64,sha512_1.sha512);return RistPoint.hashToCurve(uniform_bytes)},exports.hash_to_ristretto255=exports.hashToRistretto255},"./node_modules/@noble/hashes/_assert.js":(__unused_webpack_module,exports)=>{"use strict";function anumber(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function abytes(b,...lengths){if(!function isBytes(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name}(b))throw new Error("Uint8Array expected");if(lengths.length>0&&!lengths.includes(b.length))throw new Error("Uint8Array expected of length "+lengths+", got length="+b.length)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.anumber=anumber,exports.abytes=abytes,exports.ahash=function ahash(h){if("function"!=typeof h||"function"!=typeof h.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");anumber(h.outputLen),anumber(h.blockLen)},exports.aexists=function aexists(instance,checkFinished=!0){if(instance.destroyed)throw new Error("Hash instance has been destroyed");if(checkFinished&&instance.finished)throw new Error("Hash#digest() has already been called")},exports.aoutput=function aoutput(out,instance){abytes(out);const min=instance.outputLen;if(out.length<min)throw new Error("digestInto() expects output buffer of length at least "+min)}},"./node_modules/@noble/hashes/_md.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HashMD=void 0,exports.setBigUint64=setBigUint64,exports.Chi=function Chi(a,b,c){return a&b^~a&c},exports.Maj=function Maj(a,b,c){return a&b^a&c^b&c};const _assert_js_1=__webpack_require__("./node_modules/@noble/hashes/_assert.js"),utils_js_1=__webpack_require__("./node_modules/@noble/hashes/utils.js");function setBigUint64(view,byteOffset,value,isLE){if("function"==typeof view.setBigUint64)return view.setBigUint64(byteOffset,value,isLE);const _32n=BigInt(32),_u32_max=BigInt(4294967295),wh=Number(value>>_32n&_u32_max),wl=Number(value&_u32_max),h=isLE?4:0,l=isLE?0:4;view.setUint32(byteOffset+h,wh,isLE),view.setUint32(byteOffset+l,wl,isLE)}class HashMD extends utils_js_1.Hash{constructor(blockLen,outputLen,padOffset,isLE){super(),this.blockLen=blockLen,this.outputLen=outputLen,this.padOffset=padOffset,this.isLE=isLE,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(blockLen),this.view=(0,utils_js_1.createView)(this.buffer)}update(data){(0,_assert_js_1.aexists)(this);const{view,buffer,blockLen}=this,len=(data=(0,utils_js_1.toBytes)(data)).length;for(let pos=0;pos<len;){const take=Math.min(blockLen-this.pos,len-pos);if(take===blockLen){const dataView=(0,utils_js_1.createView)(data);for(;blockLen<=len-pos;pos+=blockLen)this.process(dataView,pos);continue}buffer.set(data.subarray(pos,pos+take),this.pos),this.pos+=take,pos+=take,this.pos===blockLen&&(this.process(view,0),this.pos=0)}return this.length+=data.length,this.roundClean(),this}digestInto(out){(0,_assert_js_1.aexists)(this),(0,_assert_js_1.aoutput)(out,this),this.finished=!0;const{buffer,view,blockLen,isLE}=this;let{pos}=this;buffer[pos++]=128,this.buffer.subarray(pos).fill(0),this.padOffset>blockLen-pos&&(this.process(view,0),pos=0);for(let i=pos;i<blockLen;i++)buffer[i]=0;setBigUint64(view,blockLen-8,BigInt(8*this.length),isLE),this.process(view,0);const oview=(0,utils_js_1.createView)(out),len=this.outputLen;if(len%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const outLen=len/4,state=this.get();if(outLen>state.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<outLen;i++)oview.setUint32(4*i,state[i],isLE)}digest(){const{buffer,outputLen}=this;this.digestInto(buffer);const res=buffer.slice(0,outputLen);return this.destroy(),res}_cloneInto(to){to||(to=new this.constructor),to.set(...this.get());const{blockLen,buffer,length,finished,destroyed,pos}=this;return to.length=length,to.pos=pos,to.finished=finished,to.destroyed=destroyed,length%blockLen&&to.buffer.set(buffer),to}}exports.HashMD=HashMD},"./node_modules/@noble/hashes/_u64.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add5L=exports.add5H=exports.add4H=exports.add4L=exports.add3H=exports.add3L=exports.rotlBL=exports.rotlBH=exports.rotlSL=exports.rotlSH=exports.rotr32L=exports.rotr32H=exports.rotrBL=exports.rotrBH=exports.rotrSL=exports.rotrSH=exports.shrSL=exports.shrSH=exports.toBig=void 0,exports.fromBig=fromBig,exports.split=split,exports.add=add;const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(n,le=!1){return le?{h:Number(n&U32_MASK64),l:Number(n>>_32n&U32_MASK64)}:{h:0|Number(n>>_32n&U32_MASK64),l:0|Number(n&U32_MASK64)}}function split(lst,le=!1){let Ah=new Uint32Array(lst.length),Al=new Uint32Array(lst.length);for(let i=0;i<lst.length;i++){const{h,l}=fromBig(lst[i],le);[Ah[i],Al[i]]=[h,l]}return[Ah,Al]}const toBig=(h,l)=>BigInt(h>>>0)<<_32n|BigInt(l>>>0);exports.toBig=toBig;const shrSH=(h,_l,s)=>h>>>s;exports.shrSH=shrSH;const shrSL=(h,l,s)=>h<<32-s|l>>>s;exports.shrSL=shrSL;const rotrSH=(h,l,s)=>h>>>s|l<<32-s;exports.rotrSH=rotrSH;const rotrSL=(h,l,s)=>h<<32-s|l>>>s;exports.rotrSL=rotrSL;const rotrBH=(h,l,s)=>h<<64-s|l>>>s-32;exports.rotrBH=rotrBH;const rotrBL=(h,l,s)=>h>>>s-32|l<<64-s;exports.rotrBL=rotrBL;const rotr32H=(_h,l)=>l;exports.rotr32H=rotr32H;const rotr32L=(h,_l)=>h;exports.rotr32L=rotr32L;const rotlSH=(h,l,s)=>h<<s|l>>>32-s;exports.rotlSH=rotlSH;const rotlSL=(h,l,s)=>l<<s|h>>>32-s;exports.rotlSL=rotlSL;const rotlBH=(h,l,s)=>l<<s-32|h>>>64-s;exports.rotlBH=rotlBH;const rotlBL=(h,l,s)=>h<<s-32|l>>>64-s;function add(Ah,Al,Bh,Bl){const l=(Al>>>0)+(Bl>>>0);return{h:Ah+Bh+(l/2**32|0)|0,l:0|l}}exports.rotlBL=rotlBL;const add3L=(Al,Bl,Cl)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0);exports.add3L=add3L;const add3H=(low,Ah,Bh,Ch)=>Ah+Bh+Ch+(low/2**32|0)|0;exports.add3H=add3H;const add4L=(Al,Bl,Cl,Dl)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0)+(Dl>>>0);exports.add4L=add4L;const add4H=(low,Ah,Bh,Ch,Dh)=>Ah+Bh+Ch+Dh+(low/2**32|0)|0;exports.add4H=add4H;const add5L=(Al,Bl,Cl,Dl,El)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0)+(Dl>>>0)+(El>>>0);exports.add5L=add5L;const add5H=(low,Ah,Bh,Ch,Dh,Eh)=>Ah+Bh+Ch+Dh+Eh+(low/2**32|0)|0;exports.add5H=add5H;const u64={fromBig,split,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add,add3L,add3H,add4L,add4H,add5H,add5L};exports.default=u64},"./node_modules/@noble/hashes/crypto.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.crypto=void 0,exports.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},"./node_modules/@noble/hashes/sha512.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sha384=exports.sha512_256=exports.sha512_224=exports.sha512=exports.SHA384=exports.SHA512_256=exports.SHA512_224=exports.SHA512=void 0;const _md_js_1=__webpack_require__("./node_modules/@noble/hashes/_md.js"),_u64_js_1=__webpack_require__("./node_modules/@noble/hashes/_u64.js"),utils_js_1=__webpack_require__("./node_modules/@noble/hashes/utils.js"),[SHA512_Kh,SHA512_Kl]=(()=>_u64_js_1.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends _md_js_1.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl}=this;return[Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl]}set(Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl){this.Ah=0|Ah,this.Al=0|Al,this.Bh=0|Bh,this.Bl=0|Bl,this.Ch=0|Ch,this.Cl=0|Cl,this.Dh=0|Dh,this.Dl=0|Dl,this.Eh=0|Eh,this.El=0|El,this.Fh=0|Fh,this.Fl=0|Fl,this.Gh=0|Gh,this.Gl=0|Gl,this.Hh=0|Hh,this.Hl=0|Hl}process(view,offset){for(let i=0;i<16;i++,offset+=4)SHA512_W_H[i]=view.getUint32(offset),SHA512_W_L[i]=view.getUint32(offset+=4);for(let i=16;i<80;i++){const W15h=0|SHA512_W_H[i-15],W15l=0|SHA512_W_L[i-15],s0h=_u64_js_1.default.rotrSH(W15h,W15l,1)^_u64_js_1.default.rotrSH(W15h,W15l,8)^_u64_js_1.default.shrSH(W15h,W15l,7),s0l=_u64_js_1.default.rotrSL(W15h,W15l,1)^_u64_js_1.default.rotrSL(W15h,W15l,8)^_u64_js_1.default.shrSL(W15h,W15l,7),W2h=0|SHA512_W_H[i-2],W2l=0|SHA512_W_L[i-2],s1h=_u64_js_1.default.rotrSH(W2h,W2l,19)^_u64_js_1.default.rotrBH(W2h,W2l,61)^_u64_js_1.default.shrSH(W2h,W2l,6),s1l=_u64_js_1.default.rotrSL(W2h,W2l,19)^_u64_js_1.default.rotrBL(W2h,W2l,61)^_u64_js_1.default.shrSL(W2h,W2l,6),SUMl=_u64_js_1.default.add4L(s0l,s1l,SHA512_W_L[i-7],SHA512_W_L[i-16]),SUMh=_u64_js_1.default.add4H(SUMl,s0h,s1h,SHA512_W_H[i-7],SHA512_W_H[i-16]);SHA512_W_H[i]=0|SUMh,SHA512_W_L[i]=0|SUMl}let{Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl}=this;for(let i=0;i<80;i++){const sigma1h=_u64_js_1.default.rotrSH(Eh,El,14)^_u64_js_1.default.rotrSH(Eh,El,18)^_u64_js_1.default.rotrBH(Eh,El,41),sigma1l=_u64_js_1.default.rotrSL(Eh,El,14)^_u64_js_1.default.rotrSL(Eh,El,18)^_u64_js_1.default.rotrBL(Eh,El,41),CHIh=Eh&Fh^~Eh&Gh,CHIl=El&Fl^~El&Gl,T1ll=_u64_js_1.default.add5L(Hl,sigma1l,CHIl,SHA512_Kl[i],SHA512_W_L[i]),T1h=_u64_js_1.default.add5H(T1ll,Hh,sigma1h,CHIh,SHA512_Kh[i],SHA512_W_H[i]),T1l=0|T1ll,sigma0h=_u64_js_1.default.rotrSH(Ah,Al,28)^_u64_js_1.default.rotrBH(Ah,Al,34)^_u64_js_1.default.rotrBH(Ah,Al,39),sigma0l=_u64_js_1.default.rotrSL(Ah,Al,28)^_u64_js_1.default.rotrBL(Ah,Al,34)^_u64_js_1.default.rotrBL(Ah,Al,39),MAJh=Ah&Bh^Ah&Ch^Bh&Ch,MAJl=Al&Bl^Al&Cl^Bl&Cl;Hh=0|Gh,Hl=0|Gl,Gh=0|Fh,Gl=0|Fl,Fh=0|Eh,Fl=0|El,({h:Eh,l:El}=_u64_js_1.default.add(0|Dh,0|Dl,0|T1h,0|T1l)),Dh=0|Ch,Dl=0|Cl,Ch=0|Bh,Cl=0|Bl,Bh=0|Ah,Bl=0|Al;const All=_u64_js_1.default.add3L(T1l,sigma0l,MAJl);Ah=_u64_js_1.default.add3H(All,T1h,sigma0h,MAJh),Al=0|All}({h:Ah,l:Al}=_u64_js_1.default.add(0|this.Ah,0|this.Al,0|Ah,0|Al)),({h:Bh,l:Bl}=_u64_js_1.default.add(0|this.Bh,0|this.Bl,0|Bh,0|Bl)),({h:Ch,l:Cl}=_u64_js_1.default.add(0|this.Ch,0|this.Cl,0|Ch,0|Cl)),({h:Dh,l:Dl}=_u64_js_1.default.add(0|this.Dh,0|this.Dl,0|Dh,0|Dl)),({h:Eh,l:El}=_u64_js_1.default.add(0|this.Eh,0|this.El,0|Eh,0|El)),({h:Fh,l:Fl}=_u64_js_1.default.add(0|this.Fh,0|this.Fl,0|Fh,0|Fl)),({h:Gh,l:Gl}=_u64_js_1.default.add(0|this.Gh,0|this.Gl,0|Gh,0|Gl)),({h:Hh,l:Hl}=_u64_js_1.default.add(0|this.Hh,0|this.Hl,0|Hh,0|Hl)),this.set(Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}exports.SHA512=SHA512;class SHA512_224 extends SHA512{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}exports.SHA512_224=SHA512_224;class SHA512_256 extends SHA512{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}exports.SHA512_256=SHA512_256;class SHA384 extends SHA512{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}exports.SHA384=SHA384,exports.sha512=(0,utils_js_1.wrapConstructor)(()=>new SHA512),exports.sha512_224=(0,utils_js_1.wrapConstructor)(()=>new SHA512_224),exports.sha512_256=(0,utils_js_1.wrapConstructor)(()=>new SHA512_256),exports.sha384=(0,utils_js_1.wrapConstructor)(()=>new SHA384)},"./node_modules/@noble/hashes/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Hash=exports.nextTick=exports.byteSwapIfBE=exports.isLE=void 0,exports.isBytes=function isBytes(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name},exports.u8=function u8(arr){return new Uint8Array(arr.buffer,arr.byteOffset,arr.byteLength)},exports.u32=function u32(arr){return new Uint32Array(arr.buffer,arr.byteOffset,Math.floor(arr.byteLength/4))},exports.createView=function createView(arr){return new DataView(arr.buffer,arr.byteOffset,arr.byteLength)},exports.rotr=function rotr(word,shift){return word<<32-shift|word>>>shift},exports.rotl=function rotl(word,shift){return word<<shift|word>>>32-shift>>>0},exports.byteSwap=byteSwap,exports.byteSwap32=function byteSwap32(arr){for(let i=0;i<arr.length;i++)arr[i]=byteSwap(arr[i])},exports.bytesToHex=function bytesToHex(bytes){(0,_assert_js_1.abytes)(bytes);let hex="";for(let i=0;i<bytes.length;i++)hex+=hexes[bytes[i]];return hex},exports.hexToBytes=function hexToBytes(hex){if("string"!=typeof hex)throw new Error("hex string expected, got "+typeof hex);const hl=hex.length,al=hl/2;if(hl%2)throw new Error("hex string expected, got unpadded hex of length "+hl);const array=new Uint8Array(al);for(let ai=0,hi=0;ai<al;ai++,hi+=2){const n1=asciiToBase16(hex.charCodeAt(hi)),n2=asciiToBase16(hex.charCodeAt(hi+1));if(void 0===n1||void 0===n2){const char=hex[hi]+hex[hi+1];throw new Error('hex string expected, got non-hex character "'+char+'" at index '+hi)}array[ai]=16*n1+n2}return array},exports.asyncLoop=async function asyncLoop(iters,tick,cb){let ts=Date.now();for(let i=0;i<iters;i++){cb(i);const diff=Date.now()-ts;diff>=0&&diff<tick||(await(0,exports.nextTick)(),ts+=diff)}},exports.utf8ToBytes=utf8ToBytes,exports.toBytes=toBytes,exports.concatBytes=function concatBytes(...arrays){let sum=0;for(let i=0;i<arrays.length;i++){const a=arrays[i];(0,_assert_js_1.abytes)(a),sum+=a.length}const res=new Uint8Array(sum);for(let i=0,pad=0;i<arrays.length;i++){const a=arrays[i];res.set(a,pad),pad+=a.length}return res},exports.checkOpts=function checkOpts(defaults,opts){if(void 0!==opts&&"[object Object]"!=={}.toString.call(opts))throw new Error("Options should be object or undefined");return Object.assign(defaults,opts)},exports.wrapConstructor=function wrapConstructor(hashCons){const hashC=msg=>hashCons().update(toBytes(msg)).digest(),tmp=hashCons();return hashC.outputLen=tmp.outputLen,hashC.blockLen=tmp.blockLen,hashC.create=()=>hashCons(),hashC},exports.wrapConstructorWithOpts=function wrapConstructorWithOpts(hashCons){const hashC=(msg,opts)=>hashCons(opts).update(toBytes(msg)).digest(),tmp=hashCons({});return hashC.outputLen=tmp.outputLen,hashC.blockLen=tmp.blockLen,hashC.create=opts=>hashCons(opts),hashC},exports.wrapXOFConstructorWithOpts=function wrapXOFConstructorWithOpts(hashCons){const hashC=(msg,opts)=>hashCons(opts).update(toBytes(msg)).digest(),tmp=hashCons({});return hashC.outputLen=tmp.outputLen,hashC.blockLen=tmp.blockLen,hashC.create=opts=>hashCons(opts),hashC},exports.randomBytes=function randomBytes(bytesLength=32){if(crypto_1.crypto&&"function"==typeof crypto_1.crypto.getRandomValues)return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));if(crypto_1.crypto&&"function"==typeof crypto_1.crypto.randomBytes)return crypto_1.crypto.randomBytes(bytesLength);throw new Error("crypto.getRandomValues must be defined")};const crypto_1=__webpack_require__("./node_modules/@noble/hashes/crypto.js"),_assert_js_1=__webpack_require__("./node_modules/@noble/hashes/_assert.js");function byteSwap(word){return word<<24&4278190080|word<<8&16711680|word>>>8&65280|word>>>24&255}exports.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],exports.byteSwapIfBE=exports.isLE?n=>n:n=>byteSwap(n);const hexes=Array.from({length:256},(_,i)=>i.toString(16).padStart(2,"0"));const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(ch){return ch>=asciis._0&&ch<=asciis._9?ch-asciis._0:ch>=asciis.A&&ch<=asciis.F?ch-(asciis.A-10):ch>=asciis.a&&ch<=asciis.f?ch-(asciis.a-10):void 0}function utf8ToBytes(str){if("string"!=typeof str)throw new Error("utf8ToBytes expected string, got "+typeof str);return new Uint8Array((new TextEncoder).encode(str))}function toBytes(data){return"string"==typeof data&&(data=utf8ToBytes(data)),(0,_assert_js_1.abytes)(data),data}exports.nextTick=async()=>{};exports.Hash=class Hash{clone(){return this._cloneInto()}}},"./node_modules/@scure/base/lib/index.js":(__unused_webpack_module,exports)=>{"use strict";function isBytes(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name}function abytes(b,...lengths){if(!isBytes(b))throw new Error("Uint8Array expected");if(lengths.length>0&&!lengths.includes(b.length))throw new Error("Uint8Array expected of length "+lengths+", got length="+b.length)}function isArrayOf(isString,arr){return!!Array.isArray(arr)&&(0===arr.length||(isString?arr.every(item=>"string"==typeof item):arr.every(item=>Number.isSafeInteger(item))))}function afn(input){if("function"!=typeof input)throw new Error("function expected");return!0}function astr(label,input){if("string"!=typeof input)throw new Error(`${label}: string expected`);return!0}function anumber(n){if(!Number.isSafeInteger(n))throw new Error(`invalid integer: ${n}`)}function aArr(input){if(!Array.isArray(input))throw new Error("array expected")}function astrArr(label,input){if(!isArrayOf(!0,input))throw new Error(`${label}: array of strings expected`)}function anumArr(label,input){if(!isArrayOf(!1,input))throw new Error(`${label}: array of numbers expected`)}function chain(...args){const id=a=>a,wrap=(a,b)=>c=>a(b(c));return{encode:args.map(x=>x.encode).reduceRight(wrap,id),decode:args.map(x=>x.decode).reduce(wrap,id)}}function alphabet(letters){const lettersA="string"==typeof letters?letters.split(""):letters,len=lettersA.length;astrArr("alphabet",lettersA);const indexes=new Map(lettersA.map((l,i)=>[l,i]));return{encode:digits=>(aArr(digits),digits.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=len)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${letters}`);return lettersA[i]})),decode:input=>(aArr(input),input.map(letter=>{astr("alphabet.decode",letter);const i=indexes.get(letter);if(void 0===i)throw new Error(`Unknown letter: "${letter}". Allowed: ${letters}`);return i}))}}function join(separator=""){return astr("join",separator),{encode:from=>(astrArr("join.decode",from),from.join(separator)),decode:to=>(astr("join.decode",to),to.split(separator))}}function padding(bits,chr="="){return anumber(bits),astr("padding",chr),{encode(data){for(astrArr("padding.encode",data);data.length*bits%8;)data.push(chr);return data},decode(input){astrArr("padding.decode",input);let end=input.length;if(end*bits%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;end>0&&input[end-1]===chr;end--){if((end-1)*bits%8==0)throw new Error("padding: invalid, string has too much padding")}return input.slice(0,end)}}}function normalize(fn){return afn(fn),{encode:from=>from,decode:to=>fn(to)}}function convertRadix(data,from,to){if(from<2)throw new Error(`convertRadix: invalid from=${from}, base cannot be less than 2`);if(to<2)throw new Error(`convertRadix: invalid to=${to}, base cannot be less than 2`);if(aArr(data),!data.length)return[];let pos=0;const res=[],digits=Array.from(data,d=>{if(anumber(d),d<0||d>=from)throw new Error(`invalid integer: ${d}`);return d}),dlen=digits.length;for(;;){let carry=0,done=!0;for(let i=pos;i<dlen;i++){const digit=digits[i],fromCarry=from*carry,digitBase=fromCarry+digit;if(!Number.isSafeInteger(digitBase)||fromCarry/from!==carry||digitBase-digit!==fromCarry)throw new Error("convertRadix: carry overflow");const div=digitBase/to;carry=digitBase%to;const rounded=Math.floor(div);if(digits[i]=rounded,!Number.isSafeInteger(rounded)||rounded*to+carry!==digitBase)throw new Error("convertRadix: carry overflow");done&&(rounded?done=!1:pos=i)}if(res.push(carry),done)break}for(let i=0;i<data.length-1&&0===data[i];i++)res.push(0);return res.reverse()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.bytes=exports.stringToBytes=exports.str=exports.bytesToString=exports.hex=exports.utf8=exports.bech32m=exports.bech32=exports.base58check=exports.createBase58check=exports.base58xmr=exports.base58xrp=exports.base58flickr=exports.base58=exports.base64urlnopad=exports.base64url=exports.base64nopad=exports.base64=exports.base32crockford=exports.base32hexnopad=exports.base32hex=exports.base32nopad=exports.base32=exports.base16=exports.utils=void 0;const gcd=(a,b)=>0===b?a:gcd(b,a%b),radix2carry=(from,to)=>from+(to-gcd(from,to)),powers=(()=>{let res=[];for(let i=0;i<40;i++)res.push(2**i);return res})();function convertRadix2(data,from,to,padding){if(aArr(data),from<=0||from>32)throw new Error(`convertRadix2: wrong from=${from}`);if(to<=0||to>32)throw new Error(`convertRadix2: wrong to=${to}`);if(radix2carry(from,to)>32)throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from,to)}`);let carry=0,pos=0;const max=powers[from],mask=powers[to]-1,res=[];for(const n of data){if(anumber(n),n>=max)throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);if(carry=carry<<from|n,pos+from>32)throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);for(pos+=from;pos>=to;pos-=to)res.push((carry>>pos-to&mask)>>>0);const pow=powers[pos];if(void 0===pow)throw new Error("invalid carry");carry&=pow-1}if(carry=carry<<to-pos&mask,!padding&&pos>=from)throw new Error("Excess padding");if(!padding&&carry>0)throw new Error(`Non-zero padding: ${carry}`);return padding&&pos>0&&res.push(carry>>>0),res}function radix(num){anumber(num);return{encode:bytes=>{if(!isBytes(bytes))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(bytes),256,num)},decode:digits=>(anumArr("radix.decode",digits),Uint8Array.from(convertRadix(digits,num,256)))}}function radix2(bits,revPadding=!1){if(anumber(bits),bits<=0||bits>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,bits)>32||radix2carry(bits,8)>32)throw new Error("radix2: carry overflow");return{encode:bytes=>{if(!isBytes(bytes))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(bytes),8,bits,!revPadding)},decode:digits=>(anumArr("radix2.decode",digits),Uint8Array.from(convertRadix2(digits,bits,8,revPadding)))}}function unsafeWrapper(fn){return afn(fn),function(...args){try{return fn.apply(null,args)}catch(e){}}}function checksum(len,fn){return anumber(len),afn(fn),{encode(data){if(!isBytes(data))throw new Error("checksum.encode: input should be Uint8Array");const sum=fn(data).slice(0,len),res=new Uint8Array(data.length+len);return res.set(data),res.set(sum,data.length),res},decode(data){if(!isBytes(data))throw new Error("checksum.decode: input should be Uint8Array");const payload=data.slice(0,-len),oldChecksum=data.slice(-len),newChecksum=fn(payload).slice(0,len);for(let i=0;i<len;i++)if(newChecksum[i]!==oldChecksum[i])throw new Error("Invalid checksum");return payload}}}exports.utils={alphabet,chain,checksum,convertRadix,convertRadix2,radix,radix2,join,padding},exports.base16=chain(radix2(4),alphabet("0123456789ABCDEF"),join("")),exports.base32=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join("")),exports.base32nopad=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),join("")),exports.base32hex=chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join("")),exports.base32hexnopad=chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),join("")),exports.base32crockford=chain(radix2(5),alphabet("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join(""),normalize(s=>s.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const hasBase64Builtin=(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)(),decodeBase64Builtin=(s,isUrl)=>{astr("base64",s);const re=isUrl?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,alphabet=isUrl?"base64url":"base64";if(s.length>0&&!re.test(s))throw new Error("invalid base64");return Uint8Array.fromBase64(s,{alphabet,lastChunkHandling:"strict"})};exports.base64=hasBase64Builtin?{encode:b=>(abytes(b),b.toBase64()),decode:s=>decodeBase64Builtin(s,!1)}:chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join("")),exports.base64nopad=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),join("")),exports.base64url=hasBase64Builtin?{encode:b=>(abytes(b),b.toBase64({alphabet:"base64url"})),decode:s=>decodeBase64Builtin(s,!0)}:chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join("")),exports.base64urlnopad=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),join(""));const genBase58=abc=>chain(radix(58),alphabet(abc),join(""));exports.base58=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),exports.base58flickr=genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),exports.base58xrp=genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const XMR_BLOCK_LEN=[0,2,3,5,6,7,9,10,11];exports.base58xmr={encode(data){let res="";for(let i=0;i<data.length;i+=8){const block=data.subarray(i,i+8);res+=exports.base58.encode(block).padStart(XMR_BLOCK_LEN[block.length],"1")}return res},decode(str){let res=[];for(let i=0;i<str.length;i+=11){const slice=str.slice(i,i+11),blockLen=XMR_BLOCK_LEN.indexOf(slice.length),block=exports.base58.decode(slice);for(let j=0;j<block.length-blockLen;j++)if(0!==block[j])throw new Error("base58xmr: wrong padding");res=res.concat(Array.from(block.slice(block.length-blockLen)))}return Uint8Array.from(res)}};exports.createBase58check=sha256=>chain(checksum(4,data=>sha256(sha256(data))),exports.base58),exports.base58check=exports.createBase58check;const BECH_ALPHABET=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join("")),POLYMOD_GENERATORS=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(pre){const b=pre>>25;let chk=(33554431&pre)<<5;for(let i=0;i<POLYMOD_GENERATORS.length;i++)1==(b>>i&1)&&(chk^=POLYMOD_GENERATORS[i]);return chk}function bechChecksum(prefix,words,encodingConst=1){const len=prefix.length;let chk=1;for(let i=0;i<len;i++){const c=prefix.charCodeAt(i);if(c<33||c>126)throw new Error(`Invalid prefix (${prefix})`);chk=bech32Polymod(chk)^c>>5}chk=bech32Polymod(chk);for(let i=0;i<len;i++)chk=bech32Polymod(chk)^31&prefix.charCodeAt(i);for(let v of words)chk=bech32Polymod(chk)^v;for(let i=0;i<6;i++)chk=bech32Polymod(chk);return chk^=encodingConst,BECH_ALPHABET.encode(convertRadix2([chk%powers[30]],30,5,!1))}function genBech32(encoding){const ENCODING_CONST="bech32"===encoding?1:734539939,_words=radix2(5),fromWords=_words.decode,toWords=_words.encode,fromWordsUnsafe=unsafeWrapper(fromWords);function encode(prefix,words,limit=90){astr("bech32.encode prefix",prefix),isBytes(words)&&(words=Array.from(words)),anumArr("bech32.encode",words);const plen=prefix.length;if(0===plen)throw new TypeError(`Invalid prefix length ${plen}`);const actualLength=plen+7+words.length;if(!1!==limit&&actualLength>limit)throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);const lowered=prefix.toLowerCase(),sum=bechChecksum(lowered,words,ENCODING_CONST);return`${lowered}1${BECH_ALPHABET.encode(words)}${sum}`}function decode(str,limit=90){astr("bech32.decode input",str);const slen=str.length;if(slen<8||!1!==limit&&slen>limit)throw new TypeError(`invalid string length: ${slen} (${str}). Expected (8..${limit})`);const lowered=str.toLowerCase();if(str!==lowered&&str!==str.toUpperCase())throw new Error("String must be lowercase or uppercase");const sepIndex=lowered.lastIndexOf("1");if(0===sepIndex||-1===sepIndex)throw new Error('Letter "1" must be present between prefix and data only');const prefix=lowered.slice(0,sepIndex),data=lowered.slice(sepIndex+1);if(data.length<6)throw new Error("Data must be at least 6 characters long");const words=BECH_ALPHABET.decode(data).slice(0,-6),sum=bechChecksum(prefix,words,ENCODING_CONST);if(!data.endsWith(sum))throw new Error(`Invalid checksum in ${str}: expected "${sum}"`);return{prefix,words}}return{encode,decode,encodeFromBytes:function encodeFromBytes(prefix,bytes){return encode(prefix,toWords(bytes))},decodeToBytes:function decodeToBytes(str){const{prefix,words}=decode(str,!1);return{prefix,words,bytes:fromWords(words)}},decodeUnsafe:unsafeWrapper(decode),fromWords,fromWordsUnsafe,toWords}}exports.bech32=genBech32("bech32"),exports.bech32m=genBech32("bech32m"),exports.utf8={encode:data=>(new TextDecoder).decode(data),decode:str=>(new TextEncoder).encode(str)};const hasHexBuiltin=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),hexBuiltin={encode:data=>(abytes(data),data.toHex()),decode:s=>(astr("hex",s),Uint8Array.fromHex(s))};exports.hex=hasHexBuiltin?hexBuiltin:chain(radix2(4),alphabet("0123456789abcdef"),join(""),normalize(s=>{if("string"!=typeof s||s.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);return s.toLowerCase()}));const CODERS={utf8:exports.utf8,hex:exports.hex,base16:exports.base16,base32:exports.base32,base64:exports.base64,base64url:exports.base64url,base58:exports.base58,base58xmr:exports.base58xmr},coderTypeError="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";exports.bytesToString=(type,bytes)=>{if("string"!=typeof type||!CODERS.hasOwnProperty(type))throw new TypeError(coderTypeError);if(!isBytes(bytes))throw new TypeError("bytesToString() expects Uint8Array");return CODERS[type].encode(bytes)},exports.str=exports.bytesToString;exports.stringToBytes=(type,str)=>{if(!CODERS.hasOwnProperty(type))throw new TypeError(coderTypeError);if("string"!=typeof str)throw new TypeError("stringToBytes() expects string");return CODERS[type].decode(str)},exports.bytes=exports.stringToBytes},"./node_modules/@stellar/freighter-api/build/index.min.js":function(module,__unused_webpack_exports,__webpack_require__){var e,console=__webpack_require__("./node_modules/console-browserify/index.js");e=()=>(()=>{"use strict";var r,e,s={d:(r,e)=>{for(var t in e)s.o(e,t)&&!s.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},o:(r,e)=>Object.prototype.hasOwnProperty.call(r,e),r:r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};s.r(t),s.d(t,{WatchWalletChanges:()=>u,addToken:()=>S,default:()=>D,getAddress:()=>_,getNetwork:()=>C,getNetworkDetails:()=>O,isAllowed:()=>R,isBrowser:()=>U,isConnected:()=>N,requestAccess:()=>w,setAllowed:()=>I,signAuthEntry:()=>l,signMessage:()=>c,signTransaction:()=>d}),function(r){r.CREATE_ACCOUNT="CREATE_ACCOUNT",r.FUND_ACCOUNT="FUND_ACCOUNT",r.ADD_ACCOUNT="ADD_ACCOUNT",r.IMPORT_ACCOUNT="IMPORT_ACCOUNT",r.IMPORT_HARDWARE_WALLET="IMPORT_HARDWARE_WALLET",r.LOAD_ACCOUNT="LOAD_ACCOUNT",r.MAKE_ACCOUNT_ACTIVE="MAKE_ACCOUNT_ACTIVE",r.UPDATE_ACCOUNT_NAME="UPDATE_ACCOUNT_NAME",r.GET_MNEMONIC_PHRASE="GET_MNEMONIC_PHRASE",r.CONFIRM_MNEMONIC_PHRASE="CONFIRM_MNEMONIC_PHRASE",r.CONFIRM_MIGRATED_MNEMONIC_PHRASE="CONFIRM_MIGRATED_MNEMONIC_PHRASE",r.RECOVER_ACCOUNT="RECOVER_ACCOUNT",r.CONFIRM_PASSWORD="CONFIRM_PASSWORD",r.REJECT_ACCESS="REJECT_ACCESS",r.GRANT_ACCESS="GRANT_ACCESS",r.ADD_TOKEN="ADD_TOKEN",r.SIGN_TRANSACTION="SIGN_TRANSACTION",r.SIGN_BLOB="SIGN_BLOB",r.SIGN_AUTH_ENTRY="SIGN_AUTH_ENTRY",r.HANDLE_SIGNED_HW_PAYLOAD="HANDLE_SIGNED_HW_PAYLOAD",r.REJECT_TRANSACTION="REJECT_TRANSACTION",r.SIGN_FREIGHTER_TRANSACTION="SIGN_FREIGHTER_TRANSACTION",r.SIGN_FREIGHTER_SOROBAN_TRANSACTION="SIGN_FREIGHTER_SOROBAN_TRANSACTION",r.ADD_RECENT_ADDRESS="ADD_RECENT_ADDRESS",r.LOAD_RECENT_ADDRESSES="LOAD_RECENT_ADDRESSES",r.LOAD_LAST_USED_ACCOUNT="LOAD_LAST_USED_ACCOUNT",r.SIGN_OUT="SIGN_OUT",r.SHOW_BACKUP_PHRASE="SHOW_BACKUP_PHRASE",r.SAVE_ALLOWLIST="SAVE_ALLOWLIST",r.SAVE_SETTINGS="SAVE_SETTINGS",r.SAVE_EXPERIMENTAL_FEATURES="SAVE_EXPERIMENTAL_FEATURES",r.LOAD_SETTINGS="LOAD_SETTINGS",r.GET_CACHED_ASSET_ICON="GET_CACHED_ASSET_ICON",r.CACHE_ASSET_ICON="CACHE_ASSET_ICON",r.GET_CACHED_ASSET_DOMAIN="GET_CACHED_ASSET_DOMAIN",r.CACHE_ASSET_DOMAIN="CACHE_ASSET_DOMAIN",r.GET_MEMO_REQUIRED_ACCOUNTS="GET_MEMO_REQUIRED_ACCOUNTS",r.ADD_CUSTOM_NETWORK="ADD_CUSTOM_NETWORK",r.CHANGE_NETWORK="CHANGE_NETWORK",r.REMOVE_CUSTOM_NETWORK="REMOVE_CUSTOM_NETWORK",r.EDIT_CUSTOM_NETWORK="EDIT_CUSTOM_NETWORK",r.RESET_EXP_DATA="RESET_EXP_DATA",r.ADD_TOKEN_ID="ADD_TOKEN_ID",r.GET_TOKEN_IDS="GET_TOKEN_IDS",r.REMOVE_TOKEN_ID="REMOVE_TOKEN_ID",r.GET_MIGRATABLE_ACCOUNTS="GET_MIGRATABLE_ACCOUNTS",r.GET_MIGRATED_MNEMONIC_PHRASE="GET_MIGRATED_MNEMONIC_PHRASE",r.MIGRATE_ACCOUNTS="MIGRATE_ACCOUNTS",r.ADD_ASSETS_LIST="ADD_ASSETS_LIST",r.MODIFY_ASSETS_LIST="MODIFY_ASSETS_LIST",r.CHANGE_ASSET_VISIBILITY="CHANGE_ASSET_VISIBILITY",r.GET_HIDDEN_ASSETS="GET_HIDDEN_ASSETS",r.GET_IS_ACCOUNT_MISMATCH="GET_IS_ACCOUNT_MISMATCH"}(r||(r={})),function(r){r.REQUEST_ACCESS="REQUEST_ACCESS",r.REQUEST_PUBLIC_KEY="REQUEST_PUBLIC_KEY",r.SUBMIT_TOKEN="SUBMIT_TOKEN",r.SUBMIT_TRANSACTION="SUBMIT_TRANSACTION",r.SUBMIT_BLOB="SUBMIT_BLOB",r.SUBMIT_AUTH_ENTRY="SUBMIT_AUTH_ENTRY",r.REQUEST_NETWORK="REQUEST_NETWORK",r.REQUEST_NETWORK_DETAILS="REQUEST_NETWORK_DETAILS",r.REQUEST_CONNECTION_STATUS="REQUEST_CONNECTION_STATUS",r.REQUEST_ALLOWED_STATUS="REQUEST_ALLOWED_STATUS",r.SET_ALLOWED_STATUS="SET_ALLOWED_STATUS",r.REQUEST_USER_INFO="REQUEST_USER_INFO"}(e||(e={}));const n=r=>{const s=Date.now()+Math.random();return window.postMessage({source:"FREIGHTER_EXTERNAL_MSG_REQUEST",messageId:s,...r},window.location.origin),new Promise(t=>{let n=0;r.type!==e.REQUEST_CONNECTION_STATUS&&r.type!==e.REQUEST_PUBLIC_KEY||(n=setTimeout(()=>{t({isConnected:!1,publicKey:""}),window.removeEventListener("message",o)},2e3));const o=r=>{var e,E;r.source===window&&"FREIGHTER_EXTERNAL_MSG_RESPONSE"===(null===(e=null==r?void 0:r.data)||void 0===e?void 0:e.source)&&(null===(E=null==r?void 0:r.data)||void 0===E?void 0:E.messagedId)===s&&(t(r.data),window.removeEventListener("message",o),clearTimeout(n))};window.addEventListener("message",o,!1)})},o={code:-1,message:"Node environment is not supported"},E={code:-1,message:"The wallet encountered an internal error. Please try again or contact the wallet if the problem persists."},T=async()=>{let r;try{r=await n({type:e.REQUEST_ACCESS})}catch(r){console.error(r)}const{publicKey:s}=r||{publicKey:""};return{publicKey:s,error:null==r?void 0:r.apiError}},A=async()=>{let r;try{r=await n({type:e.REQUEST_PUBLIC_KEY})}catch(r){console.error(r)}return{publicKey:(null==r?void 0:r.publicKey)||"",error:null==r?void 0:r.apiError}},a=async()=>{let r;try{r=await n({type:e.REQUEST_NETWORK_DETAILS})}catch(r){console.error(r)}const{networkDetails:s,apiError:t}=r||{networkDetails:{network:"",networkName:"",networkUrl:"",networkPassphrase:"",sorobanRpcUrl:void 0,apiError:""}},{network:o,networkUrl:E,networkPassphrase:T,sorobanRpcUrl:A}=s;return{network:o,networkUrl:E,networkPassphrase:T,sorobanRpcUrl:A,error:t}},i=async()=>{let r;try{r=await n({type:e.REQUEST_ALLOWED_STATUS})}catch(r){console.error(r)}const{isAllowed:s}=r||{isAllowed:!1};return{isAllowed:s,error:null==r?void 0:r.apiError}},_=async()=>{let r="";if(U){const e=await A();return r=e.publicKey,e.error?{address:r,error:e.error}:{address:r}}return{address:r,error:o}},S=async r=>{if(U){const s=await(async r=>{let s;try{s=await n({contractId:r.contractId,networkPassphrase:r.networkPassphrase,type:e.SUBMIT_TOKEN})}catch(r){return{error:E}}return{contractId:s.contractId,error:null==s?void 0:s.apiError}})(r);return s.error?{contractId:"",error:s.error}:{contractId:s.contractId||""}}return{contractId:"",error:o}},d=async(r,s)=>{if(U){const t=await(async(r,s)=>{let t,o,T,A;"object"==typeof s?(o=s.accountToSign,T=s.networkPassphrase):(t=s,o=void 0);try{A=await n({transactionXdr:r,network:t,networkPassphrase:T,accountToSign:o,type:e.SUBMIT_TRANSACTION})}catch(r){return{signedTransaction:"",signerAddress:"",error:E}}const{signedTransaction:a,signerAddress:i}=A;return{signedTransaction:a,signerAddress:i,error:null==A?void 0:A.apiError}})(r,s);return t.error?{signedTxXdr:"",signerAddress:"",error:t.error}:{signedTxXdr:t.signedTransaction,signerAddress:t.signerAddress}}return{signedTxXdr:"",signerAddress:"",error:o}},c=async(r,s)=>{if(U){const{isAllowed:t}=await i();if(!t){const r=await T();if(r.error)return{signedMessage:null,signerAddress:"",error:r.error}}const o=await(async(r,s,t)=>{let o;const T=(t||{}).address;try{o=await n({blob:r,accountToSign:T,apiVersion:"5.0.0",networkPassphrase:null==t?void 0:t.networkPassphrase,type:e.SUBMIT_BLOB})}catch(r){return{signedMessage:null,signerAddress:"",error:E}}const{signedBlob:A,signerAddress:a}=o;return{signedMessage:A||null,signerAddress:a,error:null==o?void 0:o.apiError}})(r,0,s);return o.error?{signedMessage:null,signerAddress:"",error:o.error}:{signedMessage:o.signedMessage,signerAddress:o.signerAddress}}return{signedMessage:null,signerAddress:"",error:o}},l=async(r,s)=>{if(U){const{isAllowed:t}=await i();if(!t){const r=await T();if(r.error)return{signedAuthEntry:null,signerAddress:"",error:r.error}}const o=await(async(r,s,t)=>{const o=(t||{}).address;let T;try{T=await n({entryXdr:r,accountToSign:o,apiVersion:"5.0.0",networkPassphrase:null==t?void 0:t.networkPassphrase,type:e.SUBMIT_AUTH_ENTRY})}catch(r){return console.error(r),{signedAuthEntry:null,signerAddress:"",error:E}}const{signedAuthEntry:A,signerAddress:a}=T;return{signedAuthEntry:A||null,signerAddress:a,error:null==T?void 0:T.apiError}})(r,0,s);return o.error?{signedAuthEntry:null,signerAddress:"",error:o.error}:{signedAuthEntry:o.signedAuthEntry,signerAddress:o.signerAddress}}return{signedAuthEntry:null,signerAddress:"",error:o}},N=async()=>U?window.freighter?Promise.resolve({isConnected:window.freighter}):(async()=>{let r={isConnected:!1};try{r=await n({type:e.REQUEST_CONNECTION_STATUS})}catch(r){console.error(r)}return{isConnected:r.isConnected}})():{isConnected:!1,error:o},C=async()=>{if(U){const r=await(async()=>{let r;try{r=await n({type:e.REQUEST_NETWORK_DETAILS})}catch(r){console.error(r)}const{networkDetails:s}=r||{networkDetails:{network:"",networkPassphrase:""}};return{network:null==s?void 0:s.network,networkPassphrase:null==s?void 0:s.networkPassphrase,error:null==r?void 0:r.apiError}})();return r.error?{network:"",networkPassphrase:"",error:r.error}:{network:r.network,networkPassphrase:r.networkPassphrase}}return{network:"",networkPassphrase:"",error:o}},O=async()=>{if(U){const r=await a();return r.error?{network:"",networkUrl:"",networkPassphrase:"",error:r.error}:{network:r.network,networkUrl:r.networkUrl,networkPassphrase:r.networkPassphrase,sorobanRpcUrl:r.sorobanRpcUrl}}return{network:"",networkUrl:"",networkPassphrase:"",error:o}},R=async()=>{let r=!1;if(U){const e=await i();return r=e.isAllowed,e.error?{isAllowed:r,error:e.error}:{isAllowed:r}}return{isAllowed:r,error:o}},I=async()=>{let r=!1;if(U){const s=await(async()=>{let r;try{r=await n({type:e.SET_ALLOWED_STATUS})}catch(r){console.error(r)}const{isAllowed:s}=r||{isAllowed:!1};return{isAllowed:s,error:null==r?void 0:r.apiError}})();return r=s.isAllowed,s.error?{isAllowed:r,error:s.error}:{isAllowed:r}}return{isAllowed:r,error:o}},w=async()=>{let r="";if(U){const e=await T();return r=e.publicKey,e.error?{address:r,error:e.error}:{address:r}}return{address:r,error:o}};class u{constructor(r=3e3){this.fetchInfo=async r=>{if(!this.isRunning)return;const e=await A(),s=await a();(e.error||s.error)&&r({address:"",network:"",networkPassphrase:"",error:e.error||s.error}),this.currentAddress===e.publicKey&&this.currentNetwork===s.network&&this.currentNetworkPassphrase===s.networkPassphrase||(this.currentAddress=e.publicKey,this.currentNetwork=s.network,this.currentNetworkPassphrase=s.networkPassphrase,r({address:e.publicKey,network:s.network,networkPassphrase:s.networkPassphrase})),setTimeout(()=>this.fetchInfo(r),this.timeout)},this.timeout=r,this.currentAddress="",this.currentNetwork="",this.currentNetworkPassphrase="",this.isRunning=!1}watch(r){return U?(this.isRunning=!0,this.fetchInfo(r),{}):{error:o}}stop(){this.isRunning=!1}}const U="undefined"!=typeof window,D={getAddress:_,addToken:S,signTransaction:d,signMessage:c,signAuthEntry:l,isConnected:N,getNetwork:C,getNetworkDetails:O,isAllowed:R,setAllowed:I,requestAccess:w,WatchWalletChanges:u};return t})(),module.exports=e()},"./node_modules/borsh/lib/cjs/buffer.js":(__unused_webpack_module,exports)=>{"use strict";exports.__esModule=!0,exports.DecodeBuffer=exports.EncodeBuffer=void 0;var EncodeBuffer=function(){function EncodeBuffer(){this.offset=0,this.buffer_size=256,this.buffer=new ArrayBuffer(this.buffer_size),this.view=new DataView(this.buffer)}return EncodeBuffer.prototype.resize_if_necessary=function(needed_space){if(this.buffer_size-this.offset<needed_space){this.buffer_size=Math.max(2*this.buffer_size,this.buffer_size+needed_space);var new_buffer=new ArrayBuffer(this.buffer_size);new Uint8Array(new_buffer).set(new Uint8Array(this.buffer)),this.buffer=new_buffer,this.view=new DataView(new_buffer)}},EncodeBuffer.prototype.get_used_buffer=function(){return new Uint8Array(this.buffer).slice(0,this.offset)},EncodeBuffer.prototype.store_value=function(value,type){var bSize=type.substring(1),size=parseInt(bSize)/8;this.resize_if_necessary(size);var toCall="f"===type[0]?"setFloat".concat(bSize):"i"===type[0]?"setInt".concat(bSize):"setUint".concat(bSize);this.view[toCall](this.offset,value,!0),this.offset+=size},EncodeBuffer.prototype.store_bytes=function(from){this.resize_if_necessary(from.length),new Uint8Array(this.buffer).set(new Uint8Array(from),this.offset),this.offset+=from.length},EncodeBuffer}();exports.EncodeBuffer=EncodeBuffer;var DecodeBuffer=function(){function DecodeBuffer(buf){this.offset=0,this.buffer_size=buf.length,this.buffer=new ArrayBuffer(buf.length),new Uint8Array(this.buffer).set(buf),this.view=new DataView(this.buffer)}return DecodeBuffer.prototype.assert_enough_buffer=function(size){if(this.offset+size>this.buffer.byteLength)throw new Error("Error in schema, the buffer is smaller than expected")},DecodeBuffer.prototype.consume_value=function(type){var bSize=type.substring(1),size=parseInt(bSize)/8;this.assert_enough_buffer(size);var toCall="f"===type[0]?"getFloat".concat(bSize):"i"===type[0]?"getInt".concat(bSize):"getUint".concat(bSize),ret=this.view[toCall](this.offset,!0);return this.offset+=size,ret},DecodeBuffer.prototype.consume_bytes=function(size){this.assert_enough_buffer(size);var ret=this.buffer.slice(this.offset,this.offset+size);return this.offset+=size,ret},DecodeBuffer}();exports.DecodeBuffer=DecodeBuffer},"./node_modules/borsh/lib/cjs/deserialize.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";exports.__esModule=!0,exports.BorshDeserializer=void 0;var types_js_1=__webpack_require__("./node_modules/borsh/lib/cjs/types.js"),buffer_js_1=__webpack_require__("./node_modules/borsh/lib/cjs/buffer.js"),BorshDeserializer=function(){function BorshDeserializer(bufferArray){this.buffer=new buffer_js_1.DecodeBuffer(bufferArray)}return BorshDeserializer.prototype.decode=function(schema){return this.decode_value(schema)},BorshDeserializer.prototype.decode_value=function(schema){if("string"==typeof schema){if(types_js_1.integers.includes(schema))return this.decode_integer(schema);if("string"===schema)return this.decode_string();if("bool"===schema)return this.decode_boolean()}if("object"==typeof schema){if("option"in schema)return this.decode_option(schema);if("enum"in schema)return this.decode_enum(schema);if("array"in schema)return this.decode_array(schema);if("set"in schema)return this.decode_set(schema);if("map"in schema)return this.decode_map(schema);if("struct"in schema)return this.decode_struct(schema)}throw new Error("Unsupported type: ".concat(schema))},BorshDeserializer.prototype.decode_integer=function(schema){var size=parseInt(schema.substring(1));return size<=32||"f64"==schema?this.buffer.consume_value(schema):this.decode_bigint(size,schema.startsWith("i"))},BorshDeserializer.prototype.decode_bigint=function(size,signed){void 0===signed&&(signed=!1);var buffer_len=size/8,buffer=new Uint8Array(this.buffer.consume_bytes(buffer_len)),bits=buffer.reduceRight(function(r,x){return r+x.toString(16).padStart(2,"0")},"");return signed&&buffer[buffer_len-1]?BigInt.asIntN(size,BigInt("0x".concat(bits))):BigInt("0x".concat(bits))},BorshDeserializer.prototype.decode_string=function(){for(var len=this.decode_integer("u32"),buffer=new Uint8Array(this.buffer.consume_bytes(len)),codePoints=[],i=0;i<len;++i){var byte=buffer[i];if(byte<128)codePoints.push(byte);else if(byte<224)codePoints.push((31&byte)<<6|63&buffer[++i]);else if(byte<240)codePoints.push((15&byte)<<12|(63&buffer[++i])<<6|63&buffer[++i]);else{var codePoint=(7&byte)<<18|(63&buffer[++i])<<12|(63&buffer[++i])<<6|63&buffer[++i];codePoints.push(codePoint)}}return String.fromCodePoint.apply(String,codePoints)},BorshDeserializer.prototype.decode_boolean=function(){return this.buffer.consume_value("u8")>0},BorshDeserializer.prototype.decode_option=function(schema){var option=this.buffer.consume_value("u8");if(1===option)return this.decode_value(schema.option);if(0!==option)throw new Error("Invalid option ".concat(option));return null},BorshDeserializer.prototype.decode_enum=function(schema){var _a,valueIndex=this.buffer.consume_value("u8");if(valueIndex>schema.enum.length)throw new Error("Enum option ".concat(valueIndex," is not available"));var struct=schema.enum[valueIndex].struct,key=Object.keys(struct)[0];return(_a={})[key]=this.decode_value(struct[key]),_a},BorshDeserializer.prototype.decode_array=function(schema){for(var result=[],len=schema.array.len?schema.array.len:this.decode_integer("u32"),i=0;i<len;++i)result.push(this.decode_value(schema.array.type));return result},BorshDeserializer.prototype.decode_set=function(schema){for(var len=this.decode_integer("u32"),result=new Set,i=0;i<len;++i)result.add(this.decode_value(schema.set));return result},BorshDeserializer.prototype.decode_map=function(schema){for(var len=this.decode_integer("u32"),result=new Map,i=0;i<len;++i){var key=this.decode_value(schema.map.key),value=this.decode_value(schema.map.value);result.set(key,value)}return result},BorshDeserializer.prototype.decode_struct=function(schema){var result={};for(var key in schema.struct)result[key]=this.decode_value(schema.struct[key]);return result},BorshDeserializer}();exports.BorshDeserializer=BorshDeserializer},"./node_modules/borsh/lib/cjs/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};exports.__esModule=!0,exports.deserialize=exports.serialize=void 0;var serialize_js_1=__webpack_require__("./node_modules/borsh/lib/cjs/serialize.js"),deserialize_js_1=__webpack_require__("./node_modules/borsh/lib/cjs/deserialize.js"),utils=__importStar(__webpack_require__("./node_modules/borsh/lib/cjs/utils.js"));exports.serialize=function serialize(schema,value,validate){return void 0===validate&&(validate=!0),validate&&utils.validate_schema(schema),new serialize_js_1.BorshSerializer(validate).encode(value,schema)},exports.deserialize=function deserialize(schema,buffer,validate){return void 0===validate&&(validate=!0),validate&&utils.validate_schema(schema),new deserialize_js_1.BorshDeserializer(buffer).decode(schema)}},"./node_modules/borsh/lib/cjs/serialize.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};exports.__esModule=!0,exports.BorshSerializer=void 0;var types_js_1=__webpack_require__("./node_modules/borsh/lib/cjs/types.js"),buffer_js_1=__webpack_require__("./node_modules/borsh/lib/cjs/buffer.js"),utils=__importStar(__webpack_require__("./node_modules/borsh/lib/cjs/utils.js")),BorshSerializer=function(){function BorshSerializer(checkTypes){this.encoded=new buffer_js_1.EncodeBuffer,this.fieldPath=["value"],this.checkTypes=checkTypes}return BorshSerializer.prototype.encode=function(value,schema){return this.encode_value(value,schema),this.encoded.get_used_buffer()},BorshSerializer.prototype.encode_value=function(value,schema){if("string"==typeof schema){if(types_js_1.integers.includes(schema))return this.encode_integer(value,schema);if("string"===schema)return this.encode_string(value);if("bool"===schema)return this.encode_boolean(value)}if("object"==typeof schema){if("option"in schema)return this.encode_option(value,schema);if("enum"in schema)return this.encode_enum(value,schema);if("array"in schema)return this.encode_array(value,schema);if("set"in schema)return this.encode_set(value,schema);if("map"in schema)return this.encode_map(value,schema);if("struct"in schema)return this.encode_struct(value,schema)}},BorshSerializer.prototype.encode_integer=function(value,schema){var size=parseInt(schema.substring(1));size<=32||"f64"==schema?(this.checkTypes&&utils.expect_type(value,"number",this.fieldPath),this.encoded.store_value(value,schema)):(this.checkTypes&&utils.expect_bigint(value,this.fieldPath),this.encode_bigint(BigInt(value),size))},BorshSerializer.prototype.encode_bigint=function(value,size){for(var buffer_len=size/8,buffer=new Uint8Array(buffer_len),i=0;i<buffer_len;i++)buffer[i]=Number(value&BigInt(255)),value>>=BigInt(8);this.encoded.store_bytes(new Uint8Array(buffer))},BorshSerializer.prototype.encode_string=function(value){this.checkTypes&&utils.expect_type(value,"string",this.fieldPath);for(var _value=value,utf8Bytes=[],i=0;i<_value.length;i++){var charCode=_value.charCodeAt(i);charCode<128?utf8Bytes.push(charCode):charCode<2048?utf8Bytes.push(192|charCode>>6,128|63&charCode):charCode<55296||charCode>=57344?utf8Bytes.push(224|charCode>>12,128|charCode>>6&63,128|63&charCode):(i++,charCode=65536+((1023&charCode)<<10|1023&_value.charCodeAt(i)),utf8Bytes.push(240|charCode>>18,128|charCode>>12&63,128|charCode>>6&63,128|63&charCode))}this.encoded.store_value(utf8Bytes.length,"u32"),this.encoded.store_bytes(new Uint8Array(utf8Bytes))},BorshSerializer.prototype.encode_boolean=function(value){this.checkTypes&&utils.expect_type(value,"boolean",this.fieldPath),this.encoded.store_value(value?1:0,"u8")},BorshSerializer.prototype.encode_option=function(value,schema){null==value?this.encoded.store_value(0,"u8"):(this.encoded.store_value(1,"u8"),this.encode_value(value,schema.option))},BorshSerializer.prototype.encode_enum=function(value,schema){this.checkTypes&&utils.expect_enum(value,this.fieldPath);for(var valueKey=Object.keys(value)[0],i=0;i<schema.enum.length;i++){var valueSchema=schema.enum[i];if(valueKey===Object.keys(valueSchema.struct)[0])return this.encoded.store_value(i,"u8"),this.encode_struct(value,valueSchema)}throw new Error("Enum key (".concat(valueKey,") not found in enum schema: ").concat(JSON.stringify(schema)," at ").concat(this.fieldPath.join(".")))},BorshSerializer.prototype.encode_array=function(value,schema){if(utils.isArrayLike(value))return this.encode_arraylike(value,schema);if(value instanceof ArrayBuffer)return this.encode_buffer(value,schema);throw new Error("Expected Array-like not ".concat(typeof value,"(").concat(value,") at ").concat(this.fieldPath.join(".")))},BorshSerializer.prototype.encode_arraylike=function(value,schema){schema.array.len?utils.expect_same_size(value.length,schema.array.len,this.fieldPath):this.encoded.store_value(value.length,"u32");for(var i=0;i<value.length;i++)this.encode_value(value[i],schema.array.type)},BorshSerializer.prototype.encode_buffer=function(value,schema){schema.array.len?utils.expect_same_size(value.byteLength,schema.array.len,this.fieldPath):this.encoded.store_value(value.byteLength,"u32"),this.encoded.store_bytes(new Uint8Array(value))},BorshSerializer.prototype.encode_set=function(value,schema){this.checkTypes&&utils.expect_type(value,"object",this.fieldPath);var values=value instanceof Set?Array.from(value.values()):Object.values(value);this.encoded.store_value(values.length,"u32");for(var _i=0,values_1=values;_i<values_1.length;_i++){var value_1=values_1[_i];this.encode_value(value_1,schema.set)}},BorshSerializer.prototype.encode_map=function(value,schema){this.checkTypes&&utils.expect_type(value,"object",this.fieldPath);var isMap=value instanceof Map,keys=isMap?Array.from(value.keys()):Object.keys(value);this.encoded.store_value(keys.length,"u32");for(var _i=0,keys_1=keys;_i<keys_1.length;_i++){var key=keys_1[_i];this.encode_value(key,schema.map.key),this.encode_value(isMap?value.get(key):value[key],schema.map.value)}},BorshSerializer.prototype.encode_struct=function(value,schema){this.checkTypes&&utils.expect_type(value,"object",this.fieldPath);for(var _i=0,_a=Object.keys(schema.struct);_i<_a.length;_i++){var key=_a[_i];this.fieldPath.push(key),this.encode_value(value[key],schema.struct[key]),this.fieldPath.pop()}},BorshSerializer}();exports.BorshSerializer=BorshSerializer},"./node_modules/borsh/lib/cjs/types.js":(__unused_webpack_module,exports)=>{"use strict";exports.__esModule=!0,exports.integers=void 0,exports.integers=["u8","u16","u32","u64","u128","i8","i16","i32","i64","i128","f32","f64"]},"./node_modules/borsh/lib/cjs/utils.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});exports.__esModule=!0,exports.validate_schema=exports.ErrorSchema=exports.expect_enum=exports.expect_same_size=exports.expect_bigint=exports.expect_type=exports.isArrayLike=void 0;var types_js_1=__webpack_require__("./node_modules/borsh/lib/cjs/types.js");exports.isArrayLike=function isArrayLike(value){return Array.isArray(value)||!!value&&"object"==typeof value&&"length"in value&&"number"==typeof value.length&&(0===value.length||value.length>0&&value.length-1 in value)},exports.expect_type=function expect_type(value,type,fieldPath){if(typeof value!==type)throw new Error("Expected ".concat(type," not ").concat(typeof value,"(").concat(value,") at ").concat(fieldPath.join(".")))},exports.expect_bigint=function expect_bigint(value,fieldPath){if(!["number","string","bigint","boolean"].includes(typeof value)&&!("object"==typeof value&&null!==value&&"toString"in value))throw new Error("Expected bigint, number, boolean or string not ".concat(typeof value,"(").concat(value,") at ").concat(fieldPath.join(".")))},exports.expect_same_size=function expect_same_size(length,expected,fieldPath){if(length!==expected)throw new Error("Array length ".concat(length," does not match schema length ").concat(expected," at ").concat(fieldPath.join(".")))},exports.expect_enum=function expect_enum(value,fieldPath){if("object"!=typeof value||null===value)throw new Error("Expected object not ".concat(typeof value,"(").concat(value,") at ").concat(fieldPath.join(".")))};var VALID_STRING_TYPES=types_js_1.integers.concat(["bool","string"]),VALID_OBJECT_KEYS=["option","enum","array","set","map","struct"],ErrorSchema=function(_super){function ErrorSchema(schema,expected){var message="Invalid schema: ".concat(JSON.stringify(schema)," expected ").concat(expected);return _super.call(this,message)||this}return __extends(ErrorSchema,_super),ErrorSchema}(Error);function validate_schema(schema){if("string"!=typeof schema||!VALID_STRING_TYPES.includes(schema)){if(schema&&"object"==typeof schema){var keys=Object.keys(schema);if(1===keys.length&&VALID_OBJECT_KEYS.includes(keys[0])){var key=keys[0];if("option"===key)return validate_schema(schema[key]);if("enum"===key)return function validate_enum_schema(schema){if(!Array.isArray(schema))throw new ErrorSchema(schema,"Array");for(var _i=0,schema_1=schema;_i<schema_1.length;_i++){var sch=schema_1[_i];if("object"!=typeof sch||!("struct"in sch))throw new Error('Missing "struct" key in enum schema');if("object"!=typeof sch.struct||1!==Object.keys(sch.struct).length)throw new Error('The "struct" in each enum must have a single key');validate_schema({struct:sch.struct})}}(schema[key]);if("array"===key)return function validate_array_schema(schema){if("object"!=typeof schema)throw new ErrorSchema(schema,"{ type, len? }");if(schema.len&&"number"!=typeof schema.len)throw new Error("Invalid schema: ".concat(schema));if("type"in schema)return validate_schema(schema.type);throw new ErrorSchema(schema,"{ type, len? }")}(schema[key]);if("set"===key)return validate_schema(schema[key]);if("map"===key)return function validate_map_schema(schema){if("object"!=typeof schema||!("key"in schema)||!("value"in schema))throw new ErrorSchema(schema,"{ key, value }");validate_schema(schema.key),validate_schema(schema.value)}(schema[key]);if("struct"===key)return function validate_struct_schema(schema){if("object"!=typeof schema)throw new ErrorSchema(schema,"object");for(var key in schema)validate_schema(schema[key])}(schema[key])}}throw new ErrorSchema(schema,VALID_OBJECT_KEYS.join(", ")+" or "+VALID_STRING_TYPES.join(", "))}}exports.ErrorSchema=ErrorSchema,exports.validate_schema=validate_schema},"./node_modules/charenc/charenc.js":module=>{var charenc={utf8:{stringToBytes:function(str){return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)))},bytesToString:function(bytes){return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)))}},bin:{stringToBytes:function(str){for(var bytes=[],i=0;i<str.length;i++)bytes.push(255&str.charCodeAt(i));return bytes},bytesToString:function(bytes){for(var str=[],i=0;i<bytes.length;i++)str.push(String.fromCharCode(bytes[i]));return str.join("")}}};module.exports=charenc},"./node_modules/crypt/crypt.js":module=>{var base64map,crypt;base64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",crypt={rotl:function(n,b){return n<<b|n>>>32-b},rotr:function(n,b){return n<<32-b|n>>>b},endian:function(n){if(n.constructor==Number)return 16711935&crypt.rotl(n,8)|4278255360&crypt.rotl(n,24);for(var i=0;i<n.length;i++)n[i]=crypt.endian(n[i]);return n},randomBytes:function(n){for(var bytes=[];n>0;n--)bytes.push(Math.floor(256*Math.random()));return bytes},bytesToWords:function(bytes){for(var words=[],i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32;return words},wordsToBytes:function(words){for(var bytes=[],b=0;b<32*words.length;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255);return bytes},bytesToHex:function(bytes){for(var hex=[],i=0;i<bytes.length;i++)hex.push((bytes[i]>>>4).toString(16)),hex.push((15&bytes[i]).toString(16));return hex.join("")},hexToBytes:function(hex){for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(parseInt(hex.substr(c,2),16));return bytes},bytesToBase64:function(bytes){for(var base64=[],i=0;i<bytes.length;i+=3)for(var triplet=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2],j=0;j<4;j++)8*i+6*j<=8*bytes.length?base64.push(base64map.charAt(triplet>>>6*(3-j)&63)):base64.push("=");return base64.join("")},base64ToBytes:function(base64){base64=base64.replace(/[^A-Z0-9+\/]/gi,"");for(var bytes=[],i=0,imod4=0;i<base64.length;imod4=++i%4)0!=imod4&&bytes.push((base64map.indexOf(base64.charAt(i-1))&Math.pow(2,-2*imod4+8)-1)<<2*imod4|base64map.indexOf(base64.charAt(i))>>>6-2*imod4);return bytes}},module.exports=crypt},"./node_modules/depd/lib/browser/index.js":module=>{"use strict";function wrapfunction(fn,message){if("function"!=typeof fn)throw new TypeError("argument fn must be a function");return fn}function wrapproperty(obj,prop,message){if(!obj||"object"!=typeof obj&&"function"!=typeof obj)throw new TypeError("argument obj must be object");var descriptor=Object.getOwnPropertyDescriptor(obj,prop);if(!descriptor)throw new TypeError("must call property on owner object");if(!descriptor.configurable)throw new TypeError("property must be configurable")}module.exports=function depd(namespace){if(!namespace)throw new TypeError("argument namespace is required");function deprecate(message){}return deprecate._file=void 0,deprecate._ignored=!0,deprecate._namespace=namespace,deprecate._traced=!1,deprecate._warned=Object.create(null),deprecate.function=wrapfunction,deprecate.property=wrapproperty,deprecate}},"./node_modules/js-sha256/src/sha256.js":(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__,process=__webpack_require__("./node_modules/process/browser.js");!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&"renderer"!=process.type;NODE_JS?root=__webpack_require__.g:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(obj){return"[object Array]"===Object.prototype.toString.call(obj)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(obj){return"object"==typeof obj&&obj.buffer&&obj.buffer.constructor===ArrayBuffer});var createOutputMethod=function(outputType,is224){return function(message){return new Sha256(is224,!0).update(message)[outputType]()}},createMethod=function(is224){var method=createOutputMethod("hex",is224);NODE_JS&&(method=nodeWrap(method,is224)),method.create=function(){return new Sha256(is224)},method.update=function(message){return method.create().update(message)};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createOutputMethod(type,is224)}return method},nodeWrap=function(method,is224){var bufferFrom,crypto=__webpack_require__("?abf2"),Buffer=__webpack_require__("?69d9").Buffer,algorithm=is224?"sha224":"sha256";bufferFrom=Buffer.from&&!root.JS_SHA256_NO_BUFFER_FROM?Buffer.from:function(message){return new Buffer(message)};return function(message){if("string"==typeof message)return crypto.createHash(algorithm).update(message,"utf8").digest("hex");if(null==message)throw new Error(ERROR);return message.constructor===ArrayBuffer&&(message=new Uint8Array(message)),Array.isArray(message)||ArrayBuffer.isView(message)||message.constructor===Buffer?crypto.createHash(algorithm).update(bufferFrom(message)).digest("hex"):method(message)}},createHmacOutputMethod=function(outputType,is224){return function(key,message){return new HmacSha256(key,is224,!0).update(message)[outputType]()}},createHmacMethod=function(is224){var method=createHmacOutputMethod("hex",is224);method.create=function(key){return new HmacSha256(key,is224)},method.update=function(key,message){return method.create(key).update(message)};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createHmacOutputMethod(type,is224)}return method};function Sha256(is224,sharedMemory){sharedMemory?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],is224?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=is224}function HmacSha256(key,is224,sharedMemory){var i,type=typeof key;if("string"===type){var code,bytes=[],length=key.length,index=0;for(i=0;i<length;++i)(code=key.charCodeAt(i))<128?bytes[index++]=code:code<2048?(bytes[index++]=192|code>>>6,bytes[index++]=128|63&code):code<55296||code>=57344?(bytes[index++]=224|code>>>12,bytes[index++]=128|code>>>6&63,bytes[index++]=128|63&code):(code=65536+((1023&code)<<10|1023&key.charCodeAt(++i)),bytes[index++]=240|code>>>18,bytes[index++]=128|code>>>12&63,bytes[index++]=128|code>>>6&63,bytes[index++]=128|63&code);key=bytes}else{if("object"!==type)throw new Error(ERROR);if(null===key)throw new Error(ERROR);if(ARRAY_BUFFER&&key.constructor===ArrayBuffer)key=new Uint8Array(key);else if(!(Array.isArray(key)||ARRAY_BUFFER&&ArrayBuffer.isView(key)))throw new Error(ERROR)}key.length>64&&(key=new Sha256(is224,!0).update(key).array());var oKeyPad=[],iKeyPad=[];for(i=0;i<64;++i){var b=key[i]||0;oKeyPad[i]=92^b,iKeyPad[i]=54^b}Sha256.call(this,is224,sharedMemory),this.update(iKeyPad),this.oKeyPad=oKeyPad,this.inner=!0,this.sharedMemory=sharedMemory}Sha256.prototype.update=function(message){if(!this.finalized){var notString,type=typeof message;if("string"!==type){if("object"!==type)throw new Error(ERROR);if(null===message)throw new Error(ERROR);if(ARRAY_BUFFER&&message.constructor===ArrayBuffer)message=new Uint8Array(message);else if(!(Array.isArray(message)||ARRAY_BUFFER&&ArrayBuffer.isView(message)))throw new Error(ERROR);notString=!0}for(var code,i,index=0,length=message.length,blocks=this.blocks;index<length;){if(this.hashed&&(this.hashed=!1,blocks[0]=this.block,this.block=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0),notString)for(i=this.start;index<length&&i<64;++index)blocks[i>>>2]|=message[index]<<SHIFT[3&i++];else for(i=this.start;index<length&&i<64;++index)(code=message.charCodeAt(index))<128?blocks[i>>>2]|=code<<SHIFT[3&i++]:code<2048?(blocks[i>>>2]|=(192|code>>>6)<<SHIFT[3&i++],blocks[i>>>2]|=(128|63&code)<<SHIFT[3&i++]):code<55296||code>=57344?(blocks[i>>>2]|=(224|code>>>12)<<SHIFT[3&i++],blocks[i>>>2]|=(128|code>>>6&63)<<SHIFT[3&i++],blocks[i>>>2]|=(128|63&code)<<SHIFT[3&i++]):(code=65536+((1023&code)<<10|1023&message.charCodeAt(++index)),blocks[i>>>2]|=(240|code>>>18)<<SHIFT[3&i++],blocks[i>>>2]|=(128|code>>>12&63)<<SHIFT[3&i++],blocks[i>>>2]|=(128|code>>>6&63)<<SHIFT[3&i++],blocks[i>>>2]|=(128|63&code)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=blocks[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var blocks=this.blocks,i=this.lastByteIndex;blocks[16]=this.block,blocks[i>>>2]|=EXTRA[3&i],this.block=blocks[16],i>=56&&(this.hashed||this.hash(),blocks[0]=this.block,blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0),blocks[14]=this.hBytes<<3|this.bytes>>>29,blocks[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var j,s0,s1,maj,t1,ab,da,cd,bc,a=this.h0,b=this.h1,c=this.h2,d=this.h3,e=this.h4,f=this.h5,g=this.h6,h=this.h7,blocks=this.blocks;for(j=16;j<64;++j)s0=((t1=blocks[j-15])>>>7|t1<<25)^(t1>>>18|t1<<14)^t1>>>3,s1=((t1=blocks[j-2])>>>17|t1<<15)^(t1>>>19|t1<<13)^t1>>>10,blocks[j]=blocks[j-16]+s0+blocks[j-7]+s1|0;for(bc=b&c,j=0;j<64;j+=4)this.first?(this.is224?(ab=300032,h=(t1=blocks[0]-1413257819)-150054599|0,d=t1+24177077|0):(ab=704751109,h=(t1=blocks[0]-210244248)-1521486534|0,d=t1+143694565|0),this.first=!1):(s0=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),maj=(ab=a&b)^a&c^bc,h=d+(t1=h+(s1=(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7))+(e&f^~e&g)+K[j]+blocks[j])|0,d=t1+(s0+maj)|0),s0=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),maj=(da=d&a)^d&b^ab,g=c+(t1=g+(s1=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&e^~h&f)+K[j+1]+blocks[j+1])|0,s0=((c=t1+(s0+maj)|0)>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),maj=(cd=c&d)^c&a^da,f=b+(t1=f+(s1=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&h^~g&e)+K[j+2]+blocks[j+2])|0,s0=((b=t1+(s0+maj)|0)>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10),maj=(bc=b&c)^b&d^cd,e=a+(t1=e+(s1=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&g^~f&h)+K[j+3]+blocks[j+3])|0,a=t1+(s0+maj)|0,this.chromeBugWorkAround=!0;this.h0=this.h0+a|0,this.h1=this.h1+b|0,this.h2=this.h2+c|0,this.h3=this.h3+d|0,this.h4=this.h4+e|0,this.h5=this.h5+f|0,this.h6=this.h6+g|0,this.h7=this.h7+h|0},Sha256.prototype.hex=function(){this.finalize();var h0=this.h0,h1=this.h1,h2=this.h2,h3=this.h3,h4=this.h4,h5=this.h5,h6=this.h6,h7=this.h7,hex=HEX_CHARS[h0>>>28&15]+HEX_CHARS[h0>>>24&15]+HEX_CHARS[h0>>>20&15]+HEX_CHARS[h0>>>16&15]+HEX_CHARS[h0>>>12&15]+HEX_CHARS[h0>>>8&15]+HEX_CHARS[h0>>>4&15]+HEX_CHARS[15&h0]+HEX_CHARS[h1>>>28&15]+HEX_CHARS[h1>>>24&15]+HEX_CHARS[h1>>>20&15]+HEX_CHARS[h1>>>16&15]+HEX_CHARS[h1>>>12&15]+HEX_CHARS[h1>>>8&15]+HEX_CHARS[h1>>>4&15]+HEX_CHARS[15&h1]+HEX_CHARS[h2>>>28&15]+HEX_CHARS[h2>>>24&15]+HEX_CHARS[h2>>>20&15]+HEX_CHARS[h2>>>16&15]+HEX_CHARS[h2>>>12&15]+HEX_CHARS[h2>>>8&15]+HEX_CHARS[h2>>>4&15]+HEX_CHARS[15&h2]+HEX_CHARS[h3>>>28&15]+HEX_CHARS[h3>>>24&15]+HEX_CHARS[h3>>>20&15]+HEX_CHARS[h3>>>16&15]+HEX_CHARS[h3>>>12&15]+HEX_CHARS[h3>>>8&15]+HEX_CHARS[h3>>>4&15]+HEX_CHARS[15&h3]+HEX_CHARS[h4>>>28&15]+HEX_CHARS[h4>>>24&15]+HEX_CHARS[h4>>>20&15]+HEX_CHARS[h4>>>16&15]+HEX_CHARS[h4>>>12&15]+HEX_CHARS[h4>>>8&15]+HEX_CHARS[h4>>>4&15]+HEX_CHARS[15&h4]+HEX_CHARS[h5>>>28&15]+HEX_CHARS[h5>>>24&15]+HEX_CHARS[h5>>>20&15]+HEX_CHARS[h5>>>16&15]+HEX_CHARS[h5>>>12&15]+HEX_CHARS[h5>>>8&15]+HEX_CHARS[h5>>>4&15]+HEX_CHARS[15&h5]+HEX_CHARS[h6>>>28&15]+HEX_CHARS[h6>>>24&15]+HEX_CHARS[h6>>>20&15]+HEX_CHARS[h6>>>16&15]+HEX_CHARS[h6>>>12&15]+HEX_CHARS[h6>>>8&15]+HEX_CHARS[h6>>>4&15]+HEX_CHARS[15&h6];return this.is224||(hex+=HEX_CHARS[h7>>>28&15]+HEX_CHARS[h7>>>24&15]+HEX_CHARS[h7>>>20&15]+HEX_CHARS[h7>>>16&15]+HEX_CHARS[h7>>>12&15]+HEX_CHARS[h7>>>8&15]+HEX_CHARS[h7>>>4&15]+HEX_CHARS[15&h7]),hex},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var h0=this.h0,h1=this.h1,h2=this.h2,h3=this.h3,h4=this.h4,h5=this.h5,h6=this.h6,h7=this.h7,arr=[h0>>>24&255,h0>>>16&255,h0>>>8&255,255&h0,h1>>>24&255,h1>>>16&255,h1>>>8&255,255&h1,h2>>>24&255,h2>>>16&255,h2>>>8&255,255&h2,h3>>>24&255,h3>>>16&255,h3>>>8&255,255&h3,h4>>>24&255,h4>>>16&255,h4>>>8&255,255&h4,h5>>>24&255,h5>>>16&255,h5>>>8&255,255&h5,h6>>>24&255,h6>>>16&255,h6>>>8&255,255&h6];return this.is224||arr.push(h7>>>24&255,h7>>>16&255,h7>>>8&255,255&h7),arr},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var buffer=new ArrayBuffer(this.is224?28:32),dataView=new DataView(buffer);return dataView.setUint32(0,this.h0),dataView.setUint32(4,this.h1),dataView.setUint32(8,this.h2),dataView.setUint32(12,this.h3),dataView.setUint32(16,this.h4),dataView.setUint32(20,this.h5),dataView.setUint32(24,this.h6),this.is224||dataView.setUint32(28,this.h7),buffer},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var innerHash=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(innerHash),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()},"./node_modules/mustache/mustache.js":function(module){module.exports=function(){"use strict";var objectToString=Object.prototype.toString,isArray=Array.isArray||function isArrayPolyfill(object){return"[object Array]"===objectToString.call(object)};function isFunction(object){return"function"==typeof object}function typeStr(obj){return isArray(obj)?"array":typeof obj}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return null!=obj&&"object"==typeof obj&&propName in obj}function primitiveHasOwnProperty(primitive,propName){return null!=primitive&&"object"!=typeof primitive&&primitive.hasOwnProperty&&primitive.hasOwnProperty(propName)}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s){return entityMap[s]})}var whiteRe=/\s*/,spaceRe=/\s+/,equalsRe=/\s*=/,curlyRe=/\s*\}/,tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){if(!template)return[];var openingTagRe,closingTagRe,closingCurlyRe,lineHasNonSpace=!1,sections=[],tokens=[],spaces=[],hasTag=!1,nonSpace=!1,indentation="",tagIndex=0;function stripSpace(){if(hasTag&&!nonSpace)for(;spaces.length;)delete tokens[spaces.pop()];else spaces=[];hasTag=!1,nonSpace=!1}function compileTags(tagsToCompile){if("string"==typeof tagsToCompile&&(tagsToCompile=tagsToCompile.split(spaceRe,2)),!isArray(tagsToCompile)||2!==tagsToCompile.length)throw new Error("Invalid tags: "+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*"),closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1])),closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);for(var start,type,value,chr,token,openSection,scanner=new Scanner(template);!scanner.eos();){if(start=scanner.pos,value=scanner.scanUntil(openingTagRe))for(var i=0,valueLength=value.length;i<valueLength;++i)isWhitespace(chr=value.charAt(i))?(spaces.push(tokens.length),indentation+=chr):(nonSpace=!0,lineHasNonSpace=!0,indentation+=" "),tokens.push(["text",chr,start,start+1]),start+=1,"\n"===chr&&(stripSpace(),indentation="",tagIndex=0,lineHasNonSpace=!1);if(!scanner.scan(openingTagRe))break;if(hasTag=!0,type=scanner.scan(tagRe)||"name",scanner.scan(whiteRe),"="===type?(value=scanner.scanUntil(equalsRe),scanner.scan(equalsRe),scanner.scanUntil(closingTagRe)):"{"===type?(value=scanner.scanUntil(closingCurlyRe),scanner.scan(curlyRe),scanner.scanUntil(closingTagRe),type="&"):value=scanner.scanUntil(closingTagRe),!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);if(token=">"==type?[type,value,start,scanner.pos,indentation,tagIndex,lineHasNonSpace]:[type,value,start,scanner.pos],tagIndex++,tokens.push(token),"#"===type||"^"===type)sections.push(token);else if("/"===type){if(!(openSection=sections.pop()))throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else"name"===type||"{"===type||"&"===type?nonSpace=!0:"="===type&&compileTags(value)}if(stripSpace(),openSection=sections.pop())throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){for(var token,lastToken,squashedTokens=[],i=0,numTokens=tokens.length;i<numTokens;++i)(token=tokens[i])&&("text"===token[0]&&lastToken&&"text"===lastToken[0]?(lastToken[1]+=token[1],lastToken[3]=token[3]):(squashedTokens.push(token),lastToken=token));return squashedTokens}function nestTokens(tokens){for(var token,nestedTokens=[],collector=nestedTokens,sections=[],i=0,numTokens=tokens.length;i<numTokens;++i)switch((token=tokens[i])[0]){case"#":case"^":collector.push(token),sections.push(token),collector=token[4]=[];break;case"/":sections.pop()[5]=token[2],collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}return nestedTokens}function Scanner(string){this.string=string,this.tail=string,this.pos=0}function Context(view,parentContext){this.view=view,this.cache={".":this.view},this.parent=parentContext}function Writer(){this.templateCache={_cache:{},set:function set(key,value){this._cache[key]=value},get:function get(key){return this._cache[key]},clear:function clear(){this._cache={}}}}Scanner.prototype.eos=function eos(){return""===this.tail},Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||0!==match.index)return"";var string=match[0];return this.tail=this.tail.substring(string.length),this.pos+=string.length,string},Scanner.prototype.scanUntil=function scanUntil(re){var match,index=this.tail.search(re);switch(index){case-1:match=this.tail,this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index),this.tail=this.tail.substring(index)}return this.pos+=match.length,match},Context.prototype.push=function push(view){return new Context(view,this)},Context.prototype.lookup=function lookup(name){var value,cache=this.cache;if(cache.hasOwnProperty(name))value=cache[name];else{for(var intermediateValue,names,index,context=this,lookupHit=!1;context;){if(name.indexOf(".")>0)for(intermediateValue=context.view,names=name.split("."),index=0;null!=intermediateValue&&index<names.length;)index===names.length-1&&(lookupHit=hasProperty(intermediateValue,names[index])||primitiveHasOwnProperty(intermediateValue,names[index])),intermediateValue=intermediateValue[names[index++]];else intermediateValue=context.view[name],lookupHit=hasProperty(context.view,name);if(lookupHit){value=intermediateValue;break}context=context.parent}cache[name]=value}return isFunction(value)&&(value=value.call(this.view)),value},Writer.prototype.clearCache=function clearCache(){void 0!==this.templateCache&&this.templateCache.clear()},Writer.prototype.parse=function parse(template,tags){var cache=this.templateCache,cacheKey=template+":"+(tags||mustache.tags).join(":"),isCacheEnabled=void 0!==cache,tokens=isCacheEnabled?cache.get(cacheKey):void 0;return null==tokens&&(tokens=parseTemplate(template,tags),isCacheEnabled&&cache.set(cacheKey,tokens)),tokens},Writer.prototype.render=function render(template,view,partials,tags){var tokens=this.parse(template,tags),context=view instanceof Context?view:new Context(view,void 0);return this.renderTokens(tokens,context,partials,template,tags)},Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate,tags){for(var token,symbol,value,buffer="",i=0,numTokens=tokens.length;i<numTokens;++i)value=void 0,"#"===(symbol=(token=tokens[i])[0])?value=this.renderSection(token,context,partials,originalTemplate):"^"===symbol?value=this.renderInverted(token,context,partials,originalTemplate):">"===symbol?value=this.renderPartial(token,context,partials,tags):"&"===symbol?value=this.unescapedValue(token,context):"name"===symbol?value=this.escapedValue(token,context):"text"===symbol&&(value=this.rawValue(token)),void 0!==value&&(buffer+=value);return buffer},Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self=this,buffer="",value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(value){if(isArray(value))for(var j=0,valueLength=value.length;j<valueLength;++j)buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate);else if("object"==typeof value||"string"==typeof value||"number"==typeof value)buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate);else if(isFunction(value)){if("string"!=typeof originalTemplate)throw new Error("Cannot use higher-order sections without the original template");null!=(value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender))&&(buffer+=value)}else buffer+=this.renderTokens(token[4],context,partials,originalTemplate);return buffer}},Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&0===value.length)return this.renderTokens(token[4],context,partials,originalTemplate)},Writer.prototype.indentPartial=function indentPartial(partial,indentation,lineHasNonSpace){for(var filteredIndentation=indentation.replace(/[^ \t]/g,""),partialByNl=partial.split("\n"),i=0;i<partialByNl.length;i++)partialByNl[i].length&&(i>0||!lineHasNonSpace)&&(partialByNl[i]=filteredIndentation+partialByNl[i]);return partialByNl.join("\n")},Writer.prototype.renderPartial=function renderPartial(token,context,partials,tags){if(partials){var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(null!=value){var lineHasNonSpace=token[6],tagIndex=token[5],indentation=token[4],indentedValue=value;return 0==tagIndex&&indentation&&(indentedValue=this.indentPartial(value,indentation,lineHasNonSpace)),this.renderTokens(this.parse(indentedValue,tags),context,partials,indentedValue)}}},Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(null!=value)return value},Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(null!=value)return mustache.escape(value)},Writer.prototype.rawValue=function rawValue(token){return token[1]};var mustache={name:"mustache.js",version:"4.0.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(cache){defaultWriter.templateCache=cache},get templateCache(){return defaultWriter.templateCache}},defaultWriter=new Writer;return mustache.clearCache=function clearCache(){return defaultWriter.clearCache()},mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)},mustache.render=function render(template,view,partials,tags){if("string"!=typeof template)throw new TypeError('Invalid template! Template should be a "string" but "'+typeStr(template)+'" was given as the first argument for mustache#render(template, view, partials)');return defaultWriter.render(template,view,partials,tags)},mustache.escape=escapeHtml,mustache.Scanner=Scanner,mustache.Context=Context,mustache.Writer=Writer,mustache}()},"./node_modules/react-icons/lib/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{k5:()=>GenIcon});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=react.createContext&&react.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var target={};for(var key in source)if(Object.prototype.hasOwnProperty.call(source,key)){if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Tree2Element(tree){return tree&&tree.map((node,i)=>react.createElement(node.tag,_objectSpread({key:i},node.attr),Tree2Element(node.child)))}function GenIcon(data){return props=>react.createElement(IconBase,_extends({attr:_objectSpread({},data.attr)},props),Tree2Element(data.child))}function IconBase(props){var elem=conf=>{var className,{attr,size,title}=props,svgProps=_objectWithoutProperties(props,_excluded),computedSize=size||conf.size||"1em";return conf.className&&(className=conf.className),props.className&&(className=(className?className+" ":"")+props.className),react.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},conf.attr,attr,svgProps,{className,style:_objectSpread(_objectSpread({color:props.color||conf.color},conf.style),props.style),height:computedSize,width:computedSize,xmlns:"http://www.w3.org/2000/svg"}),title&&react.createElement("title",null,title),props.children)};return void 0!==IconContext?react.createElement(IconContext.Consumer,null,conf=>elem(conf)):elem(DefaultContext)}},"./node_modules/secp256k1/elliptic.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/secp256k1/lib/index.js")(__webpack_require__("./node_modules/secp256k1/lib/elliptic.js"))},"./node_modules/secp256k1/lib/elliptic.js":(module,__unused_webpack_exports,__webpack_require__)=>{const ec=new(0,__webpack_require__("./node_modules/elliptic/lib/elliptic.js").ec)("secp256k1"),ecparams=ec.curve,BN=ecparams.n.constructor;function loadPublicKey(pubkey){const first=pubkey[0];switch(first){case 2:case 3:return 33!==pubkey.length?null:function loadCompressedPublicKey(first,xbuf){let x=new BN(xbuf);if(x.cmp(ecparams.p)>=0)return null;x=x.toRed(ecparams.red);let y=x.redSqr().redIMul(x).redIAdd(ecparams.b).redSqrt();3===first!==y.isOdd()&&(y=y.redNeg());const x3=x.redSqr().redIMul(x);return y.redSqr().redISub(x3.redIAdd(ecparams.b)).isZero()?ec.keyPair({pub:{x,y}}):null}(first,pubkey.subarray(1,33));case 4:case 6:case 7:return 65!==pubkey.length?null:function loadUncompressedPublicKey(first,xbuf,ybuf){let x=new BN(xbuf),y=new BN(ybuf);if(x.cmp(ecparams.p)>=0||y.cmp(ecparams.p)>=0)return null;if(x=x.toRed(ecparams.red),y=y.toRed(ecparams.red),(6===first||7===first)&&y.isOdd()!==(7===first))return null;const x3=x.redSqr().redIMul(x);return y.redSqr().redISub(x3.redIAdd(ecparams.b)).isZero()?ec.keyPair({pub:{x,y}}):null}(first,pubkey.subarray(1,33),pubkey.subarray(33,65));default:return null}}function savePublicKey(output,point){const pubkey=point.encode(null,33===output.length);for(let i=0;i<output.length;++i)output[i]=pubkey[i]}module.exports={contextRandomize:()=>0,privateKeyVerify(seckey){const bn=new BN(seckey);return bn.cmp(ecparams.n)<0&&!bn.isZero()?0:1},privateKeyNegate(seckey){const bn=new BN(seckey),negate=ecparams.n.sub(bn).umod(ecparams.n).toArrayLike(Uint8Array,"be",32);return seckey.set(negate),0},privateKeyTweakAdd(seckey,tweak){const bn=new BN(tweak);if(bn.cmp(ecparams.n)>=0)return 1;if(bn.iadd(new BN(seckey)),bn.cmp(ecparams.n)>=0&&bn.isub(ecparams.n),bn.isZero())return 1;const tweaked=bn.toArrayLike(Uint8Array,"be",32);return seckey.set(tweaked),0},privateKeyTweakMul(seckey,tweak){let bn=new BN(tweak);if(bn.cmp(ecparams.n)>=0||bn.isZero())return 1;bn.imul(new BN(seckey)),bn.cmp(ecparams.n)>=0&&(bn=bn.umod(ecparams.n));const tweaked=bn.toArrayLike(Uint8Array,"be",32);return seckey.set(tweaked),0},publicKeyVerify:pubkey=>null===loadPublicKey(pubkey)?1:0,publicKeyCreate(output,seckey){const bn=new BN(seckey);if(bn.cmp(ecparams.n)>=0||bn.isZero())return 1;return savePublicKey(output,ec.keyFromPrivate(seckey).getPublic()),0},publicKeyConvert(output,pubkey){const pair=loadPublicKey(pubkey);if(null===pair)return 1;return savePublicKey(output,pair.getPublic()),0},publicKeyNegate(output,pubkey){const pair=loadPublicKey(pubkey);if(null===pair)return 1;const point=pair.getPublic();return point.y=point.y.redNeg(),savePublicKey(output,point),0},publicKeyCombine(output,pubkeys){const pairs=new Array(pubkeys.length);for(let i=0;i<pubkeys.length;++i)if(pairs[i]=loadPublicKey(pubkeys[i]),null===pairs[i])return 1;let point=pairs[0].getPublic();for(let i=1;i<pairs.length;++i)point=point.add(pairs[i].pub);return point.isInfinity()?2:(savePublicKey(output,point),0)},publicKeyTweakAdd(output,pubkey,tweak){const pair=loadPublicKey(pubkey);if(null===pair)return 1;if((tweak=new BN(tweak)).cmp(ecparams.n)>=0)return 2;const point=pair.getPublic().add(ecparams.g.mul(tweak));return point.isInfinity()?2:(savePublicKey(output,point),0)},publicKeyTweakMul(output,pubkey,tweak){const pair=loadPublicKey(pubkey);if(null===pair)return 1;if((tweak=new BN(tweak)).cmp(ecparams.n)>=0||tweak.isZero())return 2;return savePublicKey(output,pair.getPublic().mul(tweak)),0},signatureNormalize(sig){const r=new BN(sig.subarray(0,32)),s=new BN(sig.subarray(32,64));return r.cmp(ecparams.n)>=0||s.cmp(ecparams.n)>=0?1:(1===s.cmp(ec.nh)&&sig.set(ecparams.n.sub(s).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(obj,sig){const sigR=sig.subarray(0,32),sigS=sig.subarray(32,64);if(new BN(sigR).cmp(ecparams.n)>=0)return 1;if(new BN(sigS).cmp(ecparams.n)>=0)return 1;const{output}=obj;let r=output.subarray(4,37);r[0]=0,r.set(sigR,1);let lenR=33,posR=0;for(;lenR>1&&0===r[posR]&&!(128&r[posR+1]);--lenR,++posR);if(r=r.subarray(posR),128&r[0])return 1;if(lenR>1&&0===r[0]&&!(128&r[1]))return 1;let s=output.subarray(39,72);s[0]=0,s.set(sigS,1);let lenS=33,posS=0;for(;lenS>1&&0===s[posS]&&!(128&s[posS+1]);--lenS,++posS);return s=s.subarray(posS),128&s[0]||lenS>1&&0===s[0]&&!(128&s[1])?1:(obj.outputlen=6+lenR+lenS,output[0]=48,output[1]=obj.outputlen-2,output[2]=2,output[3]=r.length,output.set(r,4),output[4+lenR]=2,output[5+lenR]=s.length,output.set(s,6+lenR),0)},signatureImport(output,sig){if(sig.length<8)return 1;if(sig.length>72)return 1;if(48!==sig[0])return 1;if(sig[1]!==sig.length-2)return 1;if(2!==sig[2])return 1;const lenR=sig[3];if(0===lenR)return 1;if(5+lenR>=sig.length)return 1;if(2!==sig[4+lenR])return 1;const lenS=sig[5+lenR];if(0===lenS)return 1;if(6+lenR+lenS!==sig.length)return 1;if(128&sig[4])return 1;if(lenR>1&&0===sig[4]&&!(128&sig[5]))return 1;if(128&sig[lenR+6])return 1;if(lenS>1&&0===sig[lenR+6]&&!(128&sig[lenR+7]))return 1;let sigR=sig.subarray(4,4+lenR);if(33===sigR.length&&0===sigR[0]&&(sigR=sigR.subarray(1)),sigR.length>32)return 1;let sigS=sig.subarray(6+lenR);if(33===sigS.length&&0===sigS[0]&&(sigS=sigS.slice(1)),sigS.length>32)throw new Error("S length is too long");let r=new BN(sigR);r.cmp(ecparams.n)>=0&&(r=new BN(0));let s=new BN(sig.subarray(6+lenR));return s.cmp(ecparams.n)>=0&&(s=new BN(0)),output.set(r.toArrayLike(Uint8Array,"be",32),0),output.set(s.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(obj,message,seckey,data,noncefn){if(noncefn){const _noncefn=noncefn;noncefn=counter=>{const nonce=_noncefn(message,seckey,null,data,counter);if(!(nonce instanceof Uint8Array&&32===nonce.length))throw new Error("This is the way");return new BN(nonce)}}const d=new BN(seckey);if(d.cmp(ecparams.n)>=0||d.isZero())return 1;let sig;try{sig=ec.sign(message,seckey,{canonical:!0,k:noncefn,pers:data})}catch(err){return 1}return obj.signature.set(sig.r.toArrayLike(Uint8Array,"be",32),0),obj.signature.set(sig.s.toArrayLike(Uint8Array,"be",32),32),obj.recid=sig.recoveryParam,0},ecdsaVerify(sig,msg32,pubkey){const sigObj={r:sig.subarray(0,32),s:sig.subarray(32,64)},sigr=new BN(sigObj.r),sigs=new BN(sigObj.s);if(sigr.cmp(ecparams.n)>=0||sigs.cmp(ecparams.n)>=0)return 1;if(1===sigs.cmp(ec.nh)||sigr.isZero()||sigs.isZero())return 3;const pair=loadPublicKey(pubkey);if(null===pair)return 2;const point=pair.getPublic();return ec.verify(msg32,sigObj,point)?0:3},ecdsaRecover(output,sig,recid,msg32){const sigObj={r:sig.slice(0,32),s:sig.slice(32,64)},sigr=new BN(sigObj.r),sigs=new BN(sigObj.s);if(sigr.cmp(ecparams.n)>=0||sigs.cmp(ecparams.n)>=0)return 1;if(sigr.isZero()||sigs.isZero())return 2;let point;try{point=ec.recoverPubKey(msg32,sigObj,recid)}catch(err){return 2}return savePublicKey(output,point),0},ecdh(output,pubkey,seckey,data,hashfn,xbuf,ybuf){const pair=loadPublicKey(pubkey);if(null===pair)return 1;const scalar=new BN(seckey);if(scalar.cmp(ecparams.n)>=0||scalar.isZero())return 2;const point=pair.getPublic().mul(scalar);if(void 0===hashfn){const data=point.encode(null,!0),sha256=ec.hash().update(data).digest();for(let i=0;i<32;++i)output[i]=sha256[i]}else{xbuf||(xbuf=new Uint8Array(32));const x=point.getX().toArray("be",32);for(let i=0;i<32;++i)xbuf[i]=x[i];ybuf||(ybuf=new Uint8Array(32));const y=point.getY().toArray("be",32);for(let i=0;i<32;++i)ybuf[i]=y[i];const hash=hashfn(xbuf,ybuf,data);if(!(hash instanceof Uint8Array&&hash.length===output.length))return 2;output.set(hash)}return 0}}},"./node_modules/secp256k1/lib/index.js":module=>{const errors_IMPOSSIBLE_CASE="Impossible case. Please create issue.",errors_TWEAK_ADD="The tweak was out of range or the resulted private key is invalid",errors_TWEAK_MUL="The tweak was out of range or equal to zero",errors_CONTEXT_RANDOMIZE_UNKNOW="Unknow error on context randomization",errors_SECKEY_INVALID="Private Key is invalid",errors_PUBKEY_PARSE="Public Key could not be parsed",errors_PUBKEY_SERIALIZE="Public Key serialization error",errors_PUBKEY_COMBINE="The sum of the public keys is not valid",errors_SIG_PARSE="Signature could not be parsed",errors_SIGN="The nonce generation function failed, or the private key was invalid",errors_RECOVER="Public key could not be recover",errors_ECDH="Scalar was invalid (zero or overflow)";function assert(cond,msg){if(!cond)throw new Error(msg)}function isUint8Array(name,value,length){if(assert(value instanceof Uint8Array,`Expected ${name} to be an Uint8Array`),void 0!==length)if(Array.isArray(length)){const msg=`Expected ${name} to be an Uint8Array with length [${length.join(", ")}]`;assert(length.includes(value.length),msg)}else{const msg=`Expected ${name} to be an Uint8Array with length ${length}`;assert(value.length===length,msg)}}function isCompressed(value){assert("Boolean"===toTypeString(value),"Expected compressed to be a Boolean")}function getAssertedOutput(output=len=>new Uint8Array(len),length){return"function"==typeof output&&(output=output(length)),isUint8Array("output",output,length),output}function toTypeString(value){return Object.prototype.toString.call(value).slice(8,-1)}module.exports=secp256k1=>({contextRandomize(seed){if(assert(null===seed||seed instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),null!==seed&&isUint8Array("seed",seed,32),1===secp256k1.contextRandomize(seed))throw new Error(errors_CONTEXT_RANDOMIZE_UNKNOW)},privateKeyVerify:seckey=>(isUint8Array("private key",seckey,32),0===secp256k1.privateKeyVerify(seckey)),privateKeyNegate(seckey){switch(isUint8Array("private key",seckey,32),secp256k1.privateKeyNegate(seckey)){case 0:return seckey;case 1:throw new Error(errors_IMPOSSIBLE_CASE)}},privateKeyTweakAdd(seckey,tweak){switch(isUint8Array("private key",seckey,32),isUint8Array("tweak",tweak,32),secp256k1.privateKeyTweakAdd(seckey,tweak)){case 0:return seckey;case 1:throw new Error(errors_TWEAK_ADD)}},privateKeyTweakMul(seckey,tweak){switch(isUint8Array("private key",seckey,32),isUint8Array("tweak",tweak,32),secp256k1.privateKeyTweakMul(seckey,tweak)){case 0:return seckey;case 1:throw new Error(errors_TWEAK_MUL)}},publicKeyVerify:pubkey=>(isUint8Array("public key",pubkey,[33,65]),0===secp256k1.publicKeyVerify(pubkey)),publicKeyCreate(seckey,compressed=!0,output){switch(isUint8Array("private key",seckey,32),isCompressed(compressed),output=getAssertedOutput(output,compressed?33:65),secp256k1.publicKeyCreate(output,seckey)){case 0:return output;case 1:throw new Error(errors_SECKEY_INVALID);case 2:throw new Error(errors_PUBKEY_SERIALIZE)}},publicKeyConvert(pubkey,compressed=!0,output){switch(isUint8Array("public key",pubkey,[33,65]),isCompressed(compressed),output=getAssertedOutput(output,compressed?33:65),secp256k1.publicKeyConvert(output,pubkey)){case 0:return output;case 1:throw new Error(errors_PUBKEY_PARSE);case 2:throw new Error(errors_PUBKEY_SERIALIZE)}},publicKeyNegate(pubkey,compressed=!0,output){switch(isUint8Array("public key",pubkey,[33,65]),isCompressed(compressed),output=getAssertedOutput(output,compressed?33:65),secp256k1.publicKeyNegate(output,pubkey)){case 0:return output;case 1:throw new Error(errors_PUBKEY_PARSE);case 2:throw new Error(errors_IMPOSSIBLE_CASE);case 3:throw new Error(errors_PUBKEY_SERIALIZE)}},publicKeyCombine(pubkeys,compressed=!0,output){assert(Array.isArray(pubkeys),"Expected public keys to be an Array"),assert(pubkeys.length>0,"Expected public keys array will have more than zero items");for(const pubkey of pubkeys)isUint8Array("public key",pubkey,[33,65]);switch(isCompressed(compressed),output=getAssertedOutput(output,compressed?33:65),secp256k1.publicKeyCombine(output,pubkeys)){case 0:return output;case 1:throw new Error(errors_PUBKEY_PARSE);case 2:throw new Error(errors_PUBKEY_COMBINE);case 3:throw new Error(errors_PUBKEY_SERIALIZE)}},publicKeyTweakAdd(pubkey,tweak,compressed=!0,output){switch(isUint8Array("public key",pubkey,[33,65]),isUint8Array("tweak",tweak,32),isCompressed(compressed),output=getAssertedOutput(output,compressed?33:65),secp256k1.publicKeyTweakAdd(output,pubkey,tweak)){case 0:return output;case 1:throw new Error(errors_PUBKEY_PARSE);case 2:throw new Error(errors_TWEAK_ADD)}},publicKeyTweakMul(pubkey,tweak,compressed=!0,output){switch(isUint8Array("public key",pubkey,[33,65]),isUint8Array("tweak",tweak,32),isCompressed(compressed),output=getAssertedOutput(output,compressed?33:65),secp256k1.publicKeyTweakMul(output,pubkey,tweak)){case 0:return output;case 1:throw new Error(errors_PUBKEY_PARSE);case 2:throw new Error(errors_TWEAK_MUL)}},signatureNormalize(sig){switch(isUint8Array("signature",sig,64),secp256k1.signatureNormalize(sig)){case 0:return sig;case 1:throw new Error(errors_SIG_PARSE)}},signatureExport(sig,output){isUint8Array("signature",sig,64);const obj={output:output=getAssertedOutput(output,72),outputlen:72};switch(secp256k1.signatureExport(obj,sig)){case 0:return output.slice(0,obj.outputlen);case 1:throw new Error(errors_SIG_PARSE);case 2:throw new Error(errors_IMPOSSIBLE_CASE)}},signatureImport(sig,output){switch(isUint8Array("signature",sig),output=getAssertedOutput(output,64),secp256k1.signatureImport(output,sig)){case 0:return output;case 1:throw new Error(errors_SIG_PARSE);case 2:throw new Error(errors_IMPOSSIBLE_CASE)}},ecdsaSign(msg32,seckey,options={},output){isUint8Array("message",msg32,32),isUint8Array("private key",seckey,32),assert("Object"===toTypeString(options),"Expected options to be an Object"),void 0!==options.data&&isUint8Array("options.data",options.data),void 0!==options.noncefn&&assert("Function"===toTypeString(options.noncefn),"Expected options.noncefn to be a Function");const obj={signature:output=getAssertedOutput(output,64),recid:null};switch(secp256k1.ecdsaSign(obj,msg32,seckey,options.data,options.noncefn)){case 0:return obj;case 1:throw new Error(errors_SIGN);case 2:throw new Error(errors_IMPOSSIBLE_CASE)}},ecdsaVerify(sig,msg32,pubkey){switch(isUint8Array("signature",sig,64),isUint8Array("message",msg32,32),isUint8Array("public key",pubkey,[33,65]),secp256k1.ecdsaVerify(sig,msg32,pubkey)){case 0:return!0;case 3:return!1;case 1:throw new Error(errors_SIG_PARSE);case 2:throw new Error(errors_PUBKEY_PARSE)}},ecdsaRecover(sig,recid,msg32,compressed=!0,output){switch(isUint8Array("signature",sig,64),assert("Number"===toTypeString(recid)&&recid>=0&&recid<=3,"Expected recovery id to be a Number within interval [0, 3]"),isUint8Array("message",msg32,32),isCompressed(compressed),output=getAssertedOutput(output,compressed?33:65),secp256k1.ecdsaRecover(output,sig,recid,msg32)){case 0:return output;case 1:throw new Error(errors_SIG_PARSE);case 2:throw new Error(errors_RECOVER);case 3:throw new Error(errors_IMPOSSIBLE_CASE)}},ecdh(pubkey,seckey,options={},output){switch(isUint8Array("public key",pubkey,[33,65]),isUint8Array("private key",seckey,32),assert("Object"===toTypeString(options),"Expected options to be an Object"),void 0!==options.data&&isUint8Array("options.data",options.data),void 0!==options.hashfn?(assert("Function"===toTypeString(options.hashfn),"Expected options.hashfn to be a Function"),void 0!==options.xbuf&&isUint8Array("options.xbuf",options.xbuf,32),void 0!==options.ybuf&&isUint8Array("options.ybuf",options.ybuf,32),isUint8Array("output",output)):output=getAssertedOutput(output,32),secp256k1.ecdh(output,pubkey,seckey,options.data,options.hashfn,options.xbuf,options.ybuf)){case 0:return output;case 1:throw new Error(errors_PUBKEY_PARSE);case 2:throw new Error(errors_ECDH)}}})},"./node_modules/sha1/sha1.js":(module,__unused_webpack_exports,__webpack_require__)=>{var crypt,utf8,bin,api,Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;crypt=__webpack_require__("./node_modules/crypt/crypt.js"),utf8=__webpack_require__("./node_modules/charenc/charenc.js").utf8,bin=__webpack_require__("./node_modules/charenc/charenc.js").bin,(api=function(message,options){var digestbytes=crypt.wordsToBytes(function(message){message.constructor==String?message=utf8.stringToBytes(message):void 0!==Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(message)?message=Array.prototype.slice.call(message,0):Array.isArray(message)||(message=message.toString());var m=crypt.bytesToWords(message),l=8*message.length,w=[],H0=1732584193,H1=-271733879,H2=-1732584194,H3=271733878,H4=-1009589776;m[l>>5]|=128<<24-l%32,m[15+(l+64>>>9<<4)]=l;for(var i=0;i<m.length;i+=16){for(var a=H0,b=H1,c=H2,d=H3,e=H4,j=0;j<80;j++){if(j<16)w[j]=m[i+j];else{var n=w[j-3]^w[j-8]^w[j-14]^w[j-16];w[j]=n<<1|n>>>31}var t=(H0<<5|H0>>>27)+H4+(w[j]>>>0)+(j<20?1518500249+(H1&H2|~H1&H3):j<40?1859775393+(H1^H2^H3):j<60?(H1&H2|H1&H3|H2&H3)-1894007588:(H1^H2^H3)-899497514);H4=H3,H3=H2,H2=H1<<30|H1>>>2,H1=H0,H0=t}H0+=a,H1+=b,H2+=c,H3+=d,H4+=e}return[H0,H1,H2,H3,H4]}(message));return options&&options.asBytes?digestbytes:options&&options.asString?bin.bytesToString(digestbytes):crypt.bytesToHex(digestbytes)})._blocksize=16,api._digestsize=20,module.exports=api},"./node_modules/tweetnacl-util/nacl-util.js":function(module,__unused_webpack_exports,__webpack_require__){var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;!function(root,f){"use strict";module.exports?module.exports=f():(root.nacl||(root.nacl={}),root.nacl.util=f())}(this,function(){"use strict";var util={};function validateBase64(s){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(s))throw new TypeError("invalid encoding")}return util.decodeUTF8=function(s){if("string"!=typeof s)throw new TypeError("expected string");var i,d=unescape(encodeURIComponent(s)),b=new Uint8Array(d.length);for(i=0;i<d.length;i++)b[i]=d.charCodeAt(i);return b},util.encodeUTF8=function(arr){var i,s=[];for(i=0;i<arr.length;i++)s.push(String.fromCharCode(arr[i]));return decodeURIComponent(escape(s.join("")))},"undefined"==typeof atob?void 0!==Buffer.from?(util.encodeBase64=function(arr){return Buffer.from(arr).toString("base64")},util.decodeBase64=function(s){return validateBase64(s),new Uint8Array(Array.prototype.slice.call(Buffer.from(s,"base64"),0))}):(util.encodeBase64=function(arr){return new Buffer(arr).toString("base64")},util.decodeBase64=function(s){return validateBase64(s),new Uint8Array(Array.prototype.slice.call(new Buffer(s,"base64"),0))}):(util.encodeBase64=function(arr){var i,s=[],len=arr.length;for(i=0;i<len;i++)s.push(String.fromCharCode(arr[i]));return btoa(s.join(""))},util.decodeBase64=function(s){validateBase64(s);var i,d=atob(s),b=new Uint8Array(d.length);for(i=0;i<d.length;i++)b[i]=d.charCodeAt(i);return b}),util})},"./node_modules/tweetnacl/nacl-fast.js":(module,__unused_webpack_exports,__webpack_require__)=>{!function(nacl){"use strict";var gf=function(init){var i,r=new Float64Array(16);if(init)for(i=0;i<init.length;i++)r[i]=init[i];return r},randombytes=function(){throw new Error("no PRNG")},_0=new Uint8Array(16),_9=new Uint8Array(32);_9[0]=9;var gf0=gf(),gf1=gf([1]),_121665=gf([56129,1]),D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ts64(x,i,h,l){x[i]=h>>24&255,x[i+1]=h>>16&255,x[i+2]=h>>8&255,x[i+3]=255&h,x[i+4]=l>>24&255,x[i+5]=l>>16&255,x[i+6]=l>>8&255,x[i+7]=255&l}function vn(x,xi,y,yi,n){var i,d=0;for(i=0;i<n;i++)d|=x[xi+i]^y[yi+i];return(1&d-1>>>8)-1}function crypto_verify_16(x,xi,y,yi){return vn(x,xi,y,yi,16)}function crypto_verify_32(x,xi,y,yi){return vn(x,xi,y,yi,32)}function crypto_core_salsa20(out,inp,k,c){!function core_salsa20(o,p,k,c){for(var u,j0=255&c[0]|(255&c[1])<<8|(255&c[2])<<16|(255&c[3])<<24,j1=255&k[0]|(255&k[1])<<8|(255&k[2])<<16|(255&k[3])<<24,j2=255&k[4]|(255&k[5])<<8|(255&k[6])<<16|(255&k[7])<<24,j3=255&k[8]|(255&k[9])<<8|(255&k[10])<<16|(255&k[11])<<24,j4=255&k[12]|(255&k[13])<<8|(255&k[14])<<16|(255&k[15])<<24,j5=255&c[4]|(255&c[5])<<8|(255&c[6])<<16|(255&c[7])<<24,j6=255&p[0]|(255&p[1])<<8|(255&p[2])<<16|(255&p[3])<<24,j7=255&p[4]|(255&p[5])<<8|(255&p[6])<<16|(255&p[7])<<24,j8=255&p[8]|(255&p[9])<<8|(255&p[10])<<16|(255&p[11])<<24,j9=255&p[12]|(255&p[13])<<8|(255&p[14])<<16|(255&p[15])<<24,j10=255&c[8]|(255&c[9])<<8|(255&c[10])<<16|(255&c[11])<<24,j11=255&k[16]|(255&k[17])<<8|(255&k[18])<<16|(255&k[19])<<24,j12=255&k[20]|(255&k[21])<<8|(255&k[22])<<16|(255&k[23])<<24,j13=255&k[24]|(255&k[25])<<8|(255&k[26])<<16|(255&k[27])<<24,j14=255&k[28]|(255&k[29])<<8|(255&k[30])<<16|(255&k[31])<<24,j15=255&c[12]|(255&c[13])<<8|(255&c[14])<<16|(255&c[15])<<24,x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,i=0;i<20;i+=2)x0^=(u=(x12^=(u=(x8^=(u=(x4^=(u=x0+x12|0)<<7|u>>>25)+x0|0)<<9|u>>>23)+x4|0)<<13|u>>>19)+x8|0)<<18|u>>>14,x5^=(u=(x1^=(u=(x13^=(u=(x9^=(u=x5+x1|0)<<7|u>>>25)+x5|0)<<9|u>>>23)+x9|0)<<13|u>>>19)+x13|0)<<18|u>>>14,x10^=(u=(x6^=(u=(x2^=(u=(x14^=(u=x10+x6|0)<<7|u>>>25)+x10|0)<<9|u>>>23)+x14|0)<<13|u>>>19)+x2|0)<<18|u>>>14,x15^=(u=(x11^=(u=(x7^=(u=(x3^=(u=x15+x11|0)<<7|u>>>25)+x15|0)<<9|u>>>23)+x3|0)<<13|u>>>19)+x7|0)<<18|u>>>14,x0^=(u=(x3^=(u=(x2^=(u=(x1^=(u=x0+x3|0)<<7|u>>>25)+x0|0)<<9|u>>>23)+x1|0)<<13|u>>>19)+x2|0)<<18|u>>>14,x5^=(u=(x4^=(u=(x7^=(u=(x6^=(u=x5+x4|0)<<7|u>>>25)+x5|0)<<9|u>>>23)+x6|0)<<13|u>>>19)+x7|0)<<18|u>>>14,x10^=(u=(x9^=(u=(x8^=(u=(x11^=(u=x10+x9|0)<<7|u>>>25)+x10|0)<<9|u>>>23)+x11|0)<<13|u>>>19)+x8|0)<<18|u>>>14,x15^=(u=(x14^=(u=(x13^=(u=(x12^=(u=x15+x14|0)<<7|u>>>25)+x15|0)<<9|u>>>23)+x12|0)<<13|u>>>19)+x13|0)<<18|u>>>14;x0=x0+j0|0,x1=x1+j1|0,x2=x2+j2|0,x3=x3+j3|0,x4=x4+j4|0,x5=x5+j5|0,x6=x6+j6|0,x7=x7+j7|0,x8=x8+j8|0,x9=x9+j9|0,x10=x10+j10|0,x11=x11+j11|0,x12=x12+j12|0,x13=x13+j13|0,x14=x14+j14|0,x15=x15+j15|0,o[0]=x0>>>0&255,o[1]=x0>>>8&255,o[2]=x0>>>16&255,o[3]=x0>>>24&255,o[4]=x1>>>0&255,o[5]=x1>>>8&255,o[6]=x1>>>16&255,o[7]=x1>>>24&255,o[8]=x2>>>0&255,o[9]=x2>>>8&255,o[10]=x2>>>16&255,o[11]=x2>>>24&255,o[12]=x3>>>0&255,o[13]=x3>>>8&255,o[14]=x3>>>16&255,o[15]=x3>>>24&255,o[16]=x4>>>0&255,o[17]=x4>>>8&255,o[18]=x4>>>16&255,o[19]=x4>>>24&255,o[20]=x5>>>0&255,o[21]=x5>>>8&255,o[22]=x5>>>16&255,o[23]=x5>>>24&255,o[24]=x6>>>0&255,o[25]=x6>>>8&255,o[26]=x6>>>16&255,o[27]=x6>>>24&255,o[28]=x7>>>0&255,o[29]=x7>>>8&255,o[30]=x7>>>16&255,o[31]=x7>>>24&255,o[32]=x8>>>0&255,o[33]=x8>>>8&255,o[34]=x8>>>16&255,o[35]=x8>>>24&255,o[36]=x9>>>0&255,o[37]=x9>>>8&255,o[38]=x9>>>16&255,o[39]=x9>>>24&255,o[40]=x10>>>0&255,o[41]=x10>>>8&255,o[42]=x10>>>16&255,o[43]=x10>>>24&255,o[44]=x11>>>0&255,o[45]=x11>>>8&255,o[46]=x11>>>16&255,o[47]=x11>>>24&255,o[48]=x12>>>0&255,o[49]=x12>>>8&255,o[50]=x12>>>16&255,o[51]=x12>>>24&255,o[52]=x13>>>0&255,o[53]=x13>>>8&255,o[54]=x13>>>16&255,o[55]=x13>>>24&255,o[56]=x14>>>0&255,o[57]=x14>>>8&255,o[58]=x14>>>16&255,o[59]=x14>>>24&255,o[60]=x15>>>0&255,o[61]=x15>>>8&255,o[62]=x15>>>16&255,o[63]=x15>>>24&255}(out,inp,k,c)}function crypto_core_hsalsa20(out,inp,k,c){!function core_hsalsa20(o,p,k,c){for(var u,x0=255&c[0]|(255&c[1])<<8|(255&c[2])<<16|(255&c[3])<<24,x1=255&k[0]|(255&k[1])<<8|(255&k[2])<<16|(255&k[3])<<24,x2=255&k[4]|(255&k[5])<<8|(255&k[6])<<16|(255&k[7])<<24,x3=255&k[8]|(255&k[9])<<8|(255&k[10])<<16|(255&k[11])<<24,x4=255&k[12]|(255&k[13])<<8|(255&k[14])<<16|(255&k[15])<<24,x5=255&c[4]|(255&c[5])<<8|(255&c[6])<<16|(255&c[7])<<24,x6=255&p[0]|(255&p[1])<<8|(255&p[2])<<16|(255&p[3])<<24,x7=255&p[4]|(255&p[5])<<8|(255&p[6])<<16|(255&p[7])<<24,x8=255&p[8]|(255&p[9])<<8|(255&p[10])<<16|(255&p[11])<<24,x9=255&p[12]|(255&p[13])<<8|(255&p[14])<<16|(255&p[15])<<24,x10=255&c[8]|(255&c[9])<<8|(255&c[10])<<16|(255&c[11])<<24,x11=255&k[16]|(255&k[17])<<8|(255&k[18])<<16|(255&k[19])<<24,x12=255&k[20]|(255&k[21])<<8|(255&k[22])<<16|(255&k[23])<<24,x13=255&k[24]|(255&k[25])<<8|(255&k[26])<<16|(255&k[27])<<24,x14=255&k[28]|(255&k[29])<<8|(255&k[30])<<16|(255&k[31])<<24,x15=255&c[12]|(255&c[13])<<8|(255&c[14])<<16|(255&c[15])<<24,i=0;i<20;i+=2)x0^=(u=(x12^=(u=(x8^=(u=(x4^=(u=x0+x12|0)<<7|u>>>25)+x0|0)<<9|u>>>23)+x4|0)<<13|u>>>19)+x8|0)<<18|u>>>14,x5^=(u=(x1^=(u=(x13^=(u=(x9^=(u=x5+x1|0)<<7|u>>>25)+x5|0)<<9|u>>>23)+x9|0)<<13|u>>>19)+x13|0)<<18|u>>>14,x10^=(u=(x6^=(u=(x2^=(u=(x14^=(u=x10+x6|0)<<7|u>>>25)+x10|0)<<9|u>>>23)+x14|0)<<13|u>>>19)+x2|0)<<18|u>>>14,x15^=(u=(x11^=(u=(x7^=(u=(x3^=(u=x15+x11|0)<<7|u>>>25)+x15|0)<<9|u>>>23)+x3|0)<<13|u>>>19)+x7|0)<<18|u>>>14,x0^=(u=(x3^=(u=(x2^=(u=(x1^=(u=x0+x3|0)<<7|u>>>25)+x0|0)<<9|u>>>23)+x1|0)<<13|u>>>19)+x2|0)<<18|u>>>14,x5^=(u=(x4^=(u=(x7^=(u=(x6^=(u=x5+x4|0)<<7|u>>>25)+x5|0)<<9|u>>>23)+x6|0)<<13|u>>>19)+x7|0)<<18|u>>>14,x10^=(u=(x9^=(u=(x8^=(u=(x11^=(u=x10+x9|0)<<7|u>>>25)+x10|0)<<9|u>>>23)+x11|0)<<13|u>>>19)+x8|0)<<18|u>>>14,x15^=(u=(x14^=(u=(x13^=(u=(x12^=(u=x15+x14|0)<<7|u>>>25)+x15|0)<<9|u>>>23)+x12|0)<<13|u>>>19)+x13|0)<<18|u>>>14;o[0]=x0>>>0&255,o[1]=x0>>>8&255,o[2]=x0>>>16&255,o[3]=x0>>>24&255,o[4]=x5>>>0&255,o[5]=x5>>>8&255,o[6]=x5>>>16&255,o[7]=x5>>>24&255,o[8]=x10>>>0&255,o[9]=x10>>>8&255,o[10]=x10>>>16&255,o[11]=x10>>>24&255,o[12]=x15>>>0&255,o[13]=x15>>>8&255,o[14]=x15>>>16&255,o[15]=x15>>>24&255,o[16]=x6>>>0&255,o[17]=x6>>>8&255,o[18]=x6>>>16&255,o[19]=x6>>>24&255,o[20]=x7>>>0&255,o[21]=x7>>>8&255,o[22]=x7>>>16&255,o[23]=x7>>>24&255,o[24]=x8>>>0&255,o[25]=x8>>>8&255,o[26]=x8>>>16&255,o[27]=x8>>>24&255,o[28]=x9>>>0&255,o[29]=x9>>>8&255,o[30]=x9>>>16&255,o[31]=x9>>>24&255}(out,inp,k,c)}var sigma=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k){var u,i,z=new Uint8Array(16),x=new Uint8Array(64);for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];for(;b>=64;){for(crypto_core_salsa20(x,z,k,sigma),i=0;i<64;i++)c[cpos+i]=m[mpos+i]^x[i];for(u=1,i=8;i<16;i++)u=u+(255&z[i])|0,z[i]=255&u,u>>>=8;b-=64,cpos+=64,mpos+=64}if(b>0)for(crypto_core_salsa20(x,z,k,sigma),i=0;i<b;i++)c[cpos+i]=m[mpos+i]^x[i];return 0}function crypto_stream_salsa20(c,cpos,b,n,k){var u,i,z=new Uint8Array(16),x=new Uint8Array(64);for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];for(;b>=64;){for(crypto_core_salsa20(x,z,k,sigma),i=0;i<64;i++)c[cpos+i]=x[i];for(u=1,i=8;i<16;i++)u=u+(255&z[i])|0,z[i]=255&u,u>>>=8;b-=64,cpos+=64}if(b>0)for(crypto_core_salsa20(x,z,k,sigma),i=0;i<b;i++)c[cpos+i]=x[i];return 0}function crypto_stream(c,cpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);for(var sn=new Uint8Array(8),i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20(c,cpos,d,sn,s)}function crypto_stream_xor(c,cpos,m,mpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);for(var sn=new Uint8Array(8),i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s)}var poly1305=function(key){var t0,t1,t2,t3,t4,t5,t6,t7;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t0=255&key[0]|(255&key[1])<<8,this.r[0]=8191&t0,t1=255&key[2]|(255&key[3])<<8,this.r[1]=8191&(t0>>>13|t1<<3),t2=255&key[4]|(255&key[5])<<8,this.r[2]=7939&(t1>>>10|t2<<6),t3=255&key[6]|(255&key[7])<<8,this.r[3]=8191&(t2>>>7|t3<<9),t4=255&key[8]|(255&key[9])<<8,this.r[4]=255&(t3>>>4|t4<<12),this.r[5]=t4>>>1&8190,t5=255&key[10]|(255&key[11])<<8,this.r[6]=8191&(t4>>>14|t5<<2),t6=255&key[12]|(255&key[13])<<8,this.r[7]=8065&(t5>>>11|t6<<5),t7=255&key[14]|(255&key[15])<<8,this.r[8]=8191&(t6>>>8|t7<<8),this.r[9]=t7>>>5&127,this.pad[0]=255&key[16]|(255&key[17])<<8,this.pad[1]=255&key[18]|(255&key[19])<<8,this.pad[2]=255&key[20]|(255&key[21])<<8,this.pad[3]=255&key[22]|(255&key[23])<<8,this.pad[4]=255&key[24]|(255&key[25])<<8,this.pad[5]=255&key[26]|(255&key[27])<<8,this.pad[6]=255&key[28]|(255&key[29])<<8,this.pad[7]=255&key[30]|(255&key[31])<<8};function crypto_onetimeauth(out,outpos,m,mpos,n,k){var s=new poly1305(k);return s.update(m,mpos,n),s.finish(out,outpos),0}function crypto_onetimeauth_verify(h,hpos,m,mpos,n,k){var x=new Uint8Array(16);return crypto_onetimeauth(x,0,m,mpos,n,k),crypto_verify_16(h,hpos,x,0)}function crypto_secretbox(c,m,d,n,k){var i;if(d<32)return-1;for(crypto_stream_xor(c,0,m,0,d,n,k),crypto_onetimeauth(c,16,c,32,d-32,c),i=0;i<16;i++)c[i]=0;return 0}function crypto_secretbox_open(m,c,d,n,k){var i,x=new Uint8Array(32);if(d<32)return-1;if(crypto_stream(x,0,32,n,k),0!==crypto_onetimeauth_verify(c,16,c,32,d-32,x))return-1;for(crypto_stream_xor(m,0,c,0,d,n,k),i=0;i<32;i++)m[i]=0;return 0}function set25519(r,a){var i;for(i=0;i<16;i++)r[i]=0|a[i]}function car25519(o){var i,v,c=1;for(i=0;i<16;i++)v=o[i]+c+65535,c=Math.floor(v/65536),o[i]=v-65536*c;o[0]+=c-1+37*(c-1)}function sel25519(p,q,b){for(var t,c=~(b-1),i=0;i<16;i++)t=c&(p[i]^q[i]),p[i]^=t,q[i]^=t}function pack25519(o,n){var i,j,b,m=gf(),t=gf();for(i=0;i<16;i++)t[i]=n[i];for(car25519(t),car25519(t),car25519(t),j=0;j<2;j++){for(m[0]=t[0]-65517,i=1;i<15;i++)m[i]=t[i]-65535-(m[i-1]>>16&1),m[i-1]&=65535;m[15]=t[15]-32767-(m[14]>>16&1),b=m[15]>>16&1,m[14]&=65535,sel25519(t,m,1-b)}for(i=0;i<16;i++)o[2*i]=255&t[i],o[2*i+1]=t[i]>>8}function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);return pack25519(c,a),pack25519(d,b),crypto_verify_32(c,0,d,0)}function par25519(a){var d=new Uint8Array(32);return pack25519(d,a),1&d[0]}function unpack25519(o,n){var i;for(i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=32767}function A(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]+b[i]}function Z(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]-b[i]}function M(o,a,b){var v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];t0+=(v=a[0])*b0,t1+=v*b1,t2+=v*b2,t3+=v*b3,t4+=v*b4,t5+=v*b5,t6+=v*b6,t7+=v*b7,t8+=v*b8,t9+=v*b9,t10+=v*b10,t11+=v*b11,t12+=v*b12,t13+=v*b13,t14+=v*b14,t15+=v*b15,t1+=(v=a[1])*b0,t2+=v*b1,t3+=v*b2,t4+=v*b3,t5+=v*b4,t6+=v*b5,t7+=v*b6,t8+=v*b7,t9+=v*b8,t10+=v*b9,t11+=v*b10,t12+=v*b11,t13+=v*b12,t14+=v*b13,t15+=v*b14,t16+=v*b15,t2+=(v=a[2])*b0,t3+=v*b1,t4+=v*b2,t5+=v*b3,t6+=v*b4,t7+=v*b5,t8+=v*b6,t9+=v*b7,t10+=v*b8,t11+=v*b9,t12+=v*b10,t13+=v*b11,t14+=v*b12,t15+=v*b13,t16+=v*b14,t17+=v*b15,t3+=(v=a[3])*b0,t4+=v*b1,t5+=v*b2,t6+=v*b3,t7+=v*b4,t8+=v*b5,t9+=v*b6,t10+=v*b7,t11+=v*b8,t12+=v*b9,t13+=v*b10,t14+=v*b11,t15+=v*b12,t16+=v*b13,t17+=v*b14,t18+=v*b15,t4+=(v=a[4])*b0,t5+=v*b1,t6+=v*b2,t7+=v*b3,t8+=v*b4,t9+=v*b5,t10+=v*b6,t11+=v*b7,t12+=v*b8,t13+=v*b9,t14+=v*b10,t15+=v*b11,t16+=v*b12,t17+=v*b13,t18+=v*b14,t19+=v*b15,t5+=(v=a[5])*b0,t6+=v*b1,t7+=v*b2,t8+=v*b3,t9+=v*b4,t10+=v*b5,t11+=v*b6,t12+=v*b7,t13+=v*b8,t14+=v*b9,t15+=v*b10,t16+=v*b11,t17+=v*b12,t18+=v*b13,t19+=v*b14,t20+=v*b15,t6+=(v=a[6])*b0,t7+=v*b1,t8+=v*b2,t9+=v*b3,t10+=v*b4,t11+=v*b5,t12+=v*b6,t13+=v*b7,t14+=v*b8,t15+=v*b9,t16+=v*b10,t17+=v*b11,t18+=v*b12,t19+=v*b13,t20+=v*b14,t21+=v*b15,t7+=(v=a[7])*b0,t8+=v*b1,t9+=v*b2,t10+=v*b3,t11+=v*b4,t12+=v*b5,t13+=v*b6,t14+=v*b7,t15+=v*b8,t16+=v*b9,t17+=v*b10,t18+=v*b11,t19+=v*b12,t20+=v*b13,t21+=v*b14,t22+=v*b15,t8+=(v=a[8])*b0,t9+=v*b1,t10+=v*b2,t11+=v*b3,t12+=v*b4,t13+=v*b5,t14+=v*b6,t15+=v*b7,t16+=v*b8,t17+=v*b9,t18+=v*b10,t19+=v*b11,t20+=v*b12,t21+=v*b13,t22+=v*b14,t23+=v*b15,t9+=(v=a[9])*b0,t10+=v*b1,t11+=v*b2,t12+=v*b3,t13+=v*b4,t14+=v*b5,t15+=v*b6,t16+=v*b7,t17+=v*b8,t18+=v*b9,t19+=v*b10,t20+=v*b11,t21+=v*b12,t22+=v*b13,t23+=v*b14,t24+=v*b15,t10+=(v=a[10])*b0,t11+=v*b1,t12+=v*b2,t13+=v*b3,t14+=v*b4,t15+=v*b5,t16+=v*b6,t17+=v*b7,t18+=v*b8,t19+=v*b9,t20+=v*b10,t21+=v*b11,t22+=v*b12,t23+=v*b13,t24+=v*b14,t25+=v*b15,t11+=(v=a[11])*b0,t12+=v*b1,t13+=v*b2,t14+=v*b3,t15+=v*b4,t16+=v*b5,t17+=v*b6,t18+=v*b7,t19+=v*b8,t20+=v*b9,t21+=v*b10,t22+=v*b11,t23+=v*b12,t24+=v*b13,t25+=v*b14,t26+=v*b15,t12+=(v=a[12])*b0,t13+=v*b1,t14+=v*b2,t15+=v*b3,t16+=v*b4,t17+=v*b5,t18+=v*b6,t19+=v*b7,t20+=v*b8,t21+=v*b9,t22+=v*b10,t23+=v*b11,t24+=v*b12,t25+=v*b13,t26+=v*b14,t27+=v*b15,t13+=(v=a[13])*b0,t14+=v*b1,t15+=v*b2,t16+=v*b3,t17+=v*b4,t18+=v*b5,t19+=v*b6,t20+=v*b7,t21+=v*b8,t22+=v*b9,t23+=v*b10,t24+=v*b11,t25+=v*b12,t26+=v*b13,t27+=v*b14,t28+=v*b15,t14+=(v=a[14])*b0,t15+=v*b1,t16+=v*b2,t17+=v*b3,t18+=v*b4,t19+=v*b5,t20+=v*b6,t21+=v*b7,t22+=v*b8,t23+=v*b9,t24+=v*b10,t25+=v*b11,t26+=v*b12,t27+=v*b13,t28+=v*b14,t29+=v*b15,t15+=(v=a[15])*b0,t1+=38*(t17+=v*b2),t2+=38*(t18+=v*b3),t3+=38*(t19+=v*b4),t4+=38*(t20+=v*b5),t5+=38*(t21+=v*b6),t6+=38*(t22+=v*b7),t7+=38*(t23+=v*b8),t8+=38*(t24+=v*b9),t9+=38*(t25+=v*b10),t10+=38*(t26+=v*b11),t11+=38*(t27+=v*b12),t12+=38*(t28+=v*b13),t13+=38*(t29+=v*b14),t14+=38*(t30+=v*b15),t0=(v=(t0+=38*(t16+=v*b1))+(c=1)+65535)-65536*(c=Math.floor(v/65536)),t1=(v=t1+c+65535)-65536*(c=Math.floor(v/65536)),t2=(v=t2+c+65535)-65536*(c=Math.floor(v/65536)),t3=(v=t3+c+65535)-65536*(c=Math.floor(v/65536)),t4=(v=t4+c+65535)-65536*(c=Math.floor(v/65536)),t5=(v=t5+c+65535)-65536*(c=Math.floor(v/65536)),t6=(v=t6+c+65535)-65536*(c=Math.floor(v/65536)),t7=(v=t7+c+65535)-65536*(c=Math.floor(v/65536)),t8=(v=t8+c+65535)-65536*(c=Math.floor(v/65536)),t9=(v=t9+c+65535)-65536*(c=Math.floor(v/65536)),t10=(v=t10+c+65535)-65536*(c=Math.floor(v/65536)),t11=(v=t11+c+65535)-65536*(c=Math.floor(v/65536)),t12=(v=t12+c+65535)-65536*(c=Math.floor(v/65536)),t13=(v=t13+c+65535)-65536*(c=Math.floor(v/65536)),t14=(v=t14+c+65535)-65536*(c=Math.floor(v/65536)),t15=(v=t15+c+65535)-65536*(c=Math.floor(v/65536)),t0=(v=(t0+=c-1+37*(c-1))+(c=1)+65535)-65536*(c=Math.floor(v/65536)),t1=(v=t1+c+65535)-65536*(c=Math.floor(v/65536)),t2=(v=t2+c+65535)-65536*(c=Math.floor(v/65536)),t3=(v=t3+c+65535)-65536*(c=Math.floor(v/65536)),t4=(v=t4+c+65535)-65536*(c=Math.floor(v/65536)),t5=(v=t5+c+65535)-65536*(c=Math.floor(v/65536)),t6=(v=t6+c+65535)-65536*(c=Math.floor(v/65536)),t7=(v=t7+c+65535)-65536*(c=Math.floor(v/65536)),t8=(v=t8+c+65535)-65536*(c=Math.floor(v/65536)),t9=(v=t9+c+65535)-65536*(c=Math.floor(v/65536)),t10=(v=t10+c+65535)-65536*(c=Math.floor(v/65536)),t11=(v=t11+c+65535)-65536*(c=Math.floor(v/65536)),t12=(v=t12+c+65535)-65536*(c=Math.floor(v/65536)),t13=(v=t13+c+65535)-65536*(c=Math.floor(v/65536)),t14=(v=t14+c+65535)-65536*(c=Math.floor(v/65536)),t15=(v=t15+c+65535)-65536*(c=Math.floor(v/65536)),t0+=c-1+37*(c-1),o[0]=t0,o[1]=t1,o[2]=t2,o[3]=t3,o[4]=t4,o[5]=t5,o[6]=t6,o[7]=t7,o[8]=t8,o[9]=t9,o[10]=t10,o[11]=t11,o[12]=t12,o[13]=t13,o[14]=t14,o[15]=t15}function S(o,a){M(o,a,a)}function inv25519(o,i){var a,c=gf();for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--)S(c,c),2!==a&&4!==a&&M(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}function pow2523(o,i){var a,c=gf();for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--)S(c,c),1!==a&&M(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}function crypto_scalarmult(q,n,p){var r,i,z=new Uint8Array(32),x=new Float64Array(80),a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(i=0;i<31;i++)z[i]=n[i];for(z[31]=127&n[31]|64,z[0]&=248,unpack25519(x,p),i=0;i<16;i++)b[i]=x[i],d[i]=a[i]=c[i]=0;for(a[0]=d[0]=1,i=254;i>=0;--i)sel25519(a,b,r=z[i>>>3]>>>(7&i)&1),sel25519(c,d,r),A(e,a,c),Z(a,a,c),A(c,b,d),Z(b,b,d),S(d,e),S(f,a),M(a,c,a),M(c,b,e),A(e,a,c),Z(a,a,c),S(b,a),Z(c,d,f),M(a,c,_121665),A(a,a,d),M(c,c,a),M(a,d,f),M(d,b,x),S(b,e),sel25519(a,b,r),sel25519(c,d,r);for(i=0;i<16;i++)x[i+16]=a[i],x[i+32]=c[i],x[i+48]=b[i],x[i+64]=d[i];var x32=x.subarray(32),x16=x.subarray(16);return inv25519(x32,x32),M(x16,x16,x32),pack25519(q,x16),0}function crypto_scalarmult_base(q,n){return crypto_scalarmult(q,n,_9)}function crypto_box_keypair(y,x){return randombytes(x,32),crypto_scalarmult_base(y,x)}function crypto_box_beforenm(k,y,x){var s=new Uint8Array(32);return crypto_scalarmult(s,x,y),crypto_core_hsalsa20(k,_0,s,sigma)}poly1305.prototype.blocks=function(m,mpos,bytes){for(var t0,t1,t2,t3,t4,t5,t6,t7,c,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,hibit=this.fin?0:2048,h0=this.h[0],h1=this.h[1],h2=this.h[2],h3=this.h[3],h4=this.h[4],h5=this.h[5],h6=this.h[6],h7=this.h[7],h8=this.h[8],h9=this.h[9],r0=this.r[0],r1=this.r[1],r2=this.r[2],r3=this.r[3],r4=this.r[4],r5=this.r[5],r6=this.r[6],r7=this.r[7],r8=this.r[8],r9=this.r[9];bytes>=16;)d0=c=0,d0+=(h0+=8191&(t0=255&m[mpos+0]|(255&m[mpos+1])<<8))*r0,d0+=(h1+=8191&(t0>>>13|(t1=255&m[mpos+2]|(255&m[mpos+3])<<8)<<3))*(5*r9),d0+=(h2+=8191&(t1>>>10|(t2=255&m[mpos+4]|(255&m[mpos+5])<<8)<<6))*(5*r8),d0+=(h3+=8191&(t2>>>7|(t3=255&m[mpos+6]|(255&m[mpos+7])<<8)<<9))*(5*r7),c=(d0+=(h4+=8191&(t3>>>4|(t4=255&m[mpos+8]|(255&m[mpos+9])<<8)<<12))*(5*r6))>>>13,d0&=8191,d0+=(h5+=t4>>>1&8191)*(5*r5),d0+=(h6+=8191&(t4>>>14|(t5=255&m[mpos+10]|(255&m[mpos+11])<<8)<<2))*(5*r4),d0+=(h7+=8191&(t5>>>11|(t6=255&m[mpos+12]|(255&m[mpos+13])<<8)<<5))*(5*r3),d0+=(h8+=8191&(t6>>>8|(t7=255&m[mpos+14]|(255&m[mpos+15])<<8)<<8))*(5*r2),d1=c+=(d0+=(h9+=t7>>>5|hibit)*(5*r1))>>>13,d1+=h0*r1,d1+=h1*r0,d1+=h2*(5*r9),d1+=h3*(5*r8),c=(d1+=h4*(5*r7))>>>13,d1&=8191,d1+=h5*(5*r6),d1+=h6*(5*r5),d1+=h7*(5*r4),d1+=h8*(5*r3),c+=(d1+=h9*(5*r2))>>>13,d1&=8191,d2=c,d2+=h0*r2,d2+=h1*r1,d2+=h2*r0,d2+=h3*(5*r9),c=(d2+=h4*(5*r8))>>>13,d2&=8191,d2+=h5*(5*r7),d2+=h6*(5*r6),d2+=h7*(5*r5),d2+=h8*(5*r4),d3=c+=(d2+=h9*(5*r3))>>>13,d3+=h0*r3,d3+=h1*r2,d3+=h2*r1,d3+=h3*r0,c=(d3+=h4*(5*r9))>>>13,d3&=8191,d3+=h5*(5*r8),d3+=h6*(5*r7),d3+=h7*(5*r6),d3+=h8*(5*r5),d4=c+=(d3+=h9*(5*r4))>>>13,d4+=h0*r4,d4+=h1*r3,d4+=h2*r2,d4+=h3*r1,c=(d4+=h4*r0)>>>13,d4&=8191,d4+=h5*(5*r9),d4+=h6*(5*r8),d4+=h7*(5*r7),d4+=h8*(5*r6),d5=c+=(d4+=h9*(5*r5))>>>13,d5+=h0*r5,d5+=h1*r4,d5+=h2*r3,d5+=h3*r2,c=(d5+=h4*r1)>>>13,d5&=8191,d5+=h5*r0,d5+=h6*(5*r9),d5+=h7*(5*r8),d5+=h8*(5*r7),d6=c+=(d5+=h9*(5*r6))>>>13,d6+=h0*r6,d6+=h1*r5,d6+=h2*r4,d6+=h3*r3,c=(d6+=h4*r2)>>>13,d6&=8191,d6+=h5*r1,d6+=h6*r0,d6+=h7*(5*r9),d6+=h8*(5*r8),d7=c+=(d6+=h9*(5*r7))>>>13,d7+=h0*r7,d7+=h1*r6,d7+=h2*r5,d7+=h3*r4,c=(d7+=h4*r3)>>>13,d7&=8191,d7+=h5*r2,d7+=h6*r1,d7+=h7*r0,d7+=h8*(5*r9),d8=c+=(d7+=h9*(5*r8))>>>13,d8+=h0*r8,d8+=h1*r7,d8+=h2*r6,d8+=h3*r5,c=(d8+=h4*r4)>>>13,d8&=8191,d8+=h5*r3,d8+=h6*r2,d8+=h7*r1,d8+=h8*r0,d9=c+=(d8+=h9*(5*r9))>>>13,d9+=h0*r9,d9+=h1*r8,d9+=h2*r7,d9+=h3*r6,c=(d9+=h4*r5)>>>13,d9&=8191,d9+=h5*r4,d9+=h6*r3,d9+=h7*r2,d9+=h8*r1,h0=d0=8191&(c=(c=((c+=(d9+=h9*r0)>>>13)<<2)+c|0)+(d0&=8191)|0),h1=d1+=c>>>=13,h2=d2&=8191,h3=d3&=8191,h4=d4&=8191,h5=d5&=8191,h6=d6&=8191,h7=d7&=8191,h8=d8&=8191,h9=d9&=8191,mpos+=16,bytes-=16;this.h[0]=h0,this.h[1]=h1,this.h[2]=h2,this.h[3]=h3,this.h[4]=h4,this.h[5]=h5,this.h[6]=h6,this.h[7]=h7,this.h[8]=h8,this.h[9]=h9},poly1305.prototype.finish=function(mac,macpos){var c,mask,f,i,g=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(c=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=c,c=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*c,c=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=c,c=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=c,g[0]=this.h[0]+5,c=g[0]>>>13,g[0]&=8191,i=1;i<10;i++)g[i]=this.h[i]+c,c=g[i]>>>13,g[i]&=8191;for(g[9]-=8192,mask=(1^c)-1,i=0;i<10;i++)g[i]&=mask;for(mask=~mask,i=0;i<10;i++)this.h[i]=this.h[i]&mask|g[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),f=this.h[0]+this.pad[0],this.h[0]=65535&f,i=1;i<8;i++)f=(this.h[i]+this.pad[i]|0)+(f>>>16)|0,this.h[i]=65535&f;mac[macpos+0]=this.h[0]>>>0&255,mac[macpos+1]=this.h[0]>>>8&255,mac[macpos+2]=this.h[1]>>>0&255,mac[macpos+3]=this.h[1]>>>8&255,mac[macpos+4]=this.h[2]>>>0&255,mac[macpos+5]=this.h[2]>>>8&255,mac[macpos+6]=this.h[3]>>>0&255,mac[macpos+7]=this.h[3]>>>8&255,mac[macpos+8]=this.h[4]>>>0&255,mac[macpos+9]=this.h[4]>>>8&255,mac[macpos+10]=this.h[5]>>>0&255,mac[macpos+11]=this.h[5]>>>8&255,mac[macpos+12]=this.h[6]>>>0&255,mac[macpos+13]=this.h[6]>>>8&255,mac[macpos+14]=this.h[7]>>>0&255,mac[macpos+15]=this.h[7]>>>8&255},poly1305.prototype.update=function(m,mpos,bytes){var i,want;if(this.leftover){for((want=16-this.leftover)>bytes&&(want=bytes),i=0;i<want;i++)this.buffer[this.leftover+i]=m[mpos+i];if(bytes-=want,mpos+=want,this.leftover+=want,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(bytes>=16&&(want=bytes-bytes%16,this.blocks(m,mpos,want),mpos+=want,bytes-=want),bytes){for(i=0;i<bytes;i++)this.buffer[this.leftover+i]=m[mpos+i];this.leftover+=bytes}};var crypto_box_afternm=crypto_secretbox,crypto_box_open_afternm=crypto_secretbox_open;var K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function crypto_hashblocks_hl(hh,hl,m,n){for(var bh0,bh1,bh2,bh3,bh4,bh5,bh6,bh7,bl0,bl1,bl2,bl3,bl4,bl5,bl6,bl7,th,tl,i,j,h,l,a,b,c,d,wh=new Int32Array(16),wl=new Int32Array(16),ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7],pos=0;n>=128;){for(i=0;i<16;i++)j=8*i+pos,wh[i]=m[j+0]<<24|m[j+1]<<16|m[j+2]<<8|m[j+3],wl[i]=m[j+4]<<24|m[j+5]<<16|m[j+6]<<8|m[j+7];for(i=0;i<80;i++)if(bh0=ah0,bh1=ah1,bh2=ah2,bh3=ah3,bh4=ah4,bh5=ah5,bh6=ah6,ah7,bl0=al0,bl1=al1,bl2=al2,bl3=al3,bl4=al4,bl5=al5,bl6=al6,al7,a=65535&(l=al7),b=l>>>16,c=65535&(h=ah7),d=h>>>16,a+=65535&(l=(al4>>>14|ah4<<18)^(al4>>>18|ah4<<14)^(ah4>>>9|al4<<23)),b+=l>>>16,c+=65535&(h=(ah4>>>14|al4<<18)^(ah4>>>18|al4<<14)^(al4>>>9|ah4<<23)),d+=h>>>16,a+=65535&(l=al4&al5^~al4&al6),b+=l>>>16,c+=65535&(h=ah4&ah5^~ah4&ah6),d+=h>>>16,a+=65535&(l=K[2*i+1]),b+=l>>>16,c+=65535&(h=K[2*i]),d+=h>>>16,h=wh[i%16],b+=(l=wl[i%16])>>>16,c+=65535&h,d+=h>>>16,c+=(b+=(a+=65535&l)>>>16)>>>16,a=65535&(l=tl=65535&a|b<<16),b=l>>>16,c=65535&(h=th=65535&c|(d+=c>>>16)<<16),d=h>>>16,a+=65535&(l=(al0>>>28|ah0<<4)^(ah0>>>2|al0<<30)^(ah0>>>7|al0<<25)),b+=l>>>16,c+=65535&(h=(ah0>>>28|al0<<4)^(al0>>>2|ah0<<30)^(al0>>>7|ah0<<25)),d+=h>>>16,b+=(l=al0&al1^al0&al2^al1&al2)>>>16,c+=65535&(h=ah0&ah1^ah0&ah2^ah1&ah2),d+=h>>>16,bh7=65535&(c+=(b+=(a+=65535&l)>>>16)>>>16)|(d+=c>>>16)<<16,bl7=65535&a|b<<16,a=65535&(l=bl3),b=l>>>16,c=65535&(h=bh3),d=h>>>16,b+=(l=tl)>>>16,c+=65535&(h=th),d+=h>>>16,ah1=bh0,ah2=bh1,ah3=bh2,ah4=bh3=65535&(c+=(b+=(a+=65535&l)>>>16)>>>16)|(d+=c>>>16)<<16,ah5=bh4,ah6=bh5,ah7=bh6,ah0=bh7,al1=bl0,al2=bl1,al3=bl2,al4=bl3=65535&a|b<<16,al5=bl4,al6=bl5,al7=bl6,al0=bl7,i%16==15)for(j=0;j<16;j++)h=wh[j],a=65535&(l=wl[j]),b=l>>>16,c=65535&h,d=h>>>16,h=wh[(j+9)%16],a+=65535&(l=wl[(j+9)%16]),b+=l>>>16,c+=65535&h,d+=h>>>16,th=wh[(j+1)%16],a+=65535&(l=((tl=wl[(j+1)%16])>>>1|th<<31)^(tl>>>8|th<<24)^(tl>>>7|th<<25)),b+=l>>>16,c+=65535&(h=(th>>>1|tl<<31)^(th>>>8|tl<<24)^th>>>7),d+=h>>>16,th=wh[(j+14)%16],b+=(l=((tl=wl[(j+14)%16])>>>19|th<<13)^(th>>>29|tl<<3)^(tl>>>6|th<<26))>>>16,c+=65535&(h=(th>>>19|tl<<13)^(tl>>>29|th<<3)^th>>>6),d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,wh[j]=65535&c|d<<16,wl[j]=65535&a|b<<16;a=65535&(l=al0),b=l>>>16,c=65535&(h=ah0),d=h>>>16,h=hh[0],b+=(l=hl[0])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[0]=ah0=65535&c|d<<16,hl[0]=al0=65535&a|b<<16,a=65535&(l=al1),b=l>>>16,c=65535&(h=ah1),d=h>>>16,h=hh[1],b+=(l=hl[1])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[1]=ah1=65535&c|d<<16,hl[1]=al1=65535&a|b<<16,a=65535&(l=al2),b=l>>>16,c=65535&(h=ah2),d=h>>>16,h=hh[2],b+=(l=hl[2])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[2]=ah2=65535&c|d<<16,hl[2]=al2=65535&a|b<<16,a=65535&(l=al3),b=l>>>16,c=65535&(h=ah3),d=h>>>16,h=hh[3],b+=(l=hl[3])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[3]=ah3=65535&c|d<<16,hl[3]=al3=65535&a|b<<16,a=65535&(l=al4),b=l>>>16,c=65535&(h=ah4),d=h>>>16,h=hh[4],b+=(l=hl[4])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[4]=ah4=65535&c|d<<16,hl[4]=al4=65535&a|b<<16,a=65535&(l=al5),b=l>>>16,c=65535&(h=ah5),d=h>>>16,h=hh[5],b+=(l=hl[5])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[5]=ah5=65535&c|d<<16,hl[5]=al5=65535&a|b<<16,a=65535&(l=al6),b=l>>>16,c=65535&(h=ah6),d=h>>>16,h=hh[6],b+=(l=hl[6])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[6]=ah6=65535&c|d<<16,hl[6]=al6=65535&a|b<<16,a=65535&(l=al7),b=l>>>16,c=65535&(h=ah7),d=h>>>16,h=hh[7],b+=(l=hl[7])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[7]=ah7=65535&c|d<<16,hl[7]=al7=65535&a|b<<16,pos+=128,n-=128}return n}function crypto_hash(out,m,n){var i,hh=new Int32Array(8),hl=new Int32Array(8),x=new Uint8Array(256),b=n;for(hh[0]=1779033703,hh[1]=3144134277,hh[2]=1013904242,hh[3]=2773480762,hh[4]=1359893119,hh[5]=2600822924,hh[6]=528734635,hh[7]=1541459225,hl[0]=4089235720,hl[1]=2227873595,hl[2]=4271175723,hl[3]=1595750129,hl[4]=2917565137,hl[5]=725511199,hl[6]=4215389547,hl[7]=327033209,crypto_hashblocks_hl(hh,hl,m,n),n%=128,i=0;i<n;i++)x[i]=m[b-n+i];for(x[n]=128,x[(n=256-128*(n<112?1:0))-9]=0,ts64(x,n-8,b/536870912|0,b<<3),crypto_hashblocks_hl(hh,hl,x,n),i=0;i<8;i++)ts64(out,8*i,hh[i],hl[i]);return 0}function add(p,q){var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();Z(a,p[1],p[0]),Z(t,q[1],q[0]),M(a,a,t),A(b,p[0],p[1]),A(t,q[0],q[1]),M(b,b,t),M(c,p[3],q[3]),M(c,c,D2),M(d,p[2],q[2]),A(d,d,d),Z(e,b,a),Z(f,d,c),A(g,d,c),A(h,b,a),M(p[0],e,f),M(p[1],h,g),M(p[2],g,f),M(p[3],e,h)}function cswap(p,q,b){var i;for(i=0;i<4;i++)sel25519(p[i],q[i],b)}function pack(r,p){var tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]),M(tx,p[0],zi),M(ty,p[1],zi),pack25519(r,ty),r[31]^=par25519(tx)<<7}function scalarmult(p,q,s){var b,i;for(set25519(p[0],gf0),set25519(p[1],gf1),set25519(p[2],gf1),set25519(p[3],gf0),i=255;i>=0;--i)cswap(p,q,b=s[i/8|0]>>(7&i)&1),add(q,p),add(p,p),cswap(p,q,b)}function scalarbase(p,s){var q=[gf(),gf(),gf(),gf()];set25519(q[0],X),set25519(q[1],Y),set25519(q[2],gf1),M(q[3],X,Y),scalarmult(p,q,s)}function crypto_sign_keypair(pk,sk,seeded){var i,d=new Uint8Array(64),p=[gf(),gf(),gf(),gf()];for(seeded||randombytes(sk,32),crypto_hash(d,sk,32),d[0]&=248,d[31]&=127,d[31]|=64,scalarbase(p,d),pack(pk,p),i=0;i<32;i++)sk[i+32]=pk[i];return 0}var L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(r,x){var carry,i,j,k;for(i=63;i>=32;--i){for(carry=0,j=i-32,k=i-12;j<k;++j)x[j]+=carry-16*x[i]*L[j-(i-32)],carry=Math.floor((x[j]+128)/256),x[j]-=256*carry;x[j]+=carry,x[i]=0}for(carry=0,j=0;j<32;j++)x[j]+=carry-(x[31]>>4)*L[j],carry=x[j]>>8,x[j]&=255;for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++)x[i+1]+=x[i]>>8,r[i]=255&x[i]}function reduce(r){var i,x=new Float64Array(64);for(i=0;i<64;i++)x[i]=r[i];for(i=0;i<64;i++)r[i]=0;modL(r,x)}function crypto_sign(sm,m,n,sk){var i,j,d=new Uint8Array(64),h=new Uint8Array(64),r=new Uint8Array(64),x=new Float64Array(64),p=[gf(),gf(),gf(),gf()];crypto_hash(d,sk,32),d[0]&=248,d[31]&=127,d[31]|=64;var smlen=n+64;for(i=0;i<n;i++)sm[64+i]=m[i];for(i=0;i<32;i++)sm[32+i]=d[32+i];for(crypto_hash(r,sm.subarray(32),n+32),reduce(r),scalarbase(p,r),pack(sm,p),i=32;i<64;i++)sm[i]=sk[i];for(crypto_hash(h,sm,n+64),reduce(h),i=0;i<64;i++)x[i]=0;for(i=0;i<32;i++)x[i]=r[i];for(i=0;i<32;i++)for(j=0;j<32;j++)x[i+j]+=h[i]*d[j];return modL(sm.subarray(32),x),smlen}function crypto_sign_open(m,sm,n,pk){var i,t=new Uint8Array(32),h=new Uint8Array(64),p=[gf(),gf(),gf(),gf()],q=[gf(),gf(),gf(),gf()];if(n<64)return-1;if(function unpackneg(r,p){var t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();return set25519(r[2],gf1),unpack25519(r[1],p),S(num,r[1]),M(den,num,D),Z(num,num,r[2]),A(den,r[2],den),S(den2,den),S(den4,den2),M(den6,den4,den2),M(t,den6,num),M(t,t,den),pow2523(t,t),M(t,t,num),M(t,t,den),M(t,t,den),M(r[0],t,den),S(chk,r[0]),M(chk,chk,den),neq25519(chk,num)&&M(r[0],r[0],I),S(chk,r[0]),M(chk,chk,den),neq25519(chk,num)?-1:(par25519(r[0])===p[31]>>7&&Z(r[0],gf0,r[0]),M(r[3],r[0],r[1]),0)}(q,pk))return-1;for(i=0;i<n;i++)m[i]=sm[i];for(i=0;i<32;i++)m[i+32]=pk[i];if(crypto_hash(h,m,n),reduce(h),scalarmult(p,q,h),scalarbase(q,sm.subarray(32)),add(p,q),pack(t,p),n-=64,crypto_verify_32(sm,0,t,0)){for(i=0;i<n;i++)m[i]=0;return-1}for(i=0;i<n;i++)m[i]=sm[i+64];return n}function checkLengths(k,n){if(32!==k.length)throw new Error("bad key size");if(24!==n.length)throw new Error("bad nonce size")}function checkArrayTypes(){for(var i=0;i<arguments.length;i++)if(!(arguments[i]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function cleanup(arr){for(var i=0;i<arr.length;i++)arr[i]=0}nacl.lowlevel={crypto_core_hsalsa20,crypto_stream_xor,crypto_stream,crypto_stream_salsa20_xor,crypto_stream_salsa20,crypto_onetimeauth,crypto_onetimeauth_verify,crypto_verify_16,crypto_verify_32,crypto_secretbox,crypto_secretbox_open,crypto_scalarmult,crypto_scalarmult_base,crypto_box_beforenm,crypto_box_afternm,crypto_box:function crypto_box(c,m,d,n,y,x){var k=new Uint8Array(32);return crypto_box_beforenm(k,y,x),crypto_box_afternm(c,m,d,n,k)},crypto_box_open:function crypto_box_open(m,c,d,n,y,x){var k=new Uint8Array(32);return crypto_box_beforenm(k,y,x),crypto_box_open_afternm(m,c,d,n,k)},crypto_box_keypair,crypto_hash,crypto_sign,crypto_sign_keypair,crypto_sign_open,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf,D,L,pack25519,unpack25519,M,A,S,Z,pow2523,add,set25519,modL,scalarmult,scalarbase},nacl.randomBytes=function(n){var b=new Uint8Array(n);return randombytes(b,n),b},nacl.secretbox=function(msg,nonce,key){checkArrayTypes(msg,nonce,key),checkLengths(key,nonce);for(var m=new Uint8Array(32+msg.length),c=new Uint8Array(m.length),i=0;i<msg.length;i++)m[i+32]=msg[i];return crypto_secretbox(c,m,m.length,nonce,key),c.subarray(16)},nacl.secretbox.open=function(box,nonce,key){checkArrayTypes(box,nonce,key),checkLengths(key,nonce);for(var c=new Uint8Array(16+box.length),m=new Uint8Array(c.length),i=0;i<box.length;i++)c[i+16]=box[i];return c.length<32||0!==crypto_secretbox_open(m,c,c.length,nonce,key)?null:m.subarray(32)},nacl.secretbox.keyLength=32,nacl.secretbox.nonceLength=24,nacl.secretbox.overheadLength=16,nacl.scalarMult=function(n,p){if(checkArrayTypes(n,p),32!==n.length)throw new Error("bad n size");if(32!==p.length)throw new Error("bad p size");var q=new Uint8Array(32);return crypto_scalarmult(q,n,p),q},nacl.scalarMult.base=function(n){if(checkArrayTypes(n),32!==n.length)throw new Error("bad n size");var q=new Uint8Array(32);return crypto_scalarmult_base(q,n),q},nacl.scalarMult.scalarLength=32,nacl.scalarMult.groupElementLength=32,nacl.box=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox(msg,nonce,k)},nacl.box.before=function(publicKey,secretKey){checkArrayTypes(publicKey,secretKey),function checkBoxLengths(pk,sk){if(32!==pk.length)throw new Error("bad public key size");if(32!==sk.length)throw new Error("bad secret key size")}(publicKey,secretKey);var k=new Uint8Array(32);return crypto_box_beforenm(k,publicKey,secretKey),k},nacl.box.after=nacl.secretbox,nacl.box.open=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox.open(msg,nonce,k)},nacl.box.open.after=nacl.secretbox.open,nacl.box.keyPair=function(){var pk=new Uint8Array(32),sk=new Uint8Array(32);return crypto_box_keypair(pk,sk),{publicKey:pk,secretKey:sk}},nacl.box.keyPair.fromSecretKey=function(secretKey){if(checkArrayTypes(secretKey),32!==secretKey.length)throw new Error("bad secret key size");var pk=new Uint8Array(32);return crypto_scalarmult_base(pk,secretKey),{publicKey:pk,secretKey:new Uint8Array(secretKey)}},nacl.box.publicKeyLength=32,nacl.box.secretKeyLength=32,nacl.box.sharedKeyLength=32,nacl.box.nonceLength=24,nacl.box.overheadLength=nacl.secretbox.overheadLength,nacl.sign=function(msg,secretKey){if(checkArrayTypes(msg,secretKey),64!==secretKey.length)throw new Error("bad secret key size");var signedMsg=new Uint8Array(64+msg.length);return crypto_sign(signedMsg,msg,msg.length,secretKey),signedMsg},nacl.sign.open=function(signedMsg,publicKey){if(checkArrayTypes(signedMsg,publicKey),32!==publicKey.length)throw new Error("bad public key size");var tmp=new Uint8Array(signedMsg.length),mlen=crypto_sign_open(tmp,signedMsg,signedMsg.length,publicKey);if(mlen<0)return null;for(var m=new Uint8Array(mlen),i=0;i<m.length;i++)m[i]=tmp[i];return m},nacl.sign.detached=function(msg,secretKey){for(var signedMsg=nacl.sign(msg,secretKey),sig=new Uint8Array(64),i=0;i<sig.length;i++)sig[i]=signedMsg[i];return sig},nacl.sign.detached.verify=function(msg,sig,publicKey){if(checkArrayTypes(msg,sig,publicKey),64!==sig.length)throw new Error("bad signature size");if(32!==publicKey.length)throw new Error("bad public key size");var i,sm=new Uint8Array(64+msg.length),m=new Uint8Array(64+msg.length);for(i=0;i<64;i++)sm[i]=sig[i];for(i=0;i<msg.length;i++)sm[i+64]=msg[i];return crypto_sign_open(m,sm,sm.length,publicKey)>=0},nacl.sign.keyPair=function(){var pk=new Uint8Array(32),sk=new Uint8Array(64);return crypto_sign_keypair(pk,sk),{publicKey:pk,secretKey:sk}},nacl.sign.keyPair.fromSecretKey=function(secretKey){if(checkArrayTypes(secretKey),64!==secretKey.length)throw new Error("bad secret key size");for(var pk=new Uint8Array(32),i=0;i<pk.length;i++)pk[i]=secretKey[32+i];return{publicKey:pk,secretKey:new Uint8Array(secretKey)}},nacl.sign.keyPair.fromSeed=function(seed){if(checkArrayTypes(seed),32!==seed.length)throw new Error("bad seed size");for(var pk=new Uint8Array(32),sk=new Uint8Array(64),i=0;i<32;i++)sk[i]=seed[i];return crypto_sign_keypair(pk,sk,!0),{publicKey:pk,secretKey:sk}},nacl.sign.publicKeyLength=32,nacl.sign.secretKeyLength=64,nacl.sign.seedLength=32,nacl.sign.signatureLength=64,nacl.hash=function(msg){checkArrayTypes(msg);var h=new Uint8Array(64);return crypto_hash(h,msg,msg.length),h},nacl.hash.hashLength=64,nacl.verify=function(x,y){return checkArrayTypes(x,y),0!==x.length&&0!==y.length&&(x.length===y.length&&0===vn(x,0,y,0,x.length))},nacl.setPRNG=function(fn){randombytes=fn},function(){var crypto="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(crypto&&crypto.getRandomValues){nacl.setPRNG(function(x,n){var i,v=new Uint8Array(n);for(i=0;i<n;i+=65536)crypto.getRandomValues(v.subarray(i,i+Math.min(n-i,65536)));for(i=0;i<n;i++)x[i]=v[i];cleanup(v)})}else(crypto=__webpack_require__("?dba7"))&&crypto.randomBytes&&nacl.setPRNG(function(x,n){var i,v=crypto.randomBytes(n);for(i=0;i<n;i++)x[i]=v[i];cleanup(v)})}()}(module.exports?module.exports:self.nacl=self.nacl||{})},"./node_modules/uuid4/browser.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,uuid4:()=>uuid4,valid:()=>valid});const uuidPattern=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function valid(uuid){return uuidPattern.test(uuid)}function uuid4(){var temp_url=URL.createObjectURL(new Blob),uuid=temp_url.toString();return URL.revokeObjectURL(temp_url),uuid.split(/[:\/]/g).pop().toLowerCase()}uuid4.valid=valid;const __WEBPACK_DEFAULT_EXPORT__=uuid4},"./node_modules/zustand/esm/react.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>create});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const createStoreImpl=createState=>{let state;const listeners=new Set,setState=(partial,replace)=>{const nextState="function"==typeof partial?partial(state):partial;if(!Object.is(nextState,state)){const previousState=state;state=(null!=replace?replace:"object"!=typeof nextState||null===nextState)?nextState:Object.assign({},state,nextState),listeners.forEach(listener=>listener(state,previousState))}},getState=()=>state,api={setState,getState,getInitialState:()=>initialState,subscribe:listener=>(listeners.add(listener),()=>listeners.delete(listener))},initialState=state=createState(setState,getState,api);return api},identity=arg=>arg;const createImpl=createState=>{const api=(createState=>createState?createStoreImpl(createState):createStoreImpl)(createState),useBoundStore=selector=>function useStore(api,selector=identity){const slice=react.useSyncExternalStore(api.subscribe,react.useCallback(()=>selector(api.getState()),[api,selector]),react.useCallback(()=>selector(api.getInitialState()),[api,selector]));return react.useDebugValue(slice),slice}(api,selector);return Object.assign(useBoundStore,api),useBoundStore},create=createState=>createState?createImpl(createState):createImpl}}]);
//# sourceMappingURL=7759.e7e50320.iframe.bundle.js.map