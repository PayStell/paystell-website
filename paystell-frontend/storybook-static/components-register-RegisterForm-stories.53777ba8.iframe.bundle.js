"use strict";(self.webpackChunkpaystell_frontend=self.webpackChunkpaystell_frontend||[]).push([[1549],{"./src/components/register/FormField.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_components_ui_input__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./src/components/ui/input.tsx")),_components_ui_label__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/label.tsx");const FormField=({id,label,placeholder,type="text",register,error})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_3__.J,{htmlFor:id,className:"font-medium",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{id,type,placeholder,...register}),error&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-red-500 text-sm mt-1",children:error})]}),__WEBPACK_DEFAULT_EXPORT__=FormField;FormField.__docgenInfo={description:"",methods:[],displayName:"FormField",props:{id:{required:!0,tsType:{name:"string"},description:""},label:{required:!0,tsType:{name:"string"},description:""},placeholder:{required:!0,tsType:{name:"string"},description:""},type:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'text'",computed:!1}},register:{required:!0,tsType:{name:"UseFormRegisterReturn"},description:""},error:{required:!1,tsType:{name:"string"},description:""}}}},"./src/components/register/ProfileImageUpload.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_barrel_optimize_names_MdCloudUpload_react_icons_md__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("__barrel_optimize__?names=MdCheckCircle!=!./node_modules/react-icons/md/index.mjs")),next_image__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.mjs");const ProfileImageUpload=({previewImage,onImageUpload})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_3__.A,{src:previewImage||"/default-profile.png",alt:"Profile Preview",width:160,height:160,className:"rounded-full mb-4 object-cover border aspect-square"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",className:"absolute bottom-2 right-1/2 translate-x-1/2 bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition hover:scale-110",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_MdCloudUpload_react_icons_md__WEBPACK_IMPORTED_MODULE_2__.E10,{className:"w-5 h-5"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"file",accept:"image/*",className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer",onChange:e=>{var _e_target_files;return onImageUpload((null===(_e_target_files=e.target.files)||void 0===_e_target_files?void 0:_e_target_files[0])||null)}})]}),__WEBPACK_DEFAULT_EXPORT__=ProfileImageUpload;ProfileImageUpload.__docgenInfo={description:"",methods:[],displayName:"ProfileImageUpload",props:{previewImage:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},onImageUpload:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File | null) => void",signature:{arguments:[{type:{name:"union",raw:"File | null",elements:[{name:"File"},{name:"null"}]},name:"file"}],return:{name:"void"}}},description:""}}}},"./src/components/register/RegisterForm.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>RegisterForm_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),ProfileImageUpload=__webpack_require__("./src/components/register/ProfileImageUpload.tsx"),FormField=__webpack_require__("./src/components/register/FormField.tsx"),SubmitButton=__webpack_require__("./src/components/register/SubmitButton.tsx"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),card=__webpack_require__("./src/components/ui/card.tsx"),dist=__webpack_require__("./node_modules/@radix-ui/react-dialog/dist/index.mjs"),user=__webpack_require__("./src/lib/types/user.ts"),label=__webpack_require__("./src/components/ui/label.tsx"),AuthProvider=__webpack_require__("./src/providers/AuthProvider.tsx"),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs"),console=__webpack_require__("./node_modules/console-browserify/index.js");const RegisterForm=()=>{var _errors_businessName,_errors_email,_errors_password,_errors_confirmPassword;const{register,handleSubmit,setValue,watch,formState:{errors}}=(0,index_esm.mN)({defaultValues:{role:user.gG.USER,email:""}}),{register:registerUser}=(0,AuthProvider.A)(),router=(0,navigation.useRouter)(),[previewImage,setPreviewImage]=(0,react.useState)("/default-image.jpg"),[dialogState,setDialogState]=(0,react.useState)({open:!1,title:"",description:""}),[isSubmitting,setIsSubmitting]=(0,react.useState)(!1),currentRole=watch("role");return(0,jsx_runtime.jsxs)(card.Zp,{className:"w-full max-w-lg p-6 shadow-lg rounded-lg","aria-live":"polite",children:[(0,jsx_runtime.jsx)(card.aR,{children:(0,jsx_runtime.jsx)(card.ZB,{className:"text-center text-2xl font-bold mb-4",children:"Complete Your Registration"})}),(0,jsx_runtime.jsxs)(card.Wu,{children:[(0,jsx_runtime.jsxs)("form",{onSubmit:handleSubmit(async data=>{if(data.password===data.confirmPassword)try{setIsSubmitting(!0),await registerUser(data.businessName,data.email,data.password,data.role),setDialogState({open:!0,title:"Registration Successful",description:"Your registration has been completed successfully."}),setTimeout(()=>{router.push("/dashboard")},2e3)}catch(error){console.error("Registration error:",error),setDialogState({open:!0,title:"Registration Failed",description:"There was an error during registration. Please try again."})}finally{setIsSubmitting(!1)}else setDialogState({open:!0,title:"Password Mismatch",description:"The passwords do not match. Please try again."})}),className:"space-y-4",noValidate:!0,children:[(0,jsx_runtime.jsx)(ProfileImageUpload.A,{previewImage,onImageUpload:file=>{if(file){const reader=new FileReader;reader.onloadend=()=>{setPreviewImage(reader.result)},reader.readAsDataURL(file)}else setPreviewImage("/default-profile.png")}}),(0,jsx_runtime.jsx)(FormField.A,{id:"businessName",label:"Name",placeholder:"Name",register:register("businessName",{required:"Name is required"}),error:null===(_errors_businessName=errors.businessName)||void 0===_errors_businessName?void 0:_errors_businessName.message}),(0,jsx_runtime.jsx)(FormField.A,{id:"email",label:"Email",placeholder:"Enter your email",type:"email",register:register("email",{required:"Email is required",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Invalid email format"}}),error:null===(_errors_email=errors.email)||void 0===_errors_email?void 0:_errors_email.message}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"role",children:"Account Type"}),(0,jsx_runtime.jsxs)("select",{id:"role",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:currentRole,onChange:e=>{return value=e.target.value,void setValue("role",value);var value},children:[(0,jsx_runtime.jsx)("option",{value:user.gG.USER,children:"User"}),(0,jsx_runtime.jsx)("option",{value:user.gG.MERCHANT,children:"Merchant"})]})]}),(0,jsx_runtime.jsx)(FormField.A,{id:"password",type:"password",label:"Password",placeholder:"Enter your password",register:register("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),error:null===(_errors_password=errors.password)||void 0===_errors_password?void 0:_errors_password.message}),(0,jsx_runtime.jsx)(FormField.A,{id:"confirmPassword",type:"password",label:"Confirm Password",placeholder:"Confirm your password",register:register("confirmPassword",{required:"Please confirm your password"}),error:null===(_errors_confirmPassword=errors.confirmPassword)||void 0===_errors_confirmPassword?void 0:_errors_confirmPassword.message}),(0,jsx_runtime.jsx)(SubmitButton.A,{label:isSubmitting?"Registering...":"Register",disabled:isSubmitting})]}),(0,jsx_runtime.jsx)(dist.bL,{open:dialogState.open,onOpenChange:open=>setDialogState({...dialogState,open}),children:(0,jsx_runtime.jsxs)(dist.ZL,{children:[(0,jsx_runtime.jsx)(dist.hJ,{className:"fixed inset-0 bg-black/50"}),(0,jsx_runtime.jsxs)(dist.UC,{className:"fixed bg-white rounded-lg shadow-lg p-6 w-full max-w-sm top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:[(0,jsx_runtime.jsx)(dist.hE,{className:"text-xl font-bold mb-4",children:dialogState.title}),(0,jsx_runtime.jsx)(dist.VY,{className:"text-gray-700 mb-4",children:dialogState.description}),(0,jsx_runtime.jsx)("button",{className:"w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",onClick:()=>setDialogState({...dialogState,open:!1}),children:"Close"})]})]})})]})]})},register_RegisterForm=RegisterForm;RegisterForm.__docgenInfo={description:"",methods:[],displayName:"RegisterForm"};const RegisterForm_stories={title:"Components/RegisterForm",component:register_RegisterForm},Default=(args=>(0,jsx_runtime.jsx)(register_RegisterForm,{...args})).bind({});Default.args={};const __namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <RegisterForm {...args} />",...Default.parameters?.docs?.source}}}},"./src/components/register/SubmitButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_components_ui_button__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/ui/button.tsx");const SubmitButton=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({label,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.$,{ref,...props,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:label}));SubmitButton.displayName="SubmitButton";const __WEBPACK_DEFAULT_EXPORT__=SubmitButton;SubmitButton.__docgenInfo={description:"",methods:[],displayName:"SubmitButton",props:{label:{required:!0,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}}},"./src/components/ui/button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>Button,r:()=>buttonVariants});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),class_variance_authority__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/utils.ts");const buttonVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_3__.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 my-1",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border  border-border bg-transparent text-foreground shadow-sm hover:bg-secondary hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",xl:"h-12 rounded-md px-10",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Button=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,variant,size,asChild=!1,...props},ref)=>{const Comp=asChild?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_2__.DX:"button";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Comp,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(buttonVariants({variant,size,className})),ref,...props})});Button.displayName="Button",Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{asChild:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}},composes:["VariantProps"]}},"./src/components/ui/card.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BT:()=>CardDescription,Wu:()=>CardContent,ZB:()=>CardTitle,Zp:()=>Card,aR:()=>CardHeader,wL:()=>CardFooter});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/utils.ts");const Card=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("rounded-xl bg-card shadow",className),...props}));Card.displayName="Card";const CardHeader=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex flex-col space-y-1.5 p-6",className),...props}));CardHeader.displayName="CardHeader";const CardTitle=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("font-semibold leading-none tracking-tight text-foreground",className),...props}));CardTitle.displayName="CardTitle";const CardDescription=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("text-sm text-card-foreground",className),...props}));CardDescription.displayName="CardDescription";const CardContent=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("p-6 pt-0",className),...props}));CardContent.displayName="CardContent";const CardFooter=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex items-center p-6 pt-0",className),...props}));CardFooter.displayName="CardFooter",Card.__docgenInfo={description:"",methods:[],displayName:"Card"},CardHeader.__docgenInfo={description:"",methods:[],displayName:"CardHeader"},CardFooter.__docgenInfo={description:"",methods:[],displayName:"CardFooter"},CardTitle.__docgenInfo={description:"",methods:[],displayName:"CardTitle"},CardDescription.__docgenInfo={description:"",methods:[],displayName:"CardDescription"},CardContent.__docgenInfo={description:"",methods:[],displayName:"CardContent"}},"./src/components/ui/input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>Input});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),class_variance_authority__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/lib/utils.ts");const inputVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_2__.F)("flex w-full rounded-md border bg-input text-input-foreground px-3 py-2 text-sm ring-offset-background file:border-transparent file:mr-4 file:bg-background file:text-sm file:font-medium placeholder:text-input-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:border-primary focus-visible:border-2 disabled:cursor-not-allowed disabled:opacity-50 my-1",{variants:{size:{default:"h-10",sm:"h-8 px-2",lg:"h-12 px-4"},variant:{default:"",filled:"border-transparent bg-secondary",outline:"border-2"}},defaultVariants:{size:"default",variant:"default"}}),Input=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,size,variant,type,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(inputVariants({size,variant,className})),ref,...props}));Input.displayName="Input",Input.__docgenInfo={description:"",methods:[],displayName:"Input",composes:["Omit","VariantProps"]}},"./src/components/ui/label.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>Label});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-label/dist/index.mjs"),class_variance_authority__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/utils.ts");const labelVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_3__.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_2__.b,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(labelVariants(),className),...props}));Label.displayName=_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_2__.b.displayName,Label.__docgenInfo={description:"",methods:[]}},"./src/lib/types/user.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var UserRole,Permission;__webpack_require__.d(__webpack_exports__,{aX:()=>Permission,gG:()=>UserRole,mV:()=>ROLE_PERMISSIONS}),function(UserRole){UserRole.USER="USER",UserRole.MERCHANT="MERCHANT",UserRole.ADMIN="ADMIN"}(UserRole||(UserRole={})),function(Permission){Permission.CREATE_PAYMENT="create_payment",Permission.VIEW_PAYMENTS="view_payments",Permission.MANAGE_MERCHANT="manage_merchant",Permission.MANAGE_USERS="manage_users",Permission.VIEW_REPORTS="view_reports",Permission.MANAGE_SETTINGS="manage_settings",Permission.MANAGE_ROLES="manage_roles"}(Permission||(Permission={}));const ROLE_PERMISSIONS={USER:["create_payment","view_payments"],MERCHANT:["create_payment","view_payments","manage_merchant","view_reports"],ADMIN:["create_payment","view_payments","manage_merchant","manage_users","view_reports","manage_settings","manage_roles"]}},"./src/lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$g:()=>formatPrice,M0:()=>formatAddress,Yq:()=>formatDate,cn:()=>cn,ej:()=>formatAmount});var clsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),tailwind_merge__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tailwind-merge/dist/bundle-mjs.mjs");function cn(...inputs){return(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.QP)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.$)(inputs))}const formatPrice=(amount,currency="USD",locale="US")=>Intl.NumberFormat(locale,{style:"currency",currency}).format(amount),formatAddress=address=>address?`${address.substring(0,6)}...${address.substring(address.length-4)}`:"",formatDate=dateString=>{const date=new Date(dateString);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(date)},formatAmount=(amount,decimals=7)=>{const parsed=Number.parseFloat(amount);return isNaN(parsed)?"0".padEnd(decimals+2,"0"):parsed.toFixed(decimals)}},"./src/providers/AuthProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>useAuth});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),axios=__webpack_require__("./node_modules/axios/lib/axios.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");const API_URL="http://localhost:4000";const authService=new class AuthService{async login(credentials){try{return(await axios.A.post(`${API_URL}/auth/login`,credentials)).data}catch(error){throw console.error("Login error:",error),error}}async register(data){try{const formattedData={name:data.name,email:data.email,password:data.password,role:data.role};return(await axios.A.post(`${API_URL}/auth/register`,formattedData)).data}catch(error){throw console.error("Registration error:",error),error}}async refreshToken(refreshToken){try{return(await axios.A.post(`${API_URL}/auth/refresh-token`,{refreshToken})).data}catch(error){throw console.error("Token refresh error:",error),error}}async logout(){try{await axios.A.post(`${API_URL}/auth/logout`)}catch(error){throw console.error("Logout error:",error),error}}};var types_user=__webpack_require__("./src/lib/types/user.ts"),AuthProvider_console=__webpack_require__("./node_modules/console-browserify/index.js");const AuthContext=(0,react.createContext)(void 0),useAuth=()=>{const context=(0,react.useContext)(AuthContext);if(void 0===context)throw new Error("useAuth must be used within an AuthProvider");return context};(({children})=>{const[user,setUser]=(0,react.useState)(null),[token,setToken]=(0,react.useState)(null),[loading,setLoading]=(0,react.useState)(!0);(0,react.useEffect)(()=>{(()=>{try{const storedToken=localStorage.getItem("token"),storedUser=localStorage.getItem("user");if(storedToken&&storedUser)try{const parsedUser=JSON.parse(storedUser);parsedUser&&"object"==typeof parsedUser&&"id"in parsedUser&&"email"in parsedUser&&"name"in parsedUser?(setToken(storedToken),setUser(parsedUser)):(localStorage.removeItem("user"),localStorage.removeItem("token"))}catch(error){AuthProvider_console.error("Error parsing stored user data:",error),localStorage.removeItem("user"),localStorage.removeItem("token")}}catch(error){AuthProvider_console.error("Error accessing localStorage:",error)}finally{setLoading(!1)}})()},[]);return(0,jsx_runtime.jsx)(AuthContext.Provider,{value:{user,token,isAuthenticated:!!token,login:async(email,password)=>{try{const response=await authService.login({email,password});setToken(response.tokens.accessToken),setUser(response.user),localStorage.setItem("token",response.tokens.accessToken),localStorage.setItem("user",JSON.stringify(response.user))}catch(error){throw AuthProvider_console.error("Login failed:",error),error}},register:async(name,email,password,role)=>{try{const response=await authService.register({name,email,password,role});setToken(response.tokens.accessToken),setUser(response.user),localStorage.setItem("token",response.tokens.accessToken),localStorage.setItem("user",JSON.stringify(response.user))}catch(error){throw AuthProvider_console.error("Registration failed:",error),error}},logout:async()=>{try{await authService.logout(),setToken(null),setUser(null),localStorage.removeItem("token"),localStorage.removeItem("user")}catch(error){throw AuthProvider_console.error("Logout failed:",error),error}},loading,isLoading:loading,hasPermission:permission=>{if(!user)return!1;const userPermissions=types_user.mV[user.role];return(null==userPermissions?void 0:userPermissions.includes(permission))||!1}},children})}).__docgenInfo={description:"",methods:[],displayName:"AuthProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}}}]);