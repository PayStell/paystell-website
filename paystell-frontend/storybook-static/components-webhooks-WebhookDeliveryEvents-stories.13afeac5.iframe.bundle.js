(self.webpackChunkpaystell_frontend=self.webpackChunkpaystell_frontend||[]).push([[6765],{"./src/components/ui/badge.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>Badge});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),class_variance_authority__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/utils.ts");const badgeVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_1__.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-secondary text-secondary-foreground shadow",active:"border-transparent bg-green-100 text-green-700 shadow",inactive:"border-transparent bg-red-100 text-red-700 shadow"}},defaultVariants:{variant:"default"}}),Badge=({className,variant,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(badgeVariants({variant}),className),...props});Badge.__docgenInfo={description:"",methods:[],displayName:"Badge",composes:["VariantProps"]}},"./src/components/ui/card.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{BT:()=>CardDescription,Wu:()=>CardContent,ZB:()=>CardTitle,Zp:()=>Card,aR:()=>CardHeader,wL:()=>CardFooter});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/utils.ts");const Card=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("rounded-xl bg-card shadow",className),...props}));Card.displayName="Card";const CardHeader=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex flex-col space-y-1.5 p-6",className),...props}));CardHeader.displayName="CardHeader";const CardTitle=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("font-semibold leading-none tracking-tight text-foreground",className),...props}));CardTitle.displayName="CardTitle";const CardDescription=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("text-sm text-card-foreground",className),...props}));CardDescription.displayName="CardDescription";const CardContent=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("p-6 pt-0",className),...props}));CardContent.displayName="CardContent";const CardFooter=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex items-center p-6 pt-0",className),...props}));CardFooter.displayName="CardFooter",Card.__docgenInfo={description:"",methods:[],displayName:"Card"},CardHeader.__docgenInfo={description:"",methods:[],displayName:"CardHeader"},CardFooter.__docgenInfo={description:"",methods:[],displayName:"CardFooter"},CardTitle.__docgenInfo={description:"",methods:[],displayName:"CardTitle"},CardDescription.__docgenInfo={description:"",methods:[],displayName:"CardDescription"},CardContent.__docgenInfo={description:"",methods:[],displayName:"CardContent"}},"./src/components/ui/dialog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Cf:()=>DialogContent,Es:()=>DialogFooter,L3:()=>DialogTitle,c7:()=>DialogHeader,lG:()=>Dialog,rr:()=>DialogDescription,zM:()=>DialogTrigger});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-dialog/dist/index.mjs"),_barrel_optimize_names_MdClose_react_icons_md__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("__barrel_optimize__?names=MdCheckCircle!=!./node_modules/react-icons/md/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/utils.ts");const Dialog=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.bL,DialogTrigger=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.l9,DialogPortal=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.ZL,DialogOverlay=(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.bm,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.hJ,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("fixed inset-0 z-50 bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",className),...props})));DialogOverlay.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.hJ.displayName;const DialogContent=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,children,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(DialogPortal,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DialogOverlay,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.UC,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-card p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",className),...props,children:[children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_MdClose_react_icons_md__WEBPACK_IMPORTED_MODULE_3__.m6K,{className:"h-4 w-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.UC.displayName;const DialogHeader=({className,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("flex flex-col space-y-1.5 text-center sm:text-left",className),...props});DialogHeader.displayName="DialogHeader";const DialogFooter=({className,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",className),...props});DialogFooter.displayName="DialogFooter";const DialogTitle=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.hE,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("text-lg font-semibold leading-none tracking-tight",className),...props}));DialogTitle.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.hE.displayName;const DialogDescription=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.VY,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("text-sm text-muted-foreground",className),...props}));DialogDescription.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__.VY.displayName,DialogOverlay.__docgenInfo={description:"",methods:[]},DialogContent.__docgenInfo={description:"",methods:[]},DialogHeader.__docgenInfo={description:"",methods:[],displayName:"DialogHeader"},DialogFooter.__docgenInfo={description:"",methods:[],displayName:"DialogFooter"},DialogTitle.__docgenInfo={description:"",methods:[]},DialogDescription.__docgenInfo={description:"",methods:[]}},"./src/components/ui/table.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A0:()=>TableHeader,BF:()=>TableBody,Hj:()=>TableRow,XI:()=>Table,nA:()=>TableCell,nd:()=>TableHead,r6:()=>TableCaption});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/utils.ts");const Table=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"relative w-full overflow-auto",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("table",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("w-full caption-bottom text-sm",className),...props})}));Table.displayName="Table";const TableHeader=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("thead",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("[&_tr]:border-b bg-muted text-muted-foreground",className),...props}));TableHeader.displayName="TableHeader";const TableBody=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tbody",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("[&_tr:last-child]:border-0 bg-card text-card-foreground",className),...props}));TableBody.displayName="TableBody";const TableFooter=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tfoot",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",className),...props}));TableFooter.displayName="TableFooter";const TableRow=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tr",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("border-b transition-colors hover:bg-muted/20 data-[state=selected]:bg-muted",className),...props}));TableRow.displayName="TableRow";const TableHead=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",className),...props}));TableHead.displayName="TableHead";const TableCell=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",className),...props}));TableCell.displayName="TableCell";const TableCaption=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("caption",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("mt-4 text-sm text-muted-foreground",className),...props}));TableCaption.displayName="TableCaption",Table.__docgenInfo={description:"",methods:[],displayName:"Table"},TableHeader.__docgenInfo={description:"",methods:[],displayName:"TableHeader"},TableBody.__docgenInfo={description:"",methods:[],displayName:"TableBody"},TableFooter.__docgenInfo={description:"",methods:[],displayName:"TableFooter"},TableHead.__docgenInfo={description:"",methods:[],displayName:"TableHead"},TableRow.__docgenInfo={description:"",methods:[],displayName:"TableRow"},TableCell.__docgenInfo={description:"",methods:[],displayName:"TableCell"},TableCaption.__docgenInfo={description:"",methods:[],displayName:"TableCaption"}},"./src/components/webhooks/WebhookDeliveryEvents.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{EmptyState:()=>EmptyState,WithEvents:()=>WithEvents,__namedExportsOrder:()=>__namedExportsOrder,default:()=>WebhookDeliveryEvents_stories});var webhook_types=__webpack_require__("./src/types/webhook-types.ts"),jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),format=__webpack_require__("./node_modules/date-fns/format.mjs"),dist=__webpack_require__("./node_modules/sonner/dist/index.mjs"),table=__webpack_require__("./src/components/ui/table.tsx"),card=__webpack_require__("./src/components/ui/card.tsx"),dialog=__webpack_require__("./src/components/ui/dialog.tsx"),ui_button=__webpack_require__("./src/components/ui/button.tsx"),badge=__webpack_require__("./src/components/ui/badge.tsx"),WebhookStatusBadge=__webpack_require__("./src/components/webhooks/WebhookStatusBadge.tsx"),differenceInMilliseconds=__webpack_require__("./node_modules/date-fns/differenceInMilliseconds.mjs"),webhook_utils=__webpack_require__("./src/utils/webhook-utils.ts");const WebhookRetryTimeline=({attemptsMade,maxAttempts,createdAt,completedAt,nextRetry,status})=>{const timestamps=(()=>{const mockTimestamps=[createdAt];let lastTime=createdAt.getTime();for(let i=1;i<attemptsMade;i++){lastTime+=(0,webhook_utils.Vy)(i-1,5e3,6e5),mockTimestamps.push(new Date(lastTime))}return completedAt?mockTimestamps.push(completedAt):nextRetry&&"failed"===status&&mockTimestamps.push(nextRetry),mockTimestamps})(),getAttemptLabel=index=>0===index?"Initial Attempt":index===timestamps.length-1&&completedAt?"Completed":index===timestamps.length-1&&nextRetry?"Next Retry":`Retry Attempt ${index}`,getDelayTime=index=>{if(0===index||index>=timestamps.length)return null;const delay=(0,differenceInMilliseconds.b)(timestamps[index],timestamps[index-1]);return delay<1e3?`${delay}ms`:delay<6e4?`${Math.round(delay/1e3)}s`:delay<36e5?`${Math.round(delay/6e4)}m`:`${Math.round(delay/36e5)}h`},getTimelineItemClasses=index=>{if(index===timestamps.length-1){if("completed"===status)return"flex items-center text-green-600";if("failed"===status)return"flex items-center text-red-600";if("pending"===status)return"flex items-center text-yellow-600"}return"flex items-center"};return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)("div",{className:"absolute left-3 top-4 bottom-4 w-0.5 bg-gray-200"}),(0,jsx_runtime.jsx)("div",{className:"space-y-6",children:timestamps.map((timestamp,index)=>(0,jsx_runtime.jsxs)("div",{className:getTimelineItemClasses(index),children:[(0,jsx_runtime.jsx)("div",{className:"h-6 w-6 rounded-full border-2 flex items-center justify-center\n                "+(index===timestamps.length-1?"completed"===status?"border-green-500 bg-green-100":"failed"===status?"border-red-500 bg-red-100":"border-yellow-500 bg-yellow-100":"border-gray-300 bg-white"),children:(0,jsx_runtime.jsx)("span",{className:"text-xs font-semibold",children:index+1})}),(0,jsx_runtime.jsxs)("div",{className:"ml-4",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm font-medium",children:getAttemptLabel(index)}),(0,jsx_runtime.jsx)("p",{className:"text-xs text-gray-500",children:(0,format.GP)(timestamp,"MMM d, yyyy HH:mm:ss")}),index>0&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-gray-400",children:getDelayTime(index)?`Delay: ${getDelayTime(index)}`:""})]})]},index))})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-2",children:[(0,jsx_runtime.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["Retry Progress: ",attemptsMade," of ",maxAttempts," attempts"]}),(0,jsx_runtime.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,jsx_runtime.jsx)("div",{className:"h-2 rounded-full "+("completed"===status?"bg-green-500":"failed"===status?"bg-red-500":"bg-yellow-500"),style:{width:attemptsMade/maxAttempts*100+"%"}})})]})]})},webhooks_WebhookRetryTimeline=WebhookRetryTimeline;WebhookRetryTimeline.__docgenInfo={description:"",methods:[],displayName:"WebhookRetryTimeline",props:{attemptsMade:{required:!0,tsType:{name:"number"},description:""},maxAttempts:{required:!0,tsType:{name:"number"},description:""},createdAt:{required:!0,tsType:{name:"Date"},description:""},updatedAt:{required:!0,tsType:{name:"Date"},description:""},completedAt:{required:!1,tsType:{name:"Date"},description:""},nextRetry:{required:!1,tsType:{name:"Date"},description:""},status:{required:!0,tsType:{name:"union",raw:"'pending' | 'completed' | 'failed'",elements:[{name:"literal",value:"'pending'"},{name:"literal",value:"'completed'"},{name:"literal",value:"'failed'"}]},description:""}}};var webhook_service=__webpack_require__("./src/services/webhook.service.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");const WebhookDeliveryEvents=({webhook,deliveryEvents,onRefresh})=>{const[selectedEvent,setSelectedEvent]=(0,react.useState)(null),[detailsOpen,setDetailsOpen]=(0,react.useState)(!1),[isRetrying,setIsRetrying]=(0,react.useState)(!1),handleRetry=async event=>{if("failed"===event.status)try{setIsRetrying(!0),await(0,webhook_service.IK)(event.id),dist.oR.success("Webhook event retry initiated"),onRefresh()}catch(error){console.error("Error retrying webhook event:",error),dist.oR.error("Failed to retry webhook event")}finally{setIsRetrying(!1)}else dist.oR.info("Only failed webhook events can be retried")};return 0===deliveryEvents.length?(0,jsx_runtime.jsx)(card.Zp,{children:(0,jsx_runtime.jsxs)(card.aR,{children:[(0,jsx_runtime.jsx)(card.ZB,{children:"Webhook Delivery Events"}),(0,jsx_runtime.jsx)(card.BT,{children:"No events found for this webhook. Test the webhook to see delivery events."})]})}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(card.Zp,{children:[(0,jsx_runtime.jsxs)(card.aR,{children:[(0,jsx_runtime.jsx)(card.ZB,{children:"Webhook Delivery Events"}),(0,jsx_runtime.jsxs)(card.BT,{children:["Recent webhook delivery attempts for ",webhook.url]})]}),(0,jsx_runtime.jsx)(card.Wu,{children:(0,jsx_runtime.jsx)("div",{className:"rounded-md border",children:(0,jsx_runtime.jsxs)(table.XI,{children:[(0,jsx_runtime.jsx)(table.A0,{children:(0,jsx_runtime.jsxs)(table.Hj,{children:[(0,jsx_runtime.jsx)(table.nd,{children:"Event ID"}),(0,jsx_runtime.jsx)(table.nd,{children:"Status"}),(0,jsx_runtime.jsx)(table.nd,{children:"Attempts"}),(0,jsx_runtime.jsx)(table.nd,{children:"Created"}),(0,jsx_runtime.jsx)(table.nd,{children:"Last Updated"}),(0,jsx_runtime.jsx)(table.nd,{className:"text-right",children:"Actions"})]})}),(0,jsx_runtime.jsx)(table.BF,{children:deliveryEvents.map(event=>(0,jsx_runtime.jsxs)(table.Hj,{children:[(0,jsx_runtime.jsxs)(table.nA,{className:"font-medium",children:[event.id.substring(0,8),"..."]}),(0,jsx_runtime.jsx)(table.nA,{children:(0,jsx_runtime.jsx)(WebhookStatusBadge.A,{status:event.status})}),(0,jsx_runtime.jsxs)(table.nA,{children:[event.attemptsMade," / ",event.maxAttempts]}),(0,jsx_runtime.jsx)(table.nA,{children:(0,format.GP)(new Date(event.createdAt),"MMM d, yyyy HH:mm:ss")}),(0,jsx_runtime.jsx)(table.nA,{children:(0,format.GP)(new Date(event.updatedAt),"MMM d, yyyy HH:mm:ss")}),(0,jsx_runtime.jsx)(table.nA,{className:"text-right",children:(0,jsx_runtime.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,jsx_runtime.jsx)(ui_button.$,{variant:"outline",size:"sm",onClick:()=>(event=>{setSelectedEvent(event),setDetailsOpen(!0)})(event),children:"Details"}),"failed"===event.status&&(0,jsx_runtime.jsx)(ui_button.$,{variant:"outline",size:"sm",onClick:()=>handleRetry(event),disabled:isRetrying,children:isRetrying?"Retrying...":"Retry"})]})})]},event.id))})]})})})]}),(0,jsx_runtime.jsx)(dialog.lG,{open:detailsOpen,onOpenChange:setDetailsOpen,children:(0,jsx_runtime.jsxs)(dialog.Cf,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,jsx_runtime.jsxs)(dialog.c7,{children:[(0,jsx_runtime.jsx)(dialog.L3,{children:"Webhook Event Details"}),(0,jsx_runtime.jsxs)(dialog.rr,{children:["Event ID: ",null==selectedEvent?void 0:selectedEvent.id]})]}),selectedEvent&&(0,jsx_runtime.jsxs)("div",{className:"space-y-6",children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Status"}),(0,jsx_runtime.jsx)(WebhookStatusBadge.A,{status:selectedEvent.status})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Attempts"}),(0,jsx_runtime.jsxs)("p",{className:"text-sm",children:[selectedEvent.attemptsMade," of ",selectedEvent.maxAttempts]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Created"}),(0,jsx_runtime.jsx)("p",{className:"text-sm",children:(0,format.GP)(new Date(selectedEvent.createdAt),"MMM d, yyyy HH:mm:ss")})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Last Updated"}),(0,jsx_runtime.jsx)("p",{className:"text-sm",children:(0,format.GP)(new Date(selectedEvent.updatedAt),"MMM d, yyyy HH:mm:ss")})]}),selectedEvent.completedAt&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Completed"}),(0,jsx_runtime.jsx)("p",{className:"text-sm",children:(0,format.GP)(new Date(selectedEvent.completedAt),"MMM d, yyyy HH:mm:ss")})]}),selectedEvent.nextRetry&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Next Retry"}),(0,jsx_runtime.jsx)("p",{className:"text-sm",children:(0,format.GP)(new Date(selectedEvent.nextRetry),"MMM d, yyyy HH:mm:ss")})]})]}),selectedEvent.error&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Error"}),(0,jsx_runtime.jsx)("div",{className:"bg-red-50 text-red-900 p-3 rounded text-sm font-mono whitespace-pre-wrap",children:selectedEvent.error})]}),selectedEvent.responseStatusCode&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Response Status"}),(0,jsx_runtime.jsx)(badge.E,{children:selectedEvent.responseStatusCode})]}),selectedEvent.signature&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Signature"}),(0,jsx_runtime.jsx)("div",{className:"bg-gray-50 p-3 rounded text-sm font-mono break-all",children:selectedEvent.signature})]}),selectedEvent.headers&&Object.keys(selectedEvent.headers).length>0&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Request Headers"}),(0,jsx_runtime.jsx)("div",{className:"bg-gray-50 p-3 rounded text-sm font-mono whitespace-pre-wrap max-h-60 overflow-y-auto",children:Object.entries(selectedEvent.headers).map(([key,value])=>(0,jsx_runtime.jsxs)("div",{className:"mb-1",children:[(0,jsx_runtime.jsxs)("span",{className:"font-semibold",children:[key,":"]})," ",value]},key))})]}),selectedEvent.attemptsMade>0&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Retry Timeline"}),(0,jsx_runtime.jsx)(webhooks_WebhookRetryTimeline,{attemptsMade:selectedEvent.attemptsMade,maxAttempts:selectedEvent.maxAttempts,createdAt:new Date(selectedEvent.createdAt),completedAt:selectedEvent.completedAt?new Date(selectedEvent.completedAt):void 0,updatedAt:new Date(selectedEvent.updatedAt),nextRetry:selectedEvent.nextRetry?new Date(selectedEvent.nextRetry):void 0,status:selectedEvent.status})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Payload"}),(0,jsx_runtime.jsx)("div",{className:"bg-gray-50 p-3 rounded text-sm font-mono whitespace-pre-wrap max-h-60 overflow-y-auto",children:JSON.stringify(selectedEvent.payload,null,2)})]}),selectedEvent.responseBody&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium mb-1",children:"Response Body"}),(0,jsx_runtime.jsx)("div",{className:"bg-gray-50 p-3 rounded text-sm font-mono whitespace-pre-wrap max-h-60 overflow-y-auto",children:selectedEvent.responseBody})]})]}),(0,jsx_runtime.jsx)(dialog.Es,{children:"failed"===(null==selectedEvent?void 0:selectedEvent.status)&&(0,jsx_runtime.jsx)(ui_button.$,{variant:"default",onClick:()=>{handleRetry(selectedEvent),setDetailsOpen(!1)},disabled:isRetrying,children:isRetrying?"Retrying...":"Retry Webhook"})})]})})]})},webhooks_WebhookDeliveryEvents=WebhookDeliveryEvents;WebhookDeliveryEvents.__docgenInfo={description:"",methods:[],displayName:"WebhookDeliveryEvents",props:{webhook:{required:!0,tsType:{name:"MerchantWebhook"},description:""},deliveryEvents:{required:!0,tsType:{name:"Array",elements:[{name:"MerchantWebhookEventEntity"}],raw:"WebhookDeliveryEvent[]"},description:""},onRefresh:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var WebhookDeliveryEvents_stories_console=__webpack_require__("./node_modules/console-browserify/index.js");const WebhookDeliveryEvents_stories={title:"Webhooks/WebhookDeliveryEvents",component:webhooks_WebhookDeliveryEvents,parameters:{layout:"padded"},tags:["autodocs"]},mockWebhook={id:"wh_123456",merchantId:"mer_123456",url:"https://example.com/webhook",isActive:!0,secretKey:"whsec_123456••••••••••••••••",eventTypes:[webhook_types._.PAYMENT_SUCCEEDED,webhook_types._.PAYMENT_FAILED],maxRetries:3,initialRetryDelay:5e3,maxRetryDelay:3e5,createdAt:new Date("2023-01-01T00:00:00Z"),updatedAt:new Date("2023-01-02T00:00:00Z")},onRefresh=()=>WebhookDeliveryEvents_stories_console.log("Refreshing webhook events"),WithEvents={args:{webhook:mockWebhook,deliveryEvents:[{id:"evt_123456",jobId:"job_123456",webhookId:"wh_123456",webhookUrl:"https://example.com/webhook",status:"completed",attemptsMade:1,maxAttempts:3,payload:{id:"pmt_123456",amount:1e3,currency:"USD",status:"succeeded"},responseStatusCode:200,responseBody:'{"success": true}',createdAt:new Date("2023-04-01T10:00:00Z"),completedAt:new Date("2023-04-01T10:00:05Z"),updatedAt:new Date("2023-04-01T10:00:05Z")},{id:"evt_234567",jobId:"job_234567",webhookId:"wh_123456",webhookUrl:"https://example.com/webhook",status:"failed",attemptsMade:3,maxAttempts:3,payload:{id:"pmt_234567",amount:2e3,currency:"USD",status:"failed"},error:"Connection timeout after 10s",responseStatusCode:504,createdAt:new Date("2023-04-02T11:00:00Z"),updatedAt:new Date("2023-04-02T11:15:00Z")},{id:"evt_345678",jobId:"job_345678",webhookId:"wh_123456",webhookUrl:"https://example.com/webhook",status:"pending",attemptsMade:1,maxAttempts:3,payload:{id:"pmt_345678",amount:3e3,currency:"USD",status:"pending"},nextRetry:new Date("2023-04-03T12:10:00Z"),createdAt:new Date("2023-04-03T12:00:00Z"),updatedAt:new Date("2023-04-03T12:05:00Z")}],onRefresh}},EmptyState={args:{webhook:mockWebhook,deliveryEvents:[],onRefresh}},__namedExportsOrder=["WithEvents","EmptyState"];WithEvents.parameters={...WithEvents.parameters,docs:{...WithEvents.parameters?.docs,source:{originalSource:"{\n  args: {\n    webhook: mockWebhook,\n    deliveryEvents: mockDeliveryEvents,\n    onRefresh\n  }\n}",...WithEvents.parameters?.docs?.source}}},EmptyState.parameters={...EmptyState.parameters,docs:{...EmptyState.parameters?.docs,source:{originalSource:"{\n  args: {\n    webhook: mockWebhook,\n    deliveryEvents: [],\n    onRefresh\n  }\n}",...EmptyState.parameters?.docs?.source}}}},"./src/components/webhooks/WebhookStatusBadge.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_components_ui_badge__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./src/components/ui/badge.tsx"));const WebhookStatusBadge=({status})=>{const{variant,className}=(()=>{switch(status){case"active":case"completed":return{variant:"outline",className:"bg-green-100 text-green-800 border-green-300"};case"inactive":default:return{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-300"};case"failed":return{variant:"outline",className:"bg-red-100 text-red-800 border-red-300"};case"pending":return{variant:"outline",className:"bg-yellow-100 text-yellow-800 border-yellow-300"}}})();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_badge__WEBPACK_IMPORTED_MODULE_2__.E,{variant,className,children:(()=>{switch(status){case"active":return"Active";case"inactive":return"Inactive";case"completed":return"Completed";case"failed":return"Failed";case"pending":return"Pending";default:return"Unknown"}})()})},__WEBPACK_DEFAULT_EXPORT__=WebhookStatusBadge;WebhookStatusBadge.__docgenInfo={description:"",methods:[],displayName:"WebhookStatusBadge",props:{status:{required:!0,tsType:{name:"union",raw:"WebhookDeliveryStatus | 'active' | 'inactive'",elements:[{name:"union",raw:"'pending' | 'completed' | 'failed'",elements:[{name:"literal",value:"'pending'"},{name:"literal",value:"'completed'"},{name:"literal",value:"'failed'"}]},{name:"literal",value:"'active'"},{name:"literal",value:"'inactive'"}]},description:""}}}},"./src/utils/webhook-utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var crypto__WEBPACK_IMPORTED_MODULE_1___namespace_cache;__webpack_require__.d(__webpack_exports__,{Bq:()=>generateSecretKey,Jt:()=>getEventTypesByCategory,ML:()=>EVENT_CATEGORIES,Nl:()=>isValidWebhookUrl,Vy:()=>calculateNextRetryTime,vF:()=>EVENT_TYPE_INFO});var _types_webhook_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/types/webhook-types.ts"),crypto__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/crypto-browserify/index.js");const EVENT_TYPE_INFO={[_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.PAYMENT_SUCCEEDED]:{type:_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.PAYMENT_SUCCEEDED,description:"Triggered when a payment is successfully processed",category:"Payment",samplePayload:{id:"pmt_123456789",amount:1e3,currency:"USD",status:"succeeded",created:(new Date).toISOString(),customer_id:"cus_87654321",payment_method:"card"}},[_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.PAYMENT_FAILED]:{type:_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.PAYMENT_FAILED,description:"Triggered when a payment attempt fails",category:"Payment",samplePayload:{id:"pmt_123456789",amount:1e3,currency:"USD",status:"failed",created:(new Date).toISOString(),customer_id:"cus_87654321",payment_method:"card",error:{code:"card_declined",message:"Card was declined",decline_code:"insufficient_funds"}}},[_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.PAYMENT_REFUNDED]:{type:_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.PAYMENT_REFUNDED,description:"Triggered when a payment is refunded",category:"Payment",samplePayload:{id:"pmt_123456789",amount:1e3,currency:"USD",status:"refunded",refund_amount:1e3,created:(new Date).toISOString(),customer_id:"cus_87654321",payment_method:"card"}},[_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.PAYMENT_PENDING]:{type:_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.PAYMENT_PENDING,description:"Triggered when a payment is pending additional action or processing",category:"Payment",samplePayload:{id:"pmt_123456789",amount:1e3,currency:"USD",status:"pending",created:(new Date).toISOString(),customer_id:"cus_87654321",payment_method:"bank_transfer",pending_reason:"bank_transfer_waiting"}},[_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.ACCOUNT_CREATED]:{type:_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.ACCOUNT_CREATED,description:"Triggered when a new account is created",category:"Account",samplePayload:{id:"acc_123456789",name:"Merchant Name",email:"merchant@example.com",created:(new Date).toISOString(),status:"active"}},[_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.ACCOUNT_UPDATED]:{type:_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.ACCOUNT_UPDATED,description:"Triggered when account details are updated",category:"Account",samplePayload:{id:"acc_123456789",name:"Updated Merchant Name",email:"updated@example.com",updated:(new Date).toISOString(),status:"active",previous_values:{name:"Merchant Name",email:"merchant@example.com"}}},[_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.TEST_WEBHOOK]:{type:_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._.TEST_WEBHOOK,description:"A test webhook event for testing webhook delivery",category:"Test",samplePayload:{id:"evt_test_12345",test:!0,created:(new Date).toISOString(),message:"This is a test webhook event"}}},EVENT_CATEGORIES=[{id:"payment",name:"Payment"},{id:"account",name:"Account"},{id:"test",name:"Test"}],getEventTypesByCategory=category=>Object.values(_types_webhook_types__WEBPACK_IMPORTED_MODULE_0__._).filter(eventType=>EVENT_TYPE_INFO[eventType].category.toLowerCase()===category.toLowerCase()),generateSecretKey=()=>{const characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let result="";const randomValues=new Uint8Array(32);if(window.crypto)window.crypto.getRandomValues(randomValues);else if(void 0!==(crypto__WEBPACK_IMPORTED_MODULE_1___namespace_cache||(crypto__WEBPACK_IMPORTED_MODULE_1___namespace_cache=__webpack_require__.t(crypto__WEBPACK_IMPORTED_MODULE_1__,2))))try{var _crypto_webcrypto_getRandomValues,_crypto_webcrypto;null===(_crypto_webcrypto=crypto__WEBPACK_IMPORTED_MODULE_1__.webcrypto)||void 0===_crypto_webcrypto||null===(_crypto_webcrypto_getRandomValues=_crypto_webcrypto.getRandomValues)||void 0===_crypto_webcrypto_getRandomValues||_crypto_webcrypto_getRandomValues.call(_crypto_webcrypto,randomValues)}catch(e){for(let i=0;i<32;i++)randomValues[i]=Math.floor(256*Math.random())}else for(let i=0;i<32;i++)randomValues[i]=Math.floor(256*Math.random());for(let i=0;i<32;i++)result+=characters.charAt(randomValues[i]%62);return result},calculateNextRetryTime=(attemptsMade,initialRetryDelay,maxRetryDelay)=>Math.min(maxRetryDelay,initialRetryDelay*Math.pow(2,attemptsMade)),isValidWebhookUrl=url=>{try{return"https:"===new URL(url).protocol}catch(e){return!1}}},"?0aec":()=>{},"?1e44":()=>{},"?3fc0":()=>{},"?4068":()=>{},"?593c":()=>{},"?7bec":()=>{},"?802b":()=>{},"?8131":()=>{},"?cad2":()=>{},"?d546":()=>{},"?e7e4":()=>{},"?fbf1":()=>{}}]);